"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[9841],{9841:(w,c,a)=>{a.r(c),a.d(c,{RoleDetailComponent:()=>A});var d=a(2881),u=a(9417),P=a(1413),g=a(6977),O=a(4299),l=a(5779),p=a(1141),_=a(491),m=a(7722),f=a(7515),C=a(6221),e=a(1360),M=a(1910);const h=()=>({"min-width":"60rem"});function b(n,s){1&n&&(e.j41(0,"div",4),e.nrm(1,"p-progressSpinner"),e.j41(2,"p"),e.EFF(3,"Loading role details..."),e.k0s()())}function E(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",5)(1,"p-card")(2,"h3"),e.EFF(3,"Error Loading Role"),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s(),e.j41(6,"p-button",6),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.goBack())}),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(5),e.JRh(t.errorMessage)}}function v(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",15)(1,"div")(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"p",16),e.EFF(5),e.k0s()(),e.j41(6,"p-button",17),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.goBack())}),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(3),e.JRh(t.role.name),e.R7$(2),e.JRh(t.role.kid)}}function R(n,s){if(1&n&&(e.j41(0,"div",11)(1,"strong"),e.EFF(2,"Description:"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.JRh(t.role.description||"No description")}}function F(n,s){1&n&&(e.j41(0,"tr")(1,"th",21),e.EFF(2,"Permission"),e.k0s(),e.j41(3,"th",22),e.EFF(4,"Action"),e.k0s(),e.j41(5,"th",23),e.EFF(6,"Asset Name"),e.k0s(),e.j41(7,"th",22),e.EFF(8,"Type"),e.k0s(),e.j41(9,"th",21),e.EFF(10,"Location"),e.k0s(),e.j41(11,"th",22),e.EFF(12,"Status"),e.k0s()())}function k(n,s){if(1&n&&(e.j41(0,"p",30),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",t.permission.description," ")}}function y(n,s){if(1&n&&(e.j41(0,"td")(1,"div",26)(2,"strong"),e.EFF(3),e.k0s(),e.j41(4,"small",27),e.EFF(5),e.k0s(),e.DNE(6,k,2,1,"p",28),e.j41(7,"span",29),e.EFF(8),e.k0s()()()),2&n){const t=e.XpG().$implicit;e.BMQ("rowspan",t.assetCount),e.R7$(3),e.JRh(t.permission.name),e.R7$(2),e.JRh(t.permission.code),e.R7$(),e.Y8G("ngIf",t.permission.description),e.R7$(2),e.SpI("",t.assetCount," asset(s)")}}function D(n,s){if(1&n&&(e.j41(0,"td")(1,"span"),e.EFF(2),e.k0s()()),2&n){const t=e.XpG().$implicit;e.BMQ("rowspan",t.assetCount),e.R7$(),e.ZvI("action-badge action-",t.permission.action,""),e.R7$(),e.SpI(" ",t.permission.action," ")}}function x(n,s){if(1&n&&(e.j41(0,"tr"),e.DNE(1,y,9,5,"td",24)(2,D,3,5,"td",24),e.j41(3,"td")(4,"span"),e.EFF(5),e.k0s()(),e.j41(6,"td")(7,"span"),e.EFF(8),e.k0s()(),e.j41(9,"td")(10,"small",25),e.EFF(11),e.k0s()(),e.j41(12,"td")(13,"span"),e.EFF(14),e.k0s()()()),2&n){const t=s.$implicit;e.R7$(),e.Y8G("ngIf",t.isFirstAsset),e.R7$(),e.Y8G("ngIf",t.isFirstAsset),e.R7$(2),e.AVh("unknown-asset",!t.asset.kid),e.R7$(),e.SpI(" ",t.asset.name," "),e.R7$(2),e.ZvI("type-badge type-",t.asset.type,""),e.R7$(),e.SpI(" ",t.asset.type," "),e.R7$(3),e.JRh(t.asset.location),e.R7$(2),e.ZvI("status-badge status-",t.asset.status,""),e.R7$(),e.SpI(" ",t.asset.status," ")}}function I(n,s){1&n&&(e.j41(0,"tr")(1,"td",31),e.EFF(2,"No permissions or assets found."),e.k0s()())}function j(n,s){if(1&n&&(e.j41(0,"p-table",18),e.DNE(1,F,13,0,"ng-template",8)(2,x,15,14,"ng-template",19)(3,I,3,0,"ng-template",20),e.k0s()),2&n){const t=e.XpG(2);e.Y8G("value",t.getExpandedPermissions())("tableStyle",e.lJ4(3,h))("rowHover",!0)}}function T(n,s){1&n&&(e.j41(0,"p",32),e.EFF(1," No permissions assigned to this role. "),e.k0s())}function $(n,s){if(1&n&&(e.j41(0,"div",7)(1,"p-card"),e.DNE(2,v,7,2,"ng-template",8),e.j41(3,"div",9),e.DNE(4,R,5,1,"div",10),e.j41(5,"div",11)(6,"strong"),e.EFF(7,"Type:"),e.k0s(),e.j41(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"div",11)(11,"strong"),e.EFF(12,"Total Permissions:"),e.k0s(),e.j41(13,"span"),e.EFF(14),e.k0s()(),e.j41(15,"div",11)(16,"strong"),e.EFF(17,"Total Assets:"),e.k0s(),e.j41(18,"span"),e.EFF(19),e.k0s()()(),e.j41(20,"h3",12),e.EFF(21,"Permissions & Assets"),e.k0s(),e.DNE(22,j,4,4,"p-table",13)(23,T,2,0,"p",14),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",t.role.description),e.R7$(5),e.JRh(t.role.type||"N/A"),e.R7$(5),e.JRh((null==t.role.permissions?null:t.role.permissions.length)||0),e.R7$(5),e.JRh(t.getTotalAssetsCount()),e.R7$(3),e.Y8G("ngIf",t.role.permissions&&t.role.permissions.length>0),e.R7$(),e.Y8G("ngIf",!t.role.permissions||0===t.role.permissions.length)}}let A=(()=>{class n{route;router;governanceServices;messageService;role=null;loading=!1;errorMessage=null;roleId=null;destroy$=new P.B;constructor(t,o,i,r){this.route=t,this.router=o,this.governanceServices=i,this.messageService=r}ngOnInit(){this.route.params.pipe((0,g.Q)(this.destroy$)).subscribe(t=>{this.roleId=t.id||t.kid||null,this.roleId?this.loadRole(this.roleId):this.errorMessage="No role ID provided in URL"})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadRole(t){this.loading=!0,this.errorMessage=null,this.role=null,this.governanceServices.getRoleDetail(t).pipe((0,g.Q)(this.destroy$)).subscribe({next:o=>{o&&!0===o.success&&o.data||o&&o.data?this.role=o.data:this.errorMessage=o?.message||"Failed to load role",this.loading=!1},error:o=>{this.loading=!1,this.errorMessage=o?.error?.message||o?.message||"Error fetching role";try{this.messageService.add({severity:"error",summary:"Error",detail:this.errorMessage})}catch{}}})}goBack(){this.router.navigate(["/governance/roles"])}getExpandedPermissions(){if(!this.role?.permissions)return[];const t=[];return this.role.permissions.forEach(o=>{const i=o.assets||[],r=i.length;0===r?t.push({permission:o,asset:{kid:null,name:"No assets",type:"none",location:"-",status:"-",source:"-",sensitivity:"-"},assetCount:1,isFirstAsset:!0}):i.forEach((B,G)=>{t.push({permission:o,asset:B,assetCount:r,isFirstAsset:0===G})})}),t}getTotalAssetsCount(){return this.role?.permissions?this.role.permissions.reduce((t,o)=>t+(o.assets?.length||0),0):0}static \u0275fac=function(o){return new(o||n)(e.rXU(M.nX),e.rXU(M.Ix),e.rXU(O.N),e.rXU(l.bg))};static \u0275cmp=e.VBU({type:n,selectors:[["app-role-detail"]],features:[e.Jv_([l.bg])],decls:5,vars:3,consts:[[1,"role-detail-container"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","role-detail-content",4,"ngIf"],[1,"loading-state"],[1,"error-state"],["label","Go Back","icon","pi pi-arrow-left",3,"onClick"],[1,"role-detail-content"],["pTemplate","header"],[1,"role-info"],["class","info-row",4,"ngIf"],[1,"info-row"],[1,"section-title"],["styleClass","p-datatable-gridlines",3,"value","tableStyle","rowHover",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"card-header"],[1,"role-subtitle"],["label","Back","icon","pi pi-arrow-left",3,"onClick"],["styleClass","p-datatable-gridlines",3,"value","tableStyle","rowHover"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","25%"],[2,"width","10%"],[2,"width","20%"],[4,"ngIf"],[1,"asset-location"],[1,"permission-cell"],[1,"permission-code"],["class","permission-desc",4,"ngIf"],[1,"asset-badge"],[1,"permission-desc"],["colspan","6",1,"text-center"],[1,"no-data"]],template:function(o,i){1&o&&(e.j41(0,"div",0),e.nrm(1,"p-toast"),e.DNE(2,b,4,0,"div",1)(3,E,7,1,"div",2)(4,$,24,6,"div",3),e.k0s()),2&o&&(e.R7$(2),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading&&i.errorMessage),e.R7$(),e.Y8G("ngIf",!i.loading&&!i.errorMessage&&i.role))},dependencies:[d.MD,d.bT,u.YN,p.tm,p.$n,l.Ei,_.Dw,_.Zp,m.MB,m.y8,f.df,f.pT,C.bG,C.XI],styles:[".role-detail-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1400px;margin:0 auto}.role-detail-container[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%], .role-detail-container[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;gap:1rem}.role-detail-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem}.role-detail-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.role-detail-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .role-subtitle[_ngcontent-%COMP%]{margin:.25rem 0 0;color:#7f8c8d;font-size:.9rem}.role-detail-container[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-bottom:2rem;padding:1rem;background:#f8f9fa;border-radius:6px}.role-detail-container[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.role-detail-container[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;text-transform:uppercase;letter-spacing:.5px}.role-detail-container[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;color:#2c3e50;font-weight:500}.role-detail-container[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:2rem 0 1rem;color:#2c3e50;font-size:1.25rem;border-bottom:2px solid #e9ecef;padding-bottom:.5rem}.role-detail-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{background:#f8f9fa;color:#495057;font-weight:600;border:1px solid #dee2e6;padding:.75rem}.role-detail-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.75rem;border:1px solid #dee2e6;vertical-align:top}.role-detail-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background:#f1f3f5}.role-detail-container[_ngcontent-%COMP%]   .permission-cell[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.role-detail-container[_ngcontent-%COMP%]   .permission-cell[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1rem;color:#2c3e50}.role-detail-container[_ngcontent-%COMP%]   .permission-cell[_ngcontent-%COMP%]   .permission-code[_ngcontent-%COMP%]{color:#6c757d;font-size:.85rem;font-family:monospace}.role-detail-container[_ngcontent-%COMP%]   .permission-cell[_ngcontent-%COMP%]   .permission-desc[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:.9rem;color:#495057;line-height:1.4}.role-detail-container[_ngcontent-%COMP%]   .permission-cell[_ngcontent-%COMP%]   .asset-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;background:#e3f2fd;color:#1976d2;border-radius:12px;font-size:.8rem;font-weight:500;margin-top:.5rem}.role-detail-container[_ngcontent-%COMP%]   .action-badge[_ngcontent-%COMP%]{display:inline-block;padding:.35rem .75rem;border-radius:4px;font-size:.85rem;font-weight:600;text-transform:uppercase}.role-detail-container[_ngcontent-%COMP%]   .action-badge.action-read[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.role-detail-container[_ngcontent-%COMP%]   .action-badge.action-write[_ngcontent-%COMP%]{background:#fff3e0;color:#f57c00}.role-detail-container[_ngcontent-%COMP%]   .action-badge.action-delete[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.role-detail-container[_ngcontent-%COMP%]   .action-badge.action-view[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.role-detail-container[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;border-radius:4px;font-size:.8rem;font-weight:500}.role-detail-container[_ngcontent-%COMP%]   .type-badge.type-route[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.role-detail-container[_ngcontent-%COMP%]   .type-badge.type-others[_ngcontent-%COMP%]{background:#fafafa;color:#616161}.role-detail-container[_ngcontent-%COMP%]   .type-badge.type-database[_ngcontent-%COMP%]{background:#e0f2f1;color:#00695c}.role-detail-container[_ngcontent-%COMP%]   .type-badge.type-api[_ngcontent-%COMP%]{background:#fff9c4;color:#f57f17}.role-detail-container[_ngcontent-%COMP%]   .type-badge.type-none[_ngcontent-%COMP%]{background:#eceff1;color:#546e7a}.role-detail-container[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;border-radius:4px;font-size:.8rem;font-weight:500}.role-detail-container[_ngcontent-%COMP%]   .status-badge.status-active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.role-detail-container[_ngcontent-%COMP%]   .status-badge.status-inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.role-detail-container[_ngcontent-%COMP%]   .status-badge.status-pending[_ngcontent-%COMP%]{background:#fff3e0;color:#f57c00}.role-detail-container[_ngcontent-%COMP%]   .asset-location[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem;color:#495057;word-break:break-all}.role-detail-container[_ngcontent-%COMP%]   .unknown-asset[_ngcontent-%COMP%]{color:#999;font-style:italic}.role-detail-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#6c757d;font-style:italic}.role-detail-container[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}"]})}return n})()}}]);