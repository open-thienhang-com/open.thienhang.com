"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[5598],{1631:(R,f,r)=>{r.d(f,{HW:()=>m,H_:()=>w});var _=r(2881),s=r(1360),x=r(9417),y=r(5779),u=r(1880),v=r(3491),E=r(6263);const b=["input"],P=({dt:i})=>`\n.p-toggleswitch {\n    display: inline-block;\n    width: ${i("toggleswitch.width")};\n    height: ${i("toggleswitch.height")};\n\n}\n\n.p-toggleswitch-input {\n    cursor: pointer;\n    appearance: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    margin: 0;\n    opacity: 0;\n    z-index: 1;\n    outline: 0 none;\n    border-radius: ${i("toggleswitch.border.radius")};\n}\n\n.p-toggleswitch-slider {\n    display: inline-block;\n    cursor: pointer;\n    width: 100%;\n    height: 100%;\n    border-width: ${i("toggleswitch.border.width")};\n    border-style: solid;\n    border-color: ${i("toggleswitch.border.color")};\n    background: ${i("toggleswitch.background")};\n    transition: background ${i("toggleswitch.transition.duration")}, color ${i("toggleswitch.transition.duration")}, border-color ${i("toggleswitch.transition.duration")}, outline-color ${i("toggleswitch.transition.duration")}, box-shadow ${i("toggleswitch.transition.duration")};\n    border-radius: ${i("toggleswitch.border.radius")};\n    outline-color: transparent;\n    box-shadow: ${i("toggleswitch.shadow")};\n}\n\n.p-toggleswitch-slider:before {\n    position: absolute;\n    content: "";\n    top: 50%;\n    background: ${i("toggleswitch.handle.background")};\n    width: ${i("toggleswitch.handle.size")};\n    height: ${i("toggleswitch.handle.size")};\n    left: ${i("toggleswitch.gap")};\n    margin-top: calc(-1 * calc(${i("toggleswitch.handle.size")} / 2));\n    border-radius: ${i("toggleswitch.handle.border.radius")};\n    transition: background ${i("toggleswitch.transition.duration")}, left ${i("toggleswitch.slide.duration")};\n}\n\n.p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-slider {\n    background: ${i("toggleswitch.checked.background")};\n    border-color: ${i("toggleswitch.checked.border.color")};\n}\n\n.p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-slider:before {\n    background: ${i("toggleswitch.handle.checked.background")};\n    left: calc(${i("toggleswitch.width")} - calc(${i("toggleswitch.handle.size")} + ${i("toggleswitch.gap")}));\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-slider {\n    background: ${i("toggleswitch.hover.background")};\n    border-color: ${i("toggleswitch.hover.border.color")};\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-slider:before {\n    background: ${i("toggleswitch.handle.hover.background")};\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-slider {\n    background: ${i("toggleswitch.checked.hover.background")};\n    border-color: ${i("toggleswitch.checked.hover.border.color")};\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-slider:before {\n    background: ${i("toggleswitch.handle.checked.hover.background")};\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:focus-visible) .p-toggleswitch-slider {\n    box-shadow: ${i("toggleswitch.focus.ring.shadow")};\n    outline: ${i("toggleswitch.focus.ring.width")} ${i("toggleswitch.focus.ring.style")} ${i("toggleswitch.focus.ring.color")};\n    outline-offset: ${i("toggleswitch.focus.ring.offset")};\n}\n\n.p-toggleswitch.p-invalid > .p-toggleswitch-slider {\n    border-color: ${i("toggleswitch.invalid.border.color")};\n}\n\n.p-toggleswitch.p-disabled {\n    opacity: 1;\n}\n\n.p-toggleswitch.p-disabled .p-toggleswitch-slider {\n    background: ${i("toggleswitch.disabled.background")};\n}\n\n.p-toggleswitch.p-disabled .p-toggleswitch-slider:before {\n    background: ${i("toggleswitch.handle.disabled.background")};\n}\n`,C={root:{position:"relative"}},M={root:({instance:i})=>({"p-toggleswitch p-component":!0,"p-toggleswitch-checked":i.checked(),"p-disabled":i.disabled,"p-invalid":i.invalid}),input:"p-toggleswitch-input",slider:"p-toggleswitch-slider"};let h=(()=>{class i extends E.j{name="toggleswitch";theme=P;classes=M;inlineStyles=C;static \u0275fac=(()=>{let c;return function(e){return(c||(c=s.xGo(i)))(e||i)}})();static \u0275prov=s.jDH({token:i,factory:i.\u0275fac})}return i})();const O={provide:x.kq,useExisting:(0,s.Rfq)(()=>m),multi:!0};let m=(()=>{class i extends v.${style;styleClass;tabindex;inputId;name;disabled;readonly;trueValue=!0;falseValue=!1;ariaLabel;ariaLabelledBy;autofocus;onChange=new s.bkB;input;modelValue=!1;focused=!1;onModelChange=()=>{};onModelTouched=()=>{};_componentStyle=(0,s.WQX)(h);onClick(c){!this.disabled&&!this.readonly&&(this.modelValue=this.checked()?this.falseValue:this.trueValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:c,checked:this.modelValue}),this.input.nativeElement.focus())}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}writeValue(c){this.modelValue=c,this.cd.markForCheck()}registerOnChange(c){this.onModelChange=c}registerOnTouched(c){this.onModelTouched=c}setDisabledState(c){this.disabled=c,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}static \u0275fac=(()=>{let c;return function(e){return(c||(c=s.xGo(i)))(e||i)}})();static \u0275cmp=s.VBU({type:i,selectors:[["p-inputSwitch"],["p-inputswitch"]],viewQuery:function(g,e){if(1&g&&s.GBs(b,5),2&g){let p;s.mGM(p=s.lsd())&&(e.input=p.first)}},inputs:{style:"style",styleClass:"styleClass",tabindex:[2,"tabindex","tabindex",s.Udg],inputId:"inputId",name:"name",disabled:[2,"disabled","disabled",s.L39],readonly:[2,"readonly","readonly",s.L39],trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",autofocus:[2,"autofocus","autofocus",s.L39]},outputs:{onChange:"onChange"},features:[s.Jv_([O,h]),s.Vt3],decls:5,vars:22,consts:[["input",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"focus","blur","ngClass","checked","disabled","pAutoFocus"],[3,"ngClass"]],template:function(g,e){if(1&g){const p=s.RV6();s.j41(0,"div",1),s.bIt("click",function(F){return s.eBV(p),s.Njj(e.onClick(F))}),s.j41(1,"div",2)(2,"input",3,0),s.bIt("focus",function(){return s.eBV(p),s.Njj(e.onFocus())})("blur",function(){return s.eBV(p),s.Njj(e.onBlur())}),s.k0s()(),s.nrm(4,"span",4),s.k0s()}2&g&&(s.HbH(e.styleClass),s.Y8G("ngClass",e.cx("root"))("ngStyle",e.sx("root"))("ngStyle",e.style),s.BMQ("data-pc-name","inputswitch")("data-pc-section","root"),s.R7$(),s.BMQ("data-pc-section","hiddenInputWrapper")("data-p-hidden-accessible",!0),s.R7$(),s.Y8G("ngClass",e.cx("input"))("checked",e.checked())("disabled",e.disabled)("pAutoFocus",e.autofocus),s.BMQ("id",e.inputId)("aria-checked",e.checked())("aria-labelledby",e.ariaLabelledBy)("aria-label",e.ariaLabel)("name",e.name)("tabindex",e.tabindex)("data-pc-section","hiddenInput"),s.R7$(2),s.Y8G("ngClass",e.cx("slider")),s.BMQ("data-pc-section","slider"))},dependencies:[_.MD,_.YU,_.B3,u.u,u.q,y.Gg],encapsulation:2,changeDetection:0})}return i})(),w=(()=>{class i{static \u0275fac=function(g){return new(g||i)};static \u0275mod=s.$C({type:i});static \u0275inj=s.G2t({imports:[m,y.Gg,y.Gg]})}return i})()},5598:(R,f,r)=>{r.r(f),r.d(f,{PolicyDetailComponent:()=>Q});var _=r(2881),s=r(9417),x=r(1413),y=r(6977),u=r(5779),v=r(1141),E=r(491),b=r(935),P=r(6150),C=r(7722),M=r(5716),h=r(4945),O=r(117),m=r(4827),w=r(7164),i=r(1579),D=r(8542),c=r(4799),g=r(1631),e=r(1360),p=r(1436),k=r(4299);const F=()=>({width:"100px"});function j(o,a){1&o&&(e.j41(0,"div",7)(1,"div",8),e.nrm(2,"p-skeleton",9)(3,"p-skeleton",10)(4,"p-skeleton",11),e.k0s(),e.j41(5,"div",12),e.nrm(6,"p-skeleton",13)(7,"p-skeleton",13)(8,"p-skeleton",13),e.k0s()())}function $(o,a){1&o&&e.nrm(0,"p-chip",68),2&o&&e.Y8G("label",a.$implicit)}function I(o,a){if(1&o&&(e.j41(0,"div")(1,"label",53),e.EFF(2,"Tags"),e.k0s(),e.j41(3,"div",66),e.DNE(4,$,1,1,"p-chip",67),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(4),e.Y8G("ngForOf",t.policy.tags)}}function T(o,a){if(1&o&&(e.j41(0,"div")(1,"label",53),e.EFF(2,"Conditions"),e.k0s(),e.j41(3,"div",69)(4,"pre",65),e.EFF(5),e.nI1(6,"json"),e.k0s()()()),2&o){const t=e.XpG(2);e.R7$(5),e.JRh(e.bMT(6,1,t.policy.conditions))}}function S(o,a){1&o&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Role Name"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Type"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Permissions"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Status"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Contact"),e.k0s()())}function B(o,a){if(1&o&&(e.j41(0,"div")(1,"div",65)(2,"div"),e.EFF(3),e.k0s(),e.j41(4,"div",77),e.EFF(5),e.k0s()()()),2&o){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.contact[0].name),e.R7$(2),e.JRh(t.contact[0].email)}}function G(o,a){if(1&o&&(e.j41(0,"tr")(1,"td")(2,"div",73)(3,"span",74),e.EFF(4),e.k0s(),e.j41(5,"span",75),e.EFF(6),e.k0s()()(),e.j41(7,"td"),e.nrm(8,"p-tag",19),e.k0s(),e.j41(9,"td"),e.nrm(10,"p-badge",76),e.k0s(),e.j41(11,"td"),e.nrm(12,"p-tag",19),e.k0s(),e.j41(13,"td"),e.DNE(14,B,6,2,"div",56),e.k0s()()),2&o){const t=a.$implicit;e.R7$(4),e.JRh(t.name),e.R7$(2),e.JRh(t.kid),e.R7$(2),e.Y8G("value",t.type)("severity","system"===t.type?"danger":"info"),e.R7$(2),e.Y8G("value",t.permissions.length),e.R7$(2),e.Y8G("value",t.is_active?"Active":"Inactive")("severity",t.is_active?"success":"secondary"),e.R7$(2),e.Y8G("ngIf",t.contact&&t.contact.length>0)}}function A(o,a){if(1&o&&(e.j41(0,"div")(1,"p-table",70),e.DNE(2,S,11,0,"ng-template",71)(3,G,15,8,"ng-template",72),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("value",t.policy.role_details)}}function L(o,a){1&o&&(e.j41(0,"div",78),e.nrm(1,"i",79),e.j41(2,"h3",80),e.EFF(3,"No Roles Assigned"),e.k0s(),e.j41(4,"p",77),e.EFF(5,"This policy has no roles assigned to it."),e.k0s()())}function U(o,a){if(1&o&&(e.j41(0,"div",83)(1,"div",31),e.nrm(2,"i",84),e.j41(3,"span",85),e.EFF(4),e.k0s()()()),2&o){const t=a.$implicit;e.R7$(4),e.JRh(t)}}function N(o,a){if(1&o&&(e.j41(0,"div")(1,"div",81),e.DNE(2,U,5,1,"div",82),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",t.policy.permissions)}}function V(o,a){1&o&&(e.j41(0,"div",78),e.nrm(1,"i",86),e.j41(2,"h3",80),e.EFF(3,"No Permissions Defined"),e.k0s(),e.j41(4,"p",77),e.EFF(5,"This policy has no specific permissions defined."),e.k0s()())}function W(o,a){if(1&o&&(e.j41(0,"div",83)(1,"div",31),e.nrm(2,"i",88),e.j41(3,"span",85),e.EFF(4),e.k0s()()()),2&o){const t=a.$implicit;e.R7$(4),e.JRh(t)}}function Y(o,a){if(1&o&&(e.j41(0,"div")(1,"div",87),e.DNE(2,W,5,1,"div",82),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",t.policy.resources)}}function K(o,a){1&o&&(e.j41(0,"div",78),e.nrm(1,"i",89),e.j41(2,"h3",80),e.EFF(3,"No Resources Specified"),e.k0s(),e.j41(4,"p",77),e.EFF(5,"This policy applies to all resources."),e.k0s()())}function J(o,a){if(1&o&&(e.j41(0,"div",90),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI(" by ",t.policy.created_by," ")}}function X(o,a){if(1&o&&(e.j41(0,"div",90),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI(" by ",t.policy.updated_by," ")}}function z(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div",14)(3,"div",15)(4,"p-button",16),e.bIt("onClick",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.goBack())}),e.k0s(),e.j41(5,"div")(6,"div",17)(7,"h1",18),e.EFF(8),e.k0s(),e.nrm(9,"p-tag",19),e.k0s(),e.j41(10,"p",20),e.EFF(11),e.k0s(),e.j41(12,"div",21),e.nrm(13,"i",22),e.j41(14,"span"),e.EFF(15),e.k0s(),e.j41(16,"span",23),e.EFF(17,"\u2022"),e.k0s(),e.nrm(18,"i",24),e.j41(19,"span"),e.EFF(20),e.k0s()()()(),e.j41(21,"div",25)(22,"p-inputSwitch",26),e.mxI("ngModelChange",function(l){e.eBV(t);const n=e.XpG();return e.DH7(n.policy.enabled,l)||(n.policy.enabled=l),e.Njj(l)}),e.bIt("onChange",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.togglePolicyStatus())}),e.k0s(),e.j41(23,"p-button",27),e.bIt("onClick",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.editPolicy())}),e.k0s(),e.j41(24,"p-button",28),e.bIt("onClick",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.deletePolicy())}),e.k0s()()(),e.j41(25,"div",29)(26,"div",30)(27,"div",31)(28,"span",32),e.EFF(29,"Policy ID:"),e.k0s(),e.j41(30,"code",33),e.EFF(31),e.k0s()(),e.j41(32,"p-button",34),e.bIt("onClick",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.copyToClipboard(l.policy.kid))}),e.k0s()()(),e.j41(33,"div",35)(34,"div",36)(35,"div",37),e.EFF(36),e.k0s(),e.j41(37,"div",38),e.EFF(38,"Roles"),e.k0s()(),e.j41(39,"div",39)(40,"div",40),e.EFF(41),e.k0s(),e.j41(42,"div",41),e.EFF(43,"Permissions"),e.k0s()(),e.j41(44,"div",42)(45,"div",43),e.EFF(46),e.k0s(),e.j41(47,"div",44),e.EFF(48,"Resources"),e.k0s()(),e.j41(49,"div",45)(50,"div",46),e.EFF(51),e.k0s(),e.j41(52,"div",47),e.EFF(53,"Affected Assets"),e.k0s()()()(),e.j41(54,"div",48)(55,"p-tabView")(56,"p-tabPanel",49)(57,"div",50)(58,"div",51)(59,"div",52)(60,"div")(61,"label",53),e.EFF(62,"Policy Type"),e.k0s(),e.nrm(63,"p-tag",19),e.k0s(),e.j41(64,"div")(65,"label",53),e.EFF(66,"Effect"),e.k0s(),e.nrm(67,"p-tag",19),e.k0s(),e.j41(68,"div")(69,"label",53),e.EFF(70,"Priority"),e.k0s(),e.j41(71,"div",31),e.nrm(72,"p-progressBar",19),e.j41(73,"span",54),e.EFF(74),e.k0s()()()(),e.j41(75,"div",52)(76,"div")(77,"label",53),e.EFF(78,"Domain"),e.k0s(),e.j41(79,"span",55),e.EFF(80),e.k0s()(),e.j41(81,"div")(82,"label",53),e.EFF(83,"Data Product"),e.k0s(),e.j41(84,"span",55),e.EFF(85),e.k0s()(),e.j41(86,"div")(87,"label",53),e.EFF(88,"Status"),e.k0s(),e.nrm(89,"p-tag",19),e.k0s()()(),e.DNE(90,I,5,1,"div",56)(91,T,7,3,"div",56),e.k0s()(),e.j41(92,"p-tabPanel",57)(93,"div",58),e.DNE(94,A,4,1,"div",59)(95,L,6,0,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(97,"p-tabPanel",60)(98,"div",58),e.DNE(99,N,3,1,"div",59)(100,V,6,0,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(102,"p-tabPanel",61)(103,"div",58),e.DNE(104,Y,3,1,"div",59)(105,K,6,0,"ng-template",null,2,e.C5r),e.k0s()(),e.j41(107,"p-tabPanel",62)(108,"div",50)(109,"div",51)(110,"div",52)(111,"div")(112,"label",53),e.EFF(113,"Created"),e.k0s(),e.j41(114,"div",54)(115,"div"),e.EFF(116),e.k0s(),e.DNE(117,J,2,1,"div",63),e.k0s()(),e.j41(118,"div")(119,"label",53),e.EFF(120,"Last Modified"),e.k0s(),e.j41(121,"div",54)(122,"div"),e.EFF(123),e.k0s(),e.DNE(124,X,2,1,"div",63),e.k0s()()(),e.j41(125,"div",52)(126,"div")(127,"label",53),e.EFF(128,"Policy Rules"),e.k0s(),e.j41(129,"div",37),e.EFF(130),e.k0s()(),e.j41(131,"div")(132,"label",53),e.EFF(133,"Total Subjects"),e.k0s(),e.j41(134,"div",40),e.EFF(135),e.k0s()()()(),e.j41(136,"div")(137,"label",53),e.EFF(138,"Raw Policy Data"),e.k0s(),e.j41(139,"div",64)(140,"pre",65),e.EFF(141),e.nI1(142,"json"),e.k0s()()()()()()()()}if(2&o){const t=e.sdS(96),d=e.sdS(101),l=e.sdS(106),n=e.XpG();e.R7$(4),e.Y8G("outlined",!0),e.R7$(4),e.JRh(n.policy.name),e.R7$(),e.Y8G("value",n.policy.enabled?"Active":"Inactive")("severity",n.getPolicyStatusSeverity(n.policy.enabled)),e.R7$(2),e.JRh(n.policy.description),e.R7$(4),e.SpI("Created ",n.formatDate(n.policy.created_at),""),e.R7$(5),e.SpI("Updated ",n.formatDate(n.policy.updated_at),""),e.R7$(2),e.R50("ngModel",n.policy.enabled),e.R7$(),e.Y8G("outlined",!0),e.R7$(),e.Y8G("outlined",!0),e.R7$(7),e.JRh(n.policy.kid),e.R7$(),e.Y8G("outlined",!0),e.R7$(4),e.JRh(n.policy.total_roles),e.R7$(5),e.JRh(n.policy.total_permissions),e.R7$(5),e.JRh(n.policy.total_resources),e.R7$(5),e.JRh(n.policy.affected_assets_total),e.R7$(12),e.Y8G("value",n.policy.type)("severity",n.getPolicyTypeSeverity(n.policy.type)),e.R7$(4),e.Y8G("value",n.policy.effect)("severity",n.getEffectSeverity(n.policy.effect)),e.R7$(5),e.Aen(e.lJ4(46,F)),e.Y8G("value",n.policy.priority)("severity",n.getPriorityColor(n.policy.priority)),e.R7$(2),e.SpI("",n.policy.priority,"/100"),e.R7$(6),e.JRh(n.policy.domain_id||"Global"),e.R7$(5),e.JRh(n.policy.data_product_id||"All Products"),e.R7$(4),e.Y8G("value",n.policy.enabled?"Enabled":"Disabled")("severity",n.getPolicyStatusSeverity(n.policy.enabled)),e.R7$(),e.Y8G("ngIf",n.policy.tags&&n.policy.tags.length>0),e.R7$(),e.Y8G("ngIf",n.policy.conditions),e.R7$(3),e.Y8G("ngIf",n.policy.role_details&&n.policy.role_details.length>0)("ngIfElse",t),e.R7$(5),e.Y8G("ngIf",n.policy.permissions&&n.policy.permissions.length>0)("ngIfElse",d),e.R7$(5),e.Y8G("ngIf",n.policy.resources&&n.policy.resources.length>0)("ngIfElse",l),e.R7$(12),e.JRh(n.formatDate(n.policy.created_at)),e.R7$(),e.Y8G("ngIf",n.policy.created_by),e.R7$(6),e.JRh(n.formatDate(n.policy.updated_at)),e.R7$(),e.Y8G("ngIf",n.policy.updated_by),e.R7$(6),e.JRh(n.policy.policy_rules_total),e.R7$(5),e.JRh(n.policy.total_subjects),e.R7$(6),e.JRh(e.bMT(142,44,n.policy))}}function H(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",78),e.nrm(1,"i",91),e.j41(2,"h3",80),e.EFF(3,"Policy Not Found"),e.k0s(),e.j41(4,"p",92),e.EFF(5,"The policy you're looking for doesn't exist or has been deleted."),e.k0s(),e.j41(6,"p-button",93),e.bIt("onClick",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.goBack())}),e.k0s()()}}let Q=(()=>{class o{route;router;governanceServices;messageService;confirmationService;policy=null;loading=!1;policyId=null;destroy$=new x.B;constructor(t,d,l,n,Z){this.route=t,this.router=d,this.governanceServices=l,this.messageService=n,this.confirmationService=Z}ngOnInit(){this.route.params.pipe((0,y.Q)(this.destroy$)).subscribe(t=>{this.policyId=t.id,this.policyId&&this.loadPolicy()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadPolicy(){this.policyId&&(console.log("Loading policy with ID:",this.policyId),console.log("API URL will be:",`https://api.thienhang.com/governance/policies/${this.policyId}`),this.loading=!0,this.governanceServices.getPolicy(this.policyId).subscribe({next:t=>{console.log("Policy API response:",t),t.success&&t.data?(this.policy=t.data,console.log("Policy loaded successfully:",this.policy)):(console.warn("Policy not found or invalid response:",t),this.messageService.add({severity:"error",summary:"Policy Not Found",detail:"The policy you're looking for doesn't exist or has been deleted."})),this.loading=!1},error:t=>{console.error("Error loading policy:",t),console.error("Error details:",{status:t.status,statusText:t.statusText,url:t.url,message:t.message});let d="Failed to load policy details. Please try again.";404===t.status?d="The policy you're looking for doesn't exist or has been deleted.":403===t.status?d="You don't have permission to view this policy.":0===t.status&&(d="Unable to connect to the server. Please check your internet connection."),this.messageService.add({severity:"error",summary:"Policy Not Found",detail:d}),this.loading=!1}}))}goBack(){this.router.navigate(["/governance/policies"])}editPolicy(){this.policy&&this.router.navigate(["/governance/policies/edit",this.policy.kid])}togglePolicyStatus(){if(!this.policy)return;const t=this.policy.enabled?"disable":"enable";(this.policy.enabled?this.governanceServices.disablePolicy(this.policy.kid):this.governanceServices.enablePolicy(this.policy.kid)).subscribe({next:l=>{l.success&&(this.policy.enabled=!this.policy.enabled,this.messageService.add({severity:"success",summary:"Success",detail:`Policy ${t}d successfully`}))},error:l=>{console.error(`Error ${t}ing policy:`,l),this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${t} policy`})}})}deletePolicy(){this.policy&&this.confirmationService.confirm({message:`Are you sure you want to delete the policy "${this.policy.name}"?`,header:"Delete Policy",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",accept:()=>{this.governanceServices.deletePolicy(this.policy.kid).subscribe({next:t=>{t.success&&(this.messageService.add({severity:"success",summary:"Success",detail:"Policy deleted successfully"}),this.router.navigate(["/governance/policies"]))},error:t=>{console.error("Error deleting policy:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to delete policy"})}})}})}getPolicyTypeSeverity(t){switch(t){case"access_control":return"info";case"data_protection":return"warning";case"compliance":return"danger";default:return"secondary"}}getPolicyStatusSeverity(t){return t?"success":"secondary"}getEffectSeverity(t){switch(t){case"allow":return"success";case"deny":return"danger";default:return"secondary"}}getPriorityColor(t){return t>=80?"danger":t>=50?"warning":"info"}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}copyToClipboard(t){navigator.clipboard.writeText(t).then(()=>{this.messageService.add({severity:"success",summary:"Copied",detail:"Text copied to clipboard"})})}static \u0275fac=function(d){return new(d||o)(e.rXU(p.nX),e.rXU(p.Ix),e.rXU(k.N),e.rXU(u.bg),e.rXU(u.td))};static \u0275cmp=e.VBU({type:o,selectors:[["app-policy-detail"]],features:[e.Jv_([u.bg,u.td])],decls:7,vars:3,consts:[["noRoles",""],["noPermissions",""],["noResources",""],[1,"bg-gray-50","min-h-screen"],[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],["class","space-y-6",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[1,"space-y-6"],[1,"bg-white","rounded-lg","shadow-sm","p-6"],["height","2rem","width","300px",1,"mb-4"],["height","1rem","width","500px",1,"mb-2"],["height","1rem","width","400px"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["height","200px"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-4"],["icon","pi pi-arrow-left","severity","secondary","pTooltip","Back to Policies",3,"onClick","outlined"],[1,"flex","items-center","gap-3","mb-2"],[1,"text-3xl","font-bold","text-gray-900"],[3,"value","severity"],[1,"text-gray-600","mb-2"],[1,"flex","items-center","gap-2","text-sm","text-gray-500"],[1,"pi","pi-calendar"],[1,"mx-2"],[1,"pi","pi-refresh"],[1,"flex","items-center","gap-3"],["pTooltip","Toggle Policy Status",3,"ngModelChange","onChange","ngModel"],["label","Edit","icon","pi pi-pencil","severity","secondary",3,"onClick","outlined"],["label","Delete","icon","pi pi-trash","severity","danger",3,"onClick","outlined"],[1,"bg-gray-50","rounded-lg","p-4","mb-6"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-medium","text-gray-700"],[1,"bg-gray-200","px-2","py-1","rounded","text-sm"],["icon","pi pi-copy","severity","secondary","size","small","pTooltip","Copy Policy ID",3,"onClick","outlined"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"bg-blue-50","rounded-lg","p-4","text-center"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-sm","text-blue-700"],[1,"bg-green-50","rounded-lg","p-4","text-center"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-sm","text-green-700"],[1,"bg-purple-50","rounded-lg","p-4","text-center"],[1,"text-2xl","font-bold","text-purple-600"],[1,"text-sm","text-purple-700"],[1,"bg-orange-50","rounded-lg","p-4","text-center"],[1,"text-2xl","font-bold","text-orange-600"],[1,"text-sm","text-orange-700"],[1,"bg-white","rounded-lg","shadow-sm"],["header","Overview","leftIcon","pi pi-info-circle"],[1,"p-6","space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-sm","text-gray-600"],[1,"text-gray-600"],[4,"ngIf"],["header","Roles","leftIcon","pi pi-users"],[1,"p-6"],[4,"ngIf","ngIfElse"],["header","Permissions","leftIcon","pi pi-key"],["header","Resources","leftIcon","pi pi-database"],["header","Audit","leftIcon","pi pi-clock"],["class","text-xs text-gray-500",4,"ngIf"],[1,"bg-gray-50","rounded-lg","p-4","max-h-96","overflow-y-auto"],[1,"text-sm"],[1,"flex","flex-wrap","gap-2"],["icon","pi pi-tag",3,"label",4,"ngFor","ngForOf"],["icon","pi pi-tag",3,"label"],[1,"bg-gray-50","rounded-lg","p-4"],["styleClass","p-datatable-sm",3,"value"],["pTemplate","header"],["pTemplate","body"],[1,"flex","flex-col"],[1,"font-medium"],[1,"text-sm","text-gray-500"],["severity","info",3,"value"],[1,"text-gray-500"],[1,"text-center","py-12"],[1,"pi","pi-users","text-gray-400","text-4xl","mb-4"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-gray-50 rounded-lg p-4 border border-gray-200",4,"ngFor","ngForOf"],[1,"bg-gray-50","rounded-lg","p-4","border","border-gray-200"],[1,"pi","pi-key","text-blue-500"],[1,"font-medium","text-gray-900"],[1,"pi","pi-key","text-gray-400","text-4xl","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"pi","pi-database","text-green-500"],[1,"pi","pi-database","text-gray-400","text-4xl","mb-4"],[1,"text-xs","text-gray-500"],[1,"pi","pi-exclamation-triangle","text-red-500","text-4xl","mb-4"],[1,"text-gray-500","mb-4"],["label","Back to Policies","icon","pi pi-arrow-left","severity","secondary",3,"onClick"]],template:function(d,l){1&d&&(e.nrm(0,"p-toast")(1,"p-confirmDialog"),e.j41(2,"div",3)(3,"div",4),e.DNE(4,j,9,0,"div",5)(5,z,143,47,"div",5)(6,H,7,0,"div",6),e.k0s()()),2&d&&(e.R7$(4),e.Y8G("ngIf",l.loading),e.R7$(),e.Y8G("ngIf",!l.loading&&l.policy),e.R7$(),e.Y8G("ngIf",!l.loading&&!l.policy))},dependencies:[_.MD,_.Sq,_.bT,_.TG,s.YN,s.BC,s.vS,v.tm,v.$n,u.Ei,E.Dw,b.$C,b.vw,P.EJ,P.Ex,C.MB,C.y8,M.k2,M.EA,h.fd,h.JQ,h.Kp,O.bG,O.XI,m.P8,m.vu,w.mN,i.dD,i.z2,D.Ss,D.m_,c.FP,c.TM,g.H_,g.HW],styles:['[_nghost-%COMP%]   .policy-detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}[_nghost-%COMP%]   .policy-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}[_nghost-%COMP%]   .policy-header[_ngcontent-%COMP%]   .policy-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}@media (max-width: 768px){[_nghost-%COMP%]   .policy-header[_ngcontent-%COMP%]   .policy-actions[_ngcontent-%COMP%]{flex-direction:column;width:100%}[_nghost-%COMP%]   .policy-header[_ngcontent-%COMP%]   .policy-actions[_ngcontent-%COMP%]     p-button{width:100%}}[_nghost-%COMP%]   .policy-metrics[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-top:1.5rem}[_nghost-%COMP%]   .policy-metrics[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]{background:#ffffff1a;border-radius:8px;padding:1rem;text-align:center;backdrop-filter:blur(10px)}[_nghost-%COMP%]   .policy-metrics[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem}[_nghost-%COMP%]   .policy-metrics[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9}[_nghost-%COMP%]   .policy-id-section[_ngcontent-%COMP%]{background:#f8fafc;border-radius:8px;padding:1rem;margin:1rem 0}[_nghost-%COMP%]   .policy-id-section[_ngcontent-%COMP%]   .policy-id[_ngcontent-%COMP%]{font-family:Courier New,monospace;background:#e2e8f0;padding:.25rem .5rem;border-radius:4px;font-size:.875rem}[_nghost-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem}[_nghost-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-weight:600;color:#374151;margin-bottom:.5rem;display:block}[_nghost-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{color:#6b7280}[_nghost-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.code[_ngcontent-%COMP%]{font-family:Courier New,monospace;background:#f3f4f6;padding:.25rem .5rem;border-radius:4px;font-size:.875rem}[_nghost-%COMP%]   .priority-indicator[_ngcontent-%COMP%]   .priority-bar[_ngcontent-%COMP%]{height:8px;border-radius:4px;overflow:hidden;margin-bottom:.5rem}[_nghost-%COMP%]   .priority-indicator[_ngcontent-%COMP%]   .priority-bar[_ngcontent-%COMP%]   .priority-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease}[_nghost-%COMP%]   .priority-indicator[_ngcontent-%COMP%]   .priority-bar[_ngcontent-%COMP%]   .priority-fill.low[_ngcontent-%COMP%]{background:#10b981}[_nghost-%COMP%]   .priority-indicator[_ngcontent-%COMP%]   .priority-bar[_ngcontent-%COMP%]   .priority-fill.medium[_ngcontent-%COMP%]{background:#f59e0b}[_nghost-%COMP%]   .priority-indicator[_ngcontent-%COMP%]   .priority-bar[_ngcontent-%COMP%]   .priority-fill.high[_ngcontent-%COMP%]{background:#ef4444}[_nghost-%COMP%]   .tag-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}[_nghost-%COMP%]   .conditions-json[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem}[_nghost-%COMP%]   .conditions-json[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0;font-size:.875rem;line-height:1.4;color:#374151;white-space:pre-wrap;word-wrap:break-word}[_nghost-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:#6b7280}[_nghost-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;opacity:.5}[_nghost-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:.5rem;color:#374151}[_nghost-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-description[_ngcontent-%COMP%]{font-size:.875rem}[_nghost-%COMP%]   .resource-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem}[_nghost-%COMP%]   .resource-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem}[_nghost-%COMP%]   .resource-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]   .resource-name[_ngcontent-%COMP%]{font-weight:600;color:#374151;margin-bottom:.5rem}[_nghost-%COMP%]   .resource-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]   .resource-type[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280}[_nghost-%COMP%]   .permission-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem}[_nghost-%COMP%]   .permission-grid[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]{background:#f0fdf4;border:1px solid #bbf7d0;border-radius:8px;padding:1rem}[_nghost-%COMP%]   .permission-grid[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-name[_ngcontent-%COMP%]{font-weight:600;color:#166534;margin-bottom:.5rem}[_nghost-%COMP%]   .permission-grid[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-description[_ngcontent-%COMP%]{font-size:.875rem;color:#15803d}[_nghost-%COMP%]   .audit-section[_ngcontent-%COMP%]   .audit-timeline[_ngcontent-%COMP%]{border-left:2px solid #e2e8f0;padding-left:1rem;margin-left:1rem}[_nghost-%COMP%]   .audit-section[_ngcontent-%COMP%]   .audit-timeline[_ngcontent-%COMP%]   .audit-item[_ngcontent-%COMP%]{position:relative;padding-bottom:1rem}[_nghost-%COMP%]   .audit-section[_ngcontent-%COMP%]   .audit-timeline[_ngcontent-%COMP%]   .audit-item[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-1.5rem;top:.5rem;width:12px;height:12px;background:#3b82f6;border-radius:50%;border:3px solid white;box-shadow:0 0 0 2px #e2e8f0}[_nghost-%COMP%]   .audit-section[_ngcontent-%COMP%]   .audit-timeline[_ngcontent-%COMP%]   .audit-item[_ngcontent-%COMP%]   .audit-date[_ngcontent-%COMP%]{font-weight:600;color:#374151;margin-bottom:.25rem}[_nghost-%COMP%]   .audit-section[_ngcontent-%COMP%]   .audit-timeline[_ngcontent-%COMP%]   .audit-item[_ngcontent-%COMP%]   .audit-user[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280}[_nghost-%COMP%]     .p-tabview .p-tabview-nav{background:transparent;border:none}[_nghost-%COMP%]     .p-tabview .p-tabview-nav .p-tabview-nav-link{background:transparent;border:1px solid #e2e8f0;border-bottom:none;margin-right:.25rem}[_nghost-%COMP%]     .p-tabview .p-tabview-nav .p-tabview-nav-link:not(.p-highlight):hover{background:#f8fafc}[_nghost-%COMP%]     .p-tabview .p-tabview-nav .p-highlight .p-tabview-nav-link{background:#fff;border-color:#e2e8f0}[_nghost-%COMP%]     .p-tabview .p-tabview-panels{background:#fff;border:1px solid #e2e8f0;border-top:none}[_nghost-%COMP%]     .p-tabview .p-tabview-panels .p-tabview-panel{padding:0}[_nghost-%COMP%]     .p-progressbar{height:8px;border-radius:4px;overflow:hidden}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{border-radius:0}[_nghost-%COMP%]     .p-skeleton{border-radius:8px}@media (max-width: 768px){[_nghost-%COMP%]   .policy-metrics[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}[_nghost-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}[_nghost-%COMP%]   .resource-grid[_ngcontent-%COMP%], [_nghost-%COMP%]   .permission-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})}return o})()}}]);