import{r as c,m as k,y as E,h as F,j as e,l,z as p,A as j,B as R,e as d,L as A}from"./index-CZxwAXbl.js";import{C as q,a as g}from"./index.esm-BOhZrsQ0.js";import{C as f,a as m}from"./CRow-BFihry9H.js";import{C as B}from"./CCardGroup-D2LMYW4O.js";import{C as D}from"./CForm-Di4mrq4y.js";import{C,a as y}from"./CInputGroupText-DZeafPMx.js";import{c as G,a as z}from"./cil-user-Dlmw-Gem.js";import{C as b}from"./CFormInput-CXlsoodv.js";import"./CFormControlWrapper-DAJd-i6P.js";import"./CFormControlValidation-DSYTCUKV.js";import"./CFormLabel-9KOKoO1t.js";const X=()=>{const[t,N]=c.useState({email:"duy@thienhang.com",password:"stringst"}),[a,u]=c.useState(!1),{login:w,isAuthenticated:n,error:h,isLoading:o}=k(),v=E(),L=F();c.useEffect(()=>{var r,s;if(n&&!o){const i=((s=(r=L.state)==null?void 0:r.from)==null?void 0:s.pathname)||"/dashboard";console.log("üîÑ Redirecting authenticated user to:",i),v(i,{replace:!0})}},[n,o]);const x=r=>{const{name:s,value:i}=r.target;N(I=>({...I,[s]:i}))},S=async r=>{if(r.preventDefault(),!a){u(!0);try{(await w(t.email,t.password)).success&&console.log("‚úÖ Login successful, redirect will be handled by useEffect")}catch(s){console.error("‚ùå Login error:",s)}finally{u(!1)}}};return o?e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex justify-content-center align-items-center",children:[e.jsx(l,{color:"primary",variant:"grow"}),e.jsx("span",{className:"ms-2",children:"Loading..."})]}):n?e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex justify-content-center align-items-center",children:[e.jsx(l,{color:"primary",variant:"grow"}),e.jsx("span",{className:"ms-2",children:"Redirecting..."})]}):e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(q,{children:e.jsx(f,{className:"justify-content-center",children:e.jsx(m,{md:8,children:e.jsxs(B,{children:[e.jsx(p,{className:"p-4",children:e.jsx(j,{children:e.jsxs(D,{onSubmit:S,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),h&&e.jsx(R,{color:"danger",className:"mb-3",children:h}),e.jsxs(C,{className:"mb-3",children:[e.jsx(y,{children:e.jsx(g,{icon:G})}),e.jsx(b,{placeholder:"Email",name:"email",type:"email",value:t.email,onChange:x,autoComplete:"email",required:!0,disabled:a})]}),e.jsxs(C,{className:"mb-4",children:[e.jsx(y,{children:e.jsx(g,{icon:z})}),e.jsx(b,{type:"password",placeholder:"Password",name:"password",value:t.password,onChange:x,autoComplete:"current-password",required:!0,disabled:a})]}),e.jsxs(f,{children:[e.jsx(m,{xs:6,children:e.jsx(d,{color:"primary",className:"px-4",type:"submit",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(l,{size:"sm",className:"me-2"}),"Signing in..."]}):"Login"})}),e.jsx(m,{xs:6,className:"text-end",children:e.jsx(d,{color:"link",className:"px-0",children:"Forgot password?"})})]})]})})}),e.jsx(p,{className:"text-white bg-primary py-5",style:{width:"44%"},children:e.jsx(j,{className:"text-center",children:e.jsxs("div",{children:[e.jsx("h2",{children:"Sign up"}),e.jsx("p",{children:"Create a new account to access all features and functionalities of our platform. It's quick and easy!"}),e.jsx(A,{to:"/register",children:e.jsx(d,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Register Now!"})})]})})})]})})})})})};export{X as default};
