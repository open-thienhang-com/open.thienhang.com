"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8512,8934],{2215:(D,_,a)=>{a.d(_,{G:()=>F});var E=a(8989),t=a(8810),b=a(6354),p=a(9437),C=a(1360),u=a(4412),y=a(1985);let j=(()=>{class m{configs={local:{environment:"local",host:"http://localhost:8081",name:"Local Development"},production:{environment:"production",host:"https://test-api.routing-deviation.ghn.tech",name:"Production API"}};currentConfigSubject=new u.t(this.configs.local);currentConfig$=this.currentConfigSubject.asObservable();constructor(){this.loadSavedConfig()}getCurrentConfig(){return this.currentConfigSubject.value}getHost(){return this.getCurrentConfig().host}getEnvironment(){return this.getCurrentConfig().environment}switchEnvironment(o){const r=this.configs[o];r&&(this.currentConfigSubject.next(r),this.saveConfig(r),console.log(`[API Config] Switched to ${r.name} (${r.host})`))}getAvailableConfigs(){return Object.values(this.configs)}isLocal(){return"local"===this.getEnvironment()}isProduction(){return"production"===this.getEnvironment()}testConnection(){const o=this.getHost(),r=`${o}/_`;return new y.c(d=>{fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).then(c=>{d.next(c.ok?{success:!0,host:o}:{success:!1,host:o,status:c.status}),d.complete()}).catch(c=>{d.next({success:!1,host:o,error:c.message}),d.complete()})})}loadSavedConfig(){try{if(typeof window<"u"&&window.localStorage){const o=localStorage.getItem("api-config");if(o){const r=JSON.parse(o);r.environment&&this.configs[r.environment]&&this.currentConfigSubject.next(this.configs[r.environment])}}}catch(o){console.warn("[API Config] Failed to load saved config:",o)}}saveConfig(o){try{typeof window<"u"&&window.localStorage&&localStorage.setItem("api-config",JSON.stringify({environment:o.environment}))}catch(r){console.warn("[API Config] Failed to save config:",r)}}static \u0275fac=function(r){return new(r||m)};static \u0275prov=C.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})(),F=(()=>{class m{http;apiConfig;defaultTimeout=3e4;authToken="ZCXb4Thq56HgXlQC4IKS4EcghaYt6xxmIoHdazBJgVBRAwYqbLhx9rE3QTuzIqpo";constructor(o,r){this.http=o,this.apiConfig=r}getAuthHeaders(){const o={"Content-Type":"application/json"},r=this.authToken;return r&&(o.Authorization=`Bearer ${r}`),new E.Lr(o)}getHost(){return this.apiConfig.getHost()}getUrl(o){return this.getHost()+(o.startsWith("/")?o:"/"+o)}handleError(o){let r;return r=typeof ErrorEvent<"u"&&o.error instanceof ErrorEvent?{status:0,message:"Network error",error:"NETWORK_ERROR"}:{status:o.status,message:o.error?.message||o.message||"Server error",error:o.error?.error||"SERVER_ERROR",data:o.error},console.error("[API Error]",r),(0,t.$)(()=>r)}transformResponse(o){return{ok:!0,status:200,data:o,message:"Success"}}get(o,r){const d=this.getUrl(o);let c=new E.Nl;return r&&Object.keys(r).forEach(f=>{null!=r[f]&&(c=c.set(f,r[f].toString()))}),console.log(`[API] GET ${d}`,r),this.http.get(d,{params:c,headers:this.getAuthHeaders()}).pipe((0,b.T)(f=>this.transformResponse(f)),(0,p.W)(f=>this.handleError(f)))}post(o,r){const d=this.getUrl(o);return console.log(`[API] POST ${d}`,r),this.http.post(d,r,{headers:this.getAuthHeaders()}).pipe((0,b.T)(c=>this.transformResponse(c)),(0,p.W)(c=>this.handleError(c)))}put(o,r){const d=this.getUrl(o);return console.log(`[API] PUT ${d}`,r),this.http.put(d,r,{headers:this.getAuthHeaders()}).pipe((0,b.T)(c=>this.transformResponse(c)),(0,p.W)(c=>this.handleError(c)))}delete(o,r){const d=this.getUrl(o);return console.log(`[API] DELETE ${d}`,r),this.http.delete(d,{headers:this.getAuthHeaders(),body:r}).pipe((0,b.T)(c=>this.transformResponse(c)),(0,p.W)(c=>this.handleError(c)))}patch(o,r){const d=this.getUrl(o);return console.log(`[API] PATCH ${d}`,r),this.http.patch(d,r,{headers:this.getAuthHeaders()}).pipe((0,b.T)(c=>this.transformResponse(c)),(0,p.W)(c=>this.handleError(c)))}upload(o,r){const d=this.getUrl(o);console.log(`[API] UPLOAD ${d}`);const c={},f=this.authToken;return f&&(c.Authorization=`Bearer ${f}`),this.http.post(d,r,{headers:new E.Lr(c)}).pipe((0,b.T)(k=>this.transformResponse(k)),(0,p.W)(k=>this.handleError(k)))}static \u0275fac=function(r){return new(r||m)(C.KVO(E.Qq),C.KVO(j))};static \u0275prov=C.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},8512:(D,_,a)=>{a.d(_,{q:()=>b});var E=a(1360),t=a(2215);let b=(()=>{class p{api;constructor(u){this.api=u}getDatasets(u={}){return this.api.post("/routing-deviation/internal/dataset/list",u)}getDataset(u){return this.api.post("/routing-deviation/internal/dataset/get",{dataset_id:u})}getDatasetTypes(){return this.api.post("/routing-deviation/internal/dataset/get-type")}getDatasetQuery(){return this.api.post("/routing-deviation/internal/dataset/get-query")}getDatasetMetadata(){return this.api.post("/routing-deviation/internal/dataset/get-metadata")}createDataset(u){return this.api.post("/routing-deviation/internal/dataset",u)}updateDataset(u,y){return this.api.post(`/routing-deviation/internal/dataset/${u}`,y)}getWarehouses(u){return this.api.post("/routing-deviation/internal/dataset/get-warehouses",u)}getDemands(u){return this.api.post("/routing-deviation/internal/dataset/get-demands",u)}getDemandsWithTimeRange(u){return this.api.post("/routing-deviation/internal/dataset/get-demands",u)}getDemandsShiftRatio(u){return this.api.post("/routing-deviation/internal/dataset/get-demands-shift-ratio",u)}getDemandsByDays(u){return this.api.post("/routing-deviation/internal/dataset/get-demands-by-days",u)}static \u0275fac=function(y){return new(y||p)(E.KVO(t.G))};static \u0275prov=E.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},8934:(D,_,a)=>{a.r(_),a.d(_,{PlanningProductivity:()=>L});var E=a(467),t=a(1360),b=a(2881),p=a(9417),C=a(5498),u=a(9377),y=a(1141),j=a(491),F=a(1570),m=a(2242),P=a(7897),o=a(6221),r=a(8559),d=a(5430),c=a(8512),f=a(5779);const k=["hubRegionCanvas"],S=["hubTypeCanvas"],H=["hubMap"],T=()=>({width:"800px"});function x(h,v){if(1&h&&(t.j41(0,"div",63)(1,"div",64),t.qSk(),t.j41(2,"svg",65),t.nrm(3,"path",66),t.k0s(),t.joV(),t.j41(4,"span",67),t.EFF(5),t.k0s()()()),2&h){const e=t.XpG();t.R7$(5),t.JRh(e.error)}}function R(h,v){if(1&h){const e=t.RV6();t.j41(0,"p-button",77),t.bIt("onClick",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG();return t.Njj(s.toggleHubSelection(n))}),t.k0s()}}function M(h,v){if(1&h){const e=t.RV6();t.j41(0,"p-button",78),t.bIt("onClick",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG();return t.Njj(s.toggleHubSelection(n))}),t.k0s()}}function I(h,v){if(1&h&&(t.j41(0,"tr",68)(1,"td",69),t.EFF(2),t.k0s(),t.j41(3,"td",70),t.EFF(4),t.k0s(),t.j41(5,"td",71),t.EFF(6),t.k0s(),t.j41(7,"td",72),t.EFF(8),t.k0s(),t.j41(9,"td",72),t.EFF(10),t.k0s(),t.j41(11,"td",72)(12,"span",73),t.EFF(13),t.k0s()(),t.j41(14,"td",72)(15,"span",73),t.EFF(16),t.k0s()(),t.j41(17,"td",72)(18,"div",74),t.DNE(19,R,1,0,"p-button",75)(20,M,1,0,"p-button",76),t.k0s()()()),2&h){const e=v.$implicit,i=v.index,n=t.XpG();t.Y8G("ngClass",i%2==0?"bg-white":"bg-orange-50/30"),t.R7$(2),t.SpI(" ",i+1," "),t.R7$(2),t.SpI(" ",e["ID BC"]||""," "),t.R7$(2),t.SpI(" ",e["T\xean BC"]||""," "),t.R7$(2),t.SpI(" ",e["Qu\u1eadn/Huy\u1ec7n"]||""," "),t.R7$(2),t.SpI(" ",e.T\u1ec9nh||""," "),t.R7$(2),t.Y8G("ngClass",n.getRegionBadgeClass(e.V\u00f9ng)),t.R7$(),t.SpI(" ",e.V\u00f9ng||""," "),t.R7$(2),t.Y8G("ngClass",n.getHubTypeBadgeClass(e["Lo\u1ea1i BC"])),t.R7$(),t.SpI(" ",e["Lo\u1ea1i BC"]||""," "),t.R7$(3),t.Y8G("ngIf",!n.isHubSelected(e)),t.R7$(),t.Y8G("ngIf",n.isHubSelected(e))}}function w(h,v){if(1&h&&(t.j41(0,"option",79),t.EFF(1),t.k0s()),2&h){const e=v.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function A(h,v){if(1&h){const e=t.RV6();t.j41(0,"tr",68)(1,"td",80)(2,"input",81),t.bIt("change",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.toggleHubSelection(n))}),t.k0s()(),t.j41(3,"td",82),t.EFF(4),t.k0s(),t.j41(5,"td",83),t.EFF(6),t.k0s(),t.j41(7,"td",84)(8,"span",85),t.EFF(9),t.k0s()()()}if(2&h){const e=v.$implicit,i=t.XpG();t.Y8G("ngClass",i.isHubSelected(e)?"bg-green-50":""),t.R7$(2),t.Y8G("checked",i.isHubSelected(e)),t.R7$(2),t.JRh(e["ID BC"]),t.R7$(2),t.JRh(e["T\xean BC"]),t.R7$(2),t.Y8G("ngClass",i.getRegionBadgeClass(e.V\u00f9ng)),t.R7$(),t.SpI(" ",e.V\u00f9ng," ")}}function O(h,v){if(1&h){const e=t.RV6();t.j41(0,"p-button",86),t.bIt("onClick",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeHubSearchDialog())}),t.k0s(),t.j41(1,"p-button",87),t.bIt("onClick",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.confirmHubSelection())}),t.k0s()}}C.t1.register(...C.$L);let L=(()=>{class h{datasetService;cdr;platformId;allHubs=[];filteredHubs=[];selectedHubs=[];loading=!1;error=null;hubSearchQuery="";showHubSearchDialog=!1;hubSearchFilters={region:"",warehouse:"",id:""};map=null;hubMarkers=[];lastMapWidth=0;hubRegionChart=null;hubTypeChart=null;hubRegionCanvas;hubTypeCanvas;hubMap;constructor(e,i,n){this.datasetService=e,this.cdr=i,this.platformId=n}ngOnInit(){this.loadHubData()}ngAfterViewInit(){(0,u.UE)(this.platformId)&&this.initializeMap()}ngAfterViewChecked(){if((0,u.UE)(this.platformId)&&this.map&&this.hubMap?.nativeElement){const e=this.hubMap.nativeElement.getBoundingClientRect();e.width>0&&e.height>0&&e.width!==this.lastMapWidth&&(this.lastMapWidth=e.width,setTimeout(()=>{this.map&&this.map.invalidateSize()},100))}}ngOnDestroy(){if(this.hubRegionChart&&this.hubRegionChart.destroy(),this.hubTypeChart&&this.hubTypeChart.destroy(),(0,u.UE)(this.platformId)&&this.map)try{this.hubMarkers.forEach(e=>{this.map&&this.map.hasLayer(e)&&this.map.removeLayer(e)}),this.hubMarkers=[],this.map.remove(),this.map=null}catch(e){console.error("[PlanningProductivity] Error during map cleanup:",e),this.map=null}}loadHubData(){this.loading=!0,this.error=null,this.datasetService.getWarehouses({region_shortname:"HCM",size:1e3,offset:0}).subscribe({next:e=>{e.ok&&e.data?(this.allHubs=e.data.map(i=>({"ID BC":i.warehouse_id?.toString()||i.id,"T\xean BC":i.warehouse_name||"Unknown",V\u00f9ng:i.region_shortname||"Unknown",T\u1ec9nh:i.province_name||"Unknown","Qu\u1eadn/Huy\u1ec7n":i.district_name||"Unknown","Lo\u1ea1i BC":i.warehouse_type||"Unknown",Lat:parseFloat(i.latitude)||0,Lng:parseFloat(i.longitude)||0,originalData:i})),this.filterHubs(),this.initializeCharts(),this.loadDefaultHubWarehouses(),this.loading=!1,this.cdr.markForCheck()):(this.error="Kh\xf4ng th\u1ec3 t\u1ea3i d\u1eef li\u1ec7u b\u01b0u c\u1ee5c",this.loading=!1,this.cdr.markForCheck())},error:e=>{this.error=e?.message||"L\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u b\u01b0u c\u1ee5c",this.loading=!1,this.cdr.markForCheck()}})}loadDefaultHubWarehouses(){this.datasetService.getWarehouses({region_shortname:"HCM",size:1e3,offset:0}).subscribe({next:e=>{e.ok&&e.data?(this.selectedHubs=e.data.map(i=>({"ID BC":i.warehouse_id?.toString()||i.id,"T\xean BC":i.warehouse_name||"Unknown",V\u00f9ng:i.region_shortname||"HNO",T\u1ec9nh:i.province_name||"Unknown","Qu\u1eadn/Huy\u1ec7n":i.district_name||"Unknown","Lo\u1ea1i BC":i.warehouse_type||"Unknown",Lat:parseFloat(i.latitude)||0,Lng:parseFloat(i.longitude)||0,originalData:i})),this.cdr.markForCheck(),this.updateMapMarkers()):(this.selectedHubs=[],this.cdr.markForCheck())},error:e=>{console.error("[PlanningProductivity] Error loading default HNO warehouses:",e),this.selectedHubs=[],this.cdr.markForCheck()}})}initializeCharts(){if(!(0,u.UE)(this.platformId))return;this.hubRegionChart&&this.hubRegionChart.destroy(),this.hubTypeChart&&this.hubTypeChart.destroy();const e=this.allHubs.reduce((n,s)=>{const l=s.V\u00f9ng||"Unknown";return n[l]=(n[l]||0)+1,n},{});this.hubRegionCanvas?.nativeElement&&(this.hubRegionChart=new C.t1(this.hubRegionCanvas.nativeElement,{type:"doughnut",data:{labels:Object.keys(e),datasets:[{data:Object.values(e),backgroundColor:["#3B82F6","#10B981","#8B5CF6","#F59E0B","#EF4444"],borderWidth:2,borderColor:"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}}}}}));const i=this.allHubs.reduce((n,s)=>{const l=s["Lo\u1ea1i BC"]||"Unknown";return n[l]=(n[l]||0)+1,n},{});this.hubTypeCanvas?.nativeElement&&(this.hubTypeChart=new C.t1(this.hubTypeCanvas.nativeElement,{type:"bar",data:{labels:Object.keys(i),datasets:[{label:"S\u1ed1 l\u01b0\u1ee3ng b\u01b0u c\u1ee5c",data:Object.values(i),backgroundColor:"#F59E0B",borderColor:"#D97706",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{precision:0}}},plugins:{legend:{display:!1}}}}))}getHubStats(){const e=this.allHubs.length,i=this.allHubs.filter(l=>"C\u1ea3 L\u1ea5y & Giao"===l["Lo\u1ea1i BC"]).length,n=this.allHubs.filter(l=>"Ch\u1ec9 Giao"===l["Lo\u1ea1i BC"]).length,s=[...new Set(this.allHubs.map(l=>l.V\u00f9ng))].length;return{totalWarehouses:e,fullService:i,fullServicePercent:e>0?(i/e*100).toFixed(1):"0",deliveryOnly:n,deliveryOnlyPercent:e>0?(n/e*100).toFixed(1):"0",totalRegions:s}}filterHubs(){this.filteredHubs=this.allHubs.filter(e=>{const i=!this.hubSearchFilters.region||e.V\u00f9ng===this.hubSearchFilters.region,n=!this.hubSearchFilters.warehouse||e["T\xean BC"]&&e["T\xean BC"].toLowerCase().includes(this.hubSearchFilters.warehouse.toLowerCase()),s=!this.hubSearchFilters.id||e["ID BC"]&&e["ID BC"].toLowerCase().includes(this.hubSearchFilters.id.toLowerCase()),l=!this.hubSearchQuery.trim()||e["T\xean BC"]&&e["T\xean BC"].toLowerCase().includes(this.hubSearchQuery.toLowerCase())||e["ID BC"]&&e["ID BC"].toLowerCase().includes(this.hubSearchQuery.toLowerCase())||e.V\u00f9ng&&e.V\u00f9ng.toLowerCase().includes(this.hubSearchQuery.toLowerCase());return i&&n&&s&&l})}searchHubs(){this.datasetService.getWarehouses({region_shortname:this.hubSearchFilters.region||"HCM",size:1e3,offset:0,search:this.hubSearchFilters.warehouse||this.hubSearchFilters.id||""}).subscribe({next:i=>{i.ok&&i.data&&(this.allHubs=i.data.map(n=>({"ID BC":n.warehouse_id?.toString()||n.id,"T\xean BC":n.warehouse_name||"Unknown",V\u00f9ng:n.region_shortname||"Unknown",T\u1ec9nh:n.province_name||"Unknown","Qu\u1eadn/Huy\u1ec7n":n.district_name||"Unknown","Lo\u1ea1i BC":n.warehouse_type||"Unknown",Lat:parseFloat(n.latitude)||0,Lng:parseFloat(n.longitude)||0,originalData:n})),this.filterHubs())},error:i=>{console.error("Error searching warehouses:",i)}})}getUniqueRegions(){return[...new Set(this.allHubs.map(e=>e.V\u00f9ng).filter(e=>void 0!==e))]}isHubSelected(e){return this.selectedHubs.some(i=>i["ID BC"]===e["ID BC"])}toggleHubSelection(e){const i=this.selectedHubs.findIndex(n=>n["ID BC"]===e["ID BC"]);i>-1?this.selectedHubs.splice(i,1):this.selectedHubs.push(e)}clearHubSelection(){this.selectedHubs=[]}selectAllHubs(){this.selectedHubs=[...this.allHubs],this.updateMapMarkers()}confirmHubSelection(){var e=this;return(0,E.A)(function*(){e.closeHubSearchDialog(),yield e.updateMapMarkers()})()}removeHub(e){var i=this;return(0,E.A)(function*(){const n=i.selectedHubs.findIndex(s=>s["ID BC"]===e["ID BC"]);n>-1&&(i.selectedHubs.splice(n,1),yield i.updateMapMarkers())})()}getHubTypeBadgeClass(e){switch(e){case"Trung t\xe2m":return"bg-blue-100 text-blue-800";case"Ph\u1ee5 tr\u1ee3":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}getRegionBadgeClass(e){switch(e){case"NTB":return"bg-blue-100 text-blue-800";case"HCM":return"bg-green-100 text-green-800";case"HN":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}}openHubSearchDialog(){this.showHubSearchDialog=!0,this.filterHubs()}closeHubSearchDialog(){this.showHubSearchDialog=!1}initializeMap(){var e=this;return(0,E.A)(function*(){if((0,u.UE)(e.platformId)&&e.hubMap&&e.hubMap.nativeElement&&!e.map)try{const n=yield a.e(8244).then(a.t.bind(a,8244,23)),s="/images/leaflet/",l=s+"marker-icon-2x.png",g=s+"marker-icon.png",B=s+"marker-shadow.png";if(n.Icon&&n.Icon.Default)n.Icon.Default.mergeOptions({iconRetinaUrl:l,iconUrl:g,shadowUrl:B,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});else if(n.icon){const U=n.icon({iconRetinaUrl:l,iconUrl:g,shadowUrl:B,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});n.Marker&&(n.Marker.prototype.options.icon=U)}e.map=n.map(e.hubMap.nativeElement,{center:[14.0583,108.2772],zoom:6,zoomControl:!0,scrollWheelZoom:!0}),n.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19,minZoom:3}).addTo(e.map),setTimeout(()=>{e.map&&e.map.invalidateSize()},300)}catch(i){console.error("[PlanningProductivity] Error initializing map:",i),e.map=null}})()}updateMapMarkers(){var e=this;return(0,E.A)(function*(){if((0,u.UE)(e.platformId)&&e.map)try{const i=yield a.e(8244).then(a.t.bind(a,8244,23));if(e.hubMarkers.forEach(n=>{e.map&&e.map.hasLayer(n)&&e.map.removeLayer(n)}),e.hubMarkers=[],e.selectedHubs.forEach(n=>{if(n.Lat&&n.Lng&&"number"==typeof n.Lat&&"number"==typeof n.Lng){const s=n.Lat,l=n.Lng;if(0!==s&&0!==l&&s>=-90&&s<=90&&l>=-180&&l<=180)try{const g=i.marker([s,l]).addTo(e.map).bindPopup('<div class="p-2 max-w-xs"><h3 class="font-semibold text-sm mb-1">'+(n["T\xean BC"]||"Unknown")+'</h3><p class="text-xs text-gray-600 mb-1">ID: '+(n["ID BC"]||"N/A")+'</p><p class="text-xs text-gray-600 mb-1">'+(n["Qu\u1eadn/Huy\u1ec7n"]||"")+", "+(n.T\u1ec9nh||"")+'</p><p class="text-xs text-gray-600">V\xf9ng: '+(n.V\u00f9ng||"N/A")+"</p></div>");e.hubMarkers.push(g)}catch(g){console.error("[PlanningProductivity] Error creating marker for",n["T\xean BC"],g)}}}),e.hubMarkers.length>0)try{const s=i.featureGroup(e.hubMarkers).getBounds();s.isValid()&&e.map.fitBounds(s.pad(.1))}catch(n){console.error("[PlanningProductivity] Error fitting map bounds:",n)}}catch(i){console.error("[PlanningProductivity] Error updating map markers:",i)}})()}static \u0275fac=function(i){return new(i||h)(t.rXU(c.q),t.rXU(t.gRc),t.rXU(t.Agw))};static \u0275cmp=t.VBU({type:h,selectors:[["app-planning-productivity"]],viewQuery:function(i,n){if(1&i&&(t.GBs(k,5),t.GBs(S,5),t.GBs(H,5)),2&i){let s;t.mGM(s=t.lsd())&&(n.hubRegionCanvas=s.first),t.mGM(s=t.lsd())&&(n.hubTypeCanvas=s.first),t.mGM(s=t.lsd())&&(n.hubMap=s.first)}},decls:143,vars:23,consts:[["hubRegionCanvas",""],["hubTypeCanvas",""],["hubMap",""],[1,"planning-productivity-container"],[1,"space-y-6"],[1,"bg-white","border","border-orange-200","rounded-lg","shadow-sm","p-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","space-x-3"],["label","T\xecm ki\u1ebfm BC","icon","pi pi-search","styleClass","p-button-outlined p-button-orange",3,"onClick"],["label","L\xe0m m\u1edbi","icon","pi pi-refresh","styleClass","p-button-orange",3,"onClick","loading"],["class","bg-red-50 border border-red-200 rounded-lg p-4",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bg-gradient-to-br","from-blue-500","to-blue-600","text-white","p-6","rounded-lg","shadow-lg"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","font-semibold","opacity-90"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"text-3xl","font-bold"],[1,"text-xs","opacity-75","mt-1"],[1,"bg-gradient-to-br","from-green-500","to-green-600","text-white","p-6","rounded-lg","shadow-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"bg-gradient-to-br","from-purple-500","to-purple-600","text-white","p-6","rounded-lg","shadow-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 14l-7 7m0 0l-7-7m7 7V3"],[1,"bg-gradient-to-br","from-orange-500","to-orange-600","text-white","p-6","rounded-lg","shadow-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"text-lg","font-semibold","text-orange-600","mb-4"],[1,"relative",2,"height","300px"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-orange-600"],[1,"flex","items-center","space-x-2"],[1,"text-sm","text-gray-600"],["label","Ch\u1ecdn t\u1ea5t c\u1ea3","size","small","styleClass","p-button-outlined p-button-orange",3,"onClick"],["label","X\xf3a ch\u1ecdn","size","small","styleClass","p-button-outlined p-button-secondary",3,"onClick"],[1,"relative",2,"height","400px"],["id","hubMap",1,"w-full","h-full","rounded-lg","border","border-gray-200"],[1,"bg-white","border","border-orange-200","rounded-lg","shadow-sm","overflow-hidden"],[1,"px-6","py-4","bg-gradient-to-r","from-orange-50","to-orange-100","border-b","border-orange-200"],[1,"font-semibold","text-gray-900"],[1,"text-xs","text-gray-600"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-orange-200"],[1,"bg-orange-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-orange-700","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-orange-100"],[3,"ngClass",4,"ngFor","ngForOf"],["header","T\xecm ki\u1ebfm B\u01b0u c\u1ee5c","styleClass","p-fluid",3,"visibleChange","visible","modal","closable"],[1,"space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-orange-500",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["pInputText","","placeholder","Nh\u1eadp t\xean b\u01b0u c\u1ee5c",1,"w-full",3,"ngModelChange","input","ngModel"],["pInputText","","placeholder","Nh\u1eadp ID b\u01b0u c\u1ee5c",1,"w-full",3,"ngModelChange","input","ngModel"],[1,"border","border-gray-200","rounded-lg","max-h-96","overflow-y-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50","sticky","top-0"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase"],[1,"bg-white","divide-y","divide-gray-200"],["pTemplate","footer"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-800"],[3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900","text-center"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900","font-mono"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"flex","space-x-2"],["label","Ch\u1ecdn","size","small","styleClass","p-button-outlined p-button-success",3,"onClick",4,"ngIf"],["label","B\u1ecf ch\u1ecdn","size","small","styleClass","p-button-outlined p-button-danger",3,"onClick",4,"ngIf"],["label","Ch\u1ecdn","size","small","styleClass","p-button-outlined p-button-success",3,"onClick"],["label","B\u1ecf ch\u1ecdn","size","small","styleClass","p-button-outlined p-button-danger",3,"onClick"],[3,"value"],[1,"px-4","py-3"],["type","checkbox",1,"w-4","h-4","text-orange-600","bg-gray-100","border-gray-300","rounded","focus:ring-orange-500",3,"change","checked"],[1,"px-4","py-3","text-sm","font-mono"],[1,"px-4","py-3","text-sm","font-medium"],[1,"px-4","py-3","text-sm"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],["label","H\u1ee7y","icon","pi pi-times","styleClass","p-button-text",3,"onClick"],["label","X\xe1c nh\u1eadn","icon","pi pi-check","styleClass","p-button-primary",3,"onClick"]],template:function(i,n){if(1&i){const s=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div")(5,"h1",7),t.EFF(6,"Qu\u1ea3n l\xfd S\u1ea3n l\u01b0\u1ee3ng B\u01b0u c\u1ee5c"),t.k0s(),t.j41(7,"p",8),t.EFF(8,"Theo d\xf5i v\xe0 qu\u1ea3n l\xfd n\u0103ng l\u1ef1c s\u1ea3n xu\u1ea5t c\u1ee7a c\xe1c b\u01b0u c\u1ee5c"),t.k0s()(),t.j41(9,"div",9)(10,"p-button",10),t.bIt("onClick",function(){return t.eBV(s),t.Njj(n.openHubSearchDialog())}),t.k0s(),t.j41(11,"p-button",11),t.bIt("onClick",function(){return t.eBV(s),t.Njj(n.loadHubData())}),t.k0s()()()(),t.DNE(12,x,6,1,"div",12),t.j41(13,"div",13)(14,"div",14)(15,"div",15)(16,"span",16),t.EFF(17,"T\u1ed5ng B\u01b0u C\u1ee5c"),t.k0s(),t.qSk(),t.j41(18,"svg",17),t.nrm(19,"path",18),t.k0s()(),t.joV(),t.j41(20,"div",19),t.EFF(21),t.k0s(),t.j41(22,"div",20),t.EFF(23,"b\u01b0u c\u1ee5c"),t.k0s()(),t.j41(24,"div",21)(25,"div",15)(26,"span",16),t.EFF(27,"C\u1ea3 L\u1ea5y & Giao"),t.k0s(),t.qSk(),t.j41(28,"svg",17),t.nrm(29,"path",22),t.k0s()(),t.joV(),t.j41(30,"div",19),t.EFF(31),t.k0s(),t.j41(32,"div",20),t.EFF(33),t.k0s()(),t.j41(34,"div",23)(35,"div",15)(36,"span",16),t.EFF(37,"Ch\u1ec9 Giao"),t.k0s(),t.qSk(),t.j41(38,"svg",17),t.nrm(39,"path",24),t.k0s()(),t.joV(),t.j41(40,"div",19),t.EFF(41),t.k0s(),t.j41(42,"div",20),t.EFF(43),t.k0s()(),t.j41(44,"div",25)(45,"div",15)(46,"span",16),t.EFF(47,"S\u1ed1 V\xf9ng"),t.k0s(),t.qSk(),t.j41(48,"svg",17),t.nrm(49,"path",26),t.k0s()(),t.joV(),t.j41(50,"div",19),t.EFF(51),t.k0s(),t.j41(52,"div",20),t.EFF(53,"v\xf9ng"),t.k0s()()(),t.j41(54,"div",27)(55,"div",5)(56,"h5",28),t.EFF(57,"Ph\xe2n b\u1ed5 theo V\xf9ng"),t.k0s(),t.j41(58,"div",29),t.nrm(59,"canvas",null,0),t.k0s()(),t.j41(61,"div",5)(62,"h5",28),t.EFF(63,"Ph\xe2n b\u1ed5 theo Lo\u1ea1i B\u01b0u C\u1ee5c"),t.k0s(),t.j41(64,"div",29),t.nrm(65,"canvas",null,1),t.k0s()()(),t.j41(67,"div",5)(68,"div",30)(69,"h5",31),t.EFF(70,"B\u1ea3n \u0111\u1ed3 B\u01b0u c\u1ee5c"),t.k0s(),t.j41(71,"div",32)(72,"span",33),t.EFF(73),t.k0s(),t.j41(74,"p-button",34),t.bIt("onClick",function(){return t.eBV(s),t.Njj(n.selectAllHubs())}),t.k0s(),t.j41(75,"p-button",35),t.bIt("onClick",function(){return t.eBV(s),t.Njj(n.clearHubSelection())}),t.k0s()()(),t.j41(76,"div",36),t.nrm(77,"div",37,2),t.k0s()(),t.j41(79,"div",38)(80,"div",39)(81,"div",6)(82,"h4",40),t.EFF(83,"Danh s\xe1ch B\u01b0u C\u1ee5c"),t.k0s(),t.j41(84,"span",41),t.EFF(85),t.k0s()()(),t.j41(86,"div",42)(87,"table",43)(88,"thead",44)(89,"tr")(90,"th",45),t.EFF(91,"STT"),t.k0s(),t.j41(92,"th",45),t.EFF(93,"ID BC"),t.k0s(),t.j41(94,"th",45),t.EFF(95,"T\xean BC"),t.k0s(),t.j41(96,"th",45),t.EFF(97,"Qu\u1eadn/Huy\u1ec7n"),t.k0s(),t.j41(98,"th",45),t.EFF(99,"T\u1ec9nh"),t.k0s(),t.j41(100,"th",45),t.EFF(101,"V\xf9ng"),t.k0s(),t.j41(102,"th",45),t.EFF(103,"Lo\u1ea1i BC"),t.k0s(),t.j41(104,"th",45),t.EFF(105,"Thao t\xe1c"),t.k0s()()(),t.j41(106,"tbody",46),t.DNE(107,I,21,12,"tr",47),t.k0s()()()()()(),t.j41(108,"p-dialog",48),t.mxI("visibleChange",function(g){return t.eBV(s),t.DH7(n.showHubSearchDialog,g)||(n.showHubSearchDialog=g),t.Njj(g)}),t.j41(109,"div",49)(110,"div",50)(111,"div")(112,"label",51),t.EFF(113,"V\xf9ng"),t.k0s(),t.j41(114,"select",52),t.mxI("ngModelChange",function(g){return t.eBV(s),t.DH7(n.hubSearchFilters.region,g)||(n.hubSearchFilters.region=g),t.Njj(g)}),t.bIt("change",function(){return t.eBV(s),t.Njj(n.filterHubs())}),t.j41(115,"option",53),t.EFF(116,"T\u1ea5t c\u1ea3 v\xf9ng"),t.k0s(),t.DNE(117,w,2,2,"option",54),t.k0s()(),t.j41(118,"div")(119,"label",51),t.EFF(120,"T\xean b\u01b0u c\u1ee5c"),t.k0s(),t.j41(121,"input",55),t.mxI("ngModelChange",function(g){return t.eBV(s),t.DH7(n.hubSearchFilters.warehouse,g)||(n.hubSearchFilters.warehouse=g),t.Njj(g)}),t.bIt("input",function(){return t.eBV(s),t.Njj(n.filterHubs())}),t.k0s()(),t.j41(122,"div")(123,"label",51),t.EFF(124,"ID b\u01b0u c\u1ee5c"),t.k0s(),t.j41(125,"input",56),t.mxI("ngModelChange",function(g){return t.eBV(s),t.DH7(n.hubSearchFilters.id,g)||(n.hubSearchFilters.id=g),t.Njj(g)}),t.bIt("input",function(){return t.eBV(s),t.Njj(n.filterHubs())}),t.k0s()()(),t.j41(126,"div",57)(127,"table",58)(128,"thead",59)(129,"tr")(130,"th",60),t.EFF(131,"Ch\u1ecdn"),t.k0s(),t.j41(132,"th",60),t.EFF(133,"ID BC"),t.k0s(),t.j41(134,"th",60),t.EFF(135,"T\xean BC"),t.k0s(),t.j41(136,"th",60),t.EFF(137,"V\xf9ng"),t.k0s()()(),t.j41(138,"tbody",61),t.DNE(139,A,10,6,"tr",47),t.k0s()()(),t.j41(140,"div",33),t.EFF(141),t.k0s()(),t.DNE(142,O,2,0,"ng-template",62),t.k0s()}2&i&&(t.R7$(11),t.Y8G("loading",n.loading),t.R7$(),t.Y8G("ngIf",n.error),t.R7$(9),t.JRh(n.getHubStats().totalWarehouses),t.R7$(10),t.JRh(n.getHubStats().fullService),t.R7$(2),t.SpI("",n.getHubStats().fullServicePercent,"%"),t.R7$(8),t.JRh(n.getHubStats().deliveryOnly),t.R7$(2),t.SpI("",n.getHubStats().deliveryOnlyPercent,"%"),t.R7$(8),t.JRh(n.getHubStats().totalRegions),t.R7$(22),t.SpI("",n.selectedHubs.length," b\u01b0u c\u1ee5c \u0111\u01b0\u1ee3c ch\u1ecdn"),t.R7$(12),t.SpI("",n.allHubs.length," b\u01b0u c\u1ee5c"),t.R7$(22),t.Y8G("ngForOf",n.allHubs),t.R7$(),t.Aen(t.lJ4(22,T)),t.R50("visible",n.showHubSearchDialog),t.Y8G("modal",!0)("closable",!0),t.R7$(6),t.R50("ngModel",n.hubSearchFilters.region),t.R7$(3),t.Y8G("ngForOf",n.getUniqueRegions()),t.R7$(4),t.R50("ngModel",n.hubSearchFilters.warehouse),t.R7$(4),t.R50("ngModel",n.hubSearchFilters.id),t.R7$(14),t.Y8G("ngForOf",n.filteredHubs),t.R7$(2),t.SpI(" \u0110\xe3 ch\u1ecdn: ",n.selectedHubs.length," b\u01b0u c\u1ee5c "))},dependencies:[b.MD,b.YU,b.Sq,b.bT,p.YN,p.xH,p.y7,p.me,p.wz,p.BC,p.vS,y.tm,y.$n,f.Ei,j.Dw,F.Ph,F.lG,m.um,m.Sm,P.py,o.bG,r.Fr,d.q4],encapsulation:2})}return h})()}}]);