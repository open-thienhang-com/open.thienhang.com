"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[6064],{6064:(S,c,s)=>{s.r(c),s.d(c,{CategoriesComponent:()=>P});var d=s(2881),g=s(9417),u=s(1141),_=s(6221),m=s(1570),C=s(2242),h=s(8150),b=s(1305),v=s(6150),y=s(4799),f=s(7722),p=s(5779),E=s(8533),e=s(1360);const j=()=>({width:"640px"});function x(o,l){1&o&&(e.j41(0,"div",42)(1,"div",43),e.nrm(2,"i",44),e.k0s(),e.j41(3,"p",7),e.EFF(4,"Loading categories..."),e.k0s()())}function R(o,l){1&o&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Name"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Slug"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Parent"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Status"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Updated At"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Actions"),e.k0s()())}function F(o,l){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div")(3,"div",49),e.EFF(4),e.k0s(),e.j41(5,"div",50),e.EFF(6),e.k0s()()(),e.j41(7,"td")(8,"code",51),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.nrm(13,"p-badge",52),e.k0s(),e.j41(14,"td"),e.EFF(15),e.nI1(16,"date"),e.k0s(),e.j41(17,"td")(18,"div",53)(19,"p-button",54),e.bIt("onClick",function(){const i=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.editCategory(i))}),e.k0s()()()()}if(2&o){const t=l.$implicit,n=e.XpG(2);e.R7$(4),e.JRh(t.name),e.R7$(2),e.JRh(t.description||"-"),e.R7$(3),e.JRh(t.slug),e.R7$(2),e.JRh(n.getParentLabel(t.parentId)),e.R7$(2),e.Y8G("value",n.getStatusLabel(t.isActive))("severity",n.getStatusSeverity(t.isActive)),e.R7$(2),e.JRh(e.i5U(16,8,t.updatedAt,"short")),e.R7$(4),e.Y8G("outlined",!0)}}function M(o,l){1&o&&(e.j41(0,"tr")(1,"td",55),e.EFF(2," No categories found "),e.k0s()())}function k(o,l){if(1&o&&(e.j41(0,"p-table",45),e.DNE(1,R,13,0,"ng-template",46)(2,F,20,11,"ng-template",47)(3,M,3,0,"ng-template",48),e.k0s()),2&o){const t=e.XpG();e.Y8G("value",t.filteredCategories)("paginator",!0)("rows",10)("showCurrentPageReport",!0)}}function I(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",56)(1,"div")(2,"label",26),e.EFF(3,"Name *"),e.k0s(),e.j41(4,"input",57),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.editingCategory.name,i)||(a.editingCategory.name=i),e.Njj(i)}),e.k0s()(),e.j41(5,"div")(6,"label",26),e.EFF(7,"Slug *"),e.k0s(),e.j41(8,"input",58),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.editingCategory.slug,i)||(a.editingCategory.slug=i),e.Njj(i)}),e.k0s()(),e.j41(9,"div")(10,"label",26),e.EFF(11,"Parent Category"),e.k0s(),e.j41(12,"p-dropdown",59),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.editingCategory.parentId,i)||(a.editingCategory.parentId=i),e.Njj(i)}),e.k0s()(),e.j41(13,"div")(14,"label",26),e.EFF(15,"Status"),e.k0s(),e.j41(16,"p-dropdown",59),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.editingCategory.isActive,i)||(a.editingCategory.isActive=i),e.Njj(i)}),e.k0s()(),e.j41(17,"div",60)(18,"label",26),e.EFF(19,"Description"),e.k0s(),e.j41(20,"textarea",61),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.editingCategory.description,i)||(a.editingCategory.description=i),e.Njj(i)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(4),e.R50("ngModel",t.editingCategory.name),e.R7$(4),e.R50("ngModel",t.editingCategory.slug),e.R7$(4),e.R50("ngModel",t.editingCategory.parentId),e.Y8G("options",t.dialogParentOptions),e.R7$(4),e.R50("ngModel",t.editingCategory.isActive),e.Y8G("options",t.dialogStatusOptions),e.R7$(4),e.R50("ngModel",t.editingCategory.description)}}function T(o,l){if(1&o){const t=e.RV6();e.j41(0,"p-button",62),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancelEdit())}),e.k0s(),e.j41(1,"p-button",63),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.saveCategory())}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("outlined",!0)("disabled",t.saving),e.R7$(),e.Y8G("loading",t.saving)}}let P=(()=>{class o{messageService;categoryService;categories=[];filteredCategories=[];loading=!1;saving=!1;searchTerm="";selectedStatus="";selectedParentId="";showCategoryDialog=!1;editingCategory=null;statusOptions=[{label:"All Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}];parentOptions=[{label:"All Parents",value:""}];dialogParentOptions=[{label:"None (Root)",value:""}];dialogStatusOptions=[{label:"Active",value:!0},{label:"Inactive",value:!1}];constructor(t,n){this.messageService=t,this.categoryService=n}ngOnInit(){this.loadCategories()}loadCategories(){this.loading=!0,this.categoryService.listCategories(0,50).subscribe({next:t=>{const n=Array.isArray(t?.data)?t.data:[];this.categories=n.map(i=>this.mapCategory(i)),this.applyFilters(),this.refreshParentOptions(),this.loading=!1},error:t=>{this.loading=!1,this.categories=[],this.filteredCategories=[],this.messageService.add({severity:"error",summary:"Error",detail:t?.error?.message||"Failed to load categories"})}})}applyFilters(){this.filteredCategories=this.categories.filter(t=>{const n=this.searchTerm.trim().toLowerCase();return(!n||t.name.toLowerCase().includes(n)||t.slug.toLowerCase().includes(n)||t.description.toLowerCase().includes(n))&&(!this.selectedStatus||(t.isActive?"active":"inactive")===this.selectedStatus)&&(!this.selectedParentId||t.parentId===this.selectedParentId)})}clearFilters(){this.searchTerm="",this.selectedStatus="",this.selectedParentId="",this.applyFilters()}createCategory(){this.editingCategory={id:"",name:"",slug:"",description:"",parentId:"",isActive:!0,createdAt:null,updatedAt:null},this.showCategoryDialog=!0}editCategory(t){this.saving=!0,this.categoryService.getCategory(t.id).subscribe({next:n=>{this.editingCategory=this.mapCategory(n?.data||t),this.showCategoryDialog=!0,this.saving=!1},error:()=>{this.editingCategory={...t},this.showCategoryDialog=!0,this.saving=!1}})}saveCategory(){if(!this.editingCategory)return;const t={name:this.editingCategory.name.trim(),slug:this.editingCategory.slug.trim(),description:this.editingCategory.description||"",parent_id:this.editingCategory.parentId||"",is_active:this.editingCategory.isActive};if(!t.name||!t.slug)return void this.messageService.add({severity:"warn",summary:"Validation",detail:"Name and slug are required."});this.saving=!0;const n=!!this.editingCategory.id;(n?this.categoryService.updateCategory(this.editingCategory.id,t):this.categoryService.createCategory(t)).subscribe({next:()=>{this.saving=!1,this.showCategoryDialog=!1,this.editingCategory=null,this.messageService.add({severity:"success",summary:"Success",detail:n?"Category updated":"Category created"}),this.loadCategories()},error:a=>{this.saving=!1,this.messageService.add({severity:"error",summary:"Error",detail:a?.error?.message||"Failed to save category"})}})}cancelEdit(){this.showCategoryDialog=!1,this.editingCategory=null}getStatusSeverity(t){return t?"success":"danger"}getStatusLabel(t){return t?"active":"inactive"}getActiveCategories(){return this.categories.filter(t=>t.isActive).length}getRootCategories(){return this.categories.filter(t=>!t.parentId).length}getParentLabel(t){return t?this.categories.find(i=>i.id===t)?.name||t:"Root"}refreshParentOptions(){const t=this.categories.map(n=>({label:n.name,value:n.id}));this.parentOptions=[{label:"All Parents",value:""},...t],this.dialogParentOptions=[{label:"None (Root)",value:""},...t]}mapCategory(t){return{id:String(t?._id||t?.id||""),name:String(t?.name||""),slug:String(t?.slug||""),description:String(t?.description||""),parentId:String(t?.parent_id||""),isActive:!1!==t?.is_active,createdAt:t?.created_at?new Date(t.created_at):null,updatedAt:t?.updated_at?new Date(t.updated_at):null}}static \u0275fac=function(n){return new(n||o)(e.rXU(p.bg),e.rXU(E.M$))};static \u0275cmp=e.VBU({type:o,selectors:[["app-categories"]],features:[e.Jv_([p.bg])],decls:74,vars:22,consts:[[1,"bg-gray-50","min-h-screen","p-6"],[1,"bg-white","rounded-lg","shadow-sm","p-6","mb-6"],[1,"flex","flex-col","lg:flex-row","lg:items-center","lg:justify-between","gap-4"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-gradient-to-br","from-purple-500","to-indigo-600","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-tags","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"flex","flex-wrap","items-center","gap-2","sm:gap-3"],["icon","pi pi-refresh","severity","info","pTooltip","Refresh",1,"hidden","sm:inline-flex",3,"onClick","outlined","rounded"],["label","Add Category","icon","pi pi-plus","severity","primary",3,"onClick"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-6"],[1,"bg-white","rounded-lg","shadow-sm","p-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-600"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-list","text-blue-600","text-xl"],[1,"text-3xl","font-bold","text-green-600"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-check-circle","text-green-600","text-xl"],[1,"text-3xl","font-bold","text-purple-600"],[1,"w-12","h-12","bg-purple-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-sitemap","text-purple-600","text-xl"],[1,"bg-white","rounded-lg","shadow-sm","mb-6"],[1,"p-6"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"p-input-icon-left","w-full"],[1,"pi","pi-search"],["pInputText","","placeholder","Search by name, slug, description...",1,"w-full",3,"ngModelChange","input","ngModel"],["optionLabel","label","optionValue","value",1,"w-full",3,"ngModelChange","onChange","ngModel","options"],[1,"flex","items-end"],["label","Clear Filters","icon","pi pi-times","severity","secondary",3,"onClick","outlined"],[1,"bg-white","rounded-xl","border","border-gray-200","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200","flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],["class","bg-white rounded-xl border border-gray-200 p-10 text-center",4,"ngIf"],["styleClass","p-datatable-sm","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} categories",3,"value","paginator","rows","showCurrentPageReport",4,"ngIf"],[3,"visibleChange","visible","header","modal","closable"],["class","grid grid-cols-1 md:grid-cols-2 gap-4",4,"ngIf"],["pTemplate","footer"],[1,"bg-white","rounded-xl","border","border-gray-200","p-10","text-center"],[1,"w-12","h-12","bg-blue-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-3"],[1,"pi","pi-spin","pi-spinner","text-blue-500","text-xl"],["styleClass","p-datatable-sm","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} categories",3,"value","paginator","rows","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"font-semibold","text-gray-900"],[1,"text-xs","text-gray-500","mt-0.5"],[1,"text-xs"],[3,"value","severity"],[1,"flex","gap-1"],["icon","pi pi-pencil","size","small",3,"onClick","outlined"],["colspan","6",1,"text-center","py-12","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["pInputText","","placeholder","Category name",1,"w-full",3,"ngModelChange","ngModel"],["pInputText","","placeholder","category-slug",1,"w-full",3,"ngModelChange","ngModel"],["optionLabel","label","optionValue","value",1,"w-full",3,"ngModelChange","ngModel","options"],[1,"md:col-span-2"],["pInputTextarea","","rows","4","placeholder","Describe this category",1,"w-full",3,"ngModelChange","ngModel"],["label","Cancel",3,"onClick","outlined","disabled"],["label","Save","icon","pi pi-check",3,"onClick","loading"]],template:function(n,i){1&n&&(e.nrm(0,"p-toast")(1,"p-confirmDialog"),e.j41(2,"div",0)(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4),e.nrm(7,"i",5),e.k0s(),e.j41(8,"div")(9,"h1",6),e.EFF(10,"Inventory Categories"),e.k0s(),e.j41(11,"p",7),e.EFF(12,"Manage category hierarchy and metadata from Retail API"),e.k0s()()(),e.j41(13,"div",8)(14,"p-button",9),e.bIt("onClick",function(){return i.loadCategories()}),e.k0s(),e.j41(15,"p-button",10),e.bIt("onClick",function(){return i.createCategory()}),e.k0s()()()(),e.j41(16,"div",11)(17,"div",12)(18,"div",13)(19,"div")(20,"p",14),e.EFF(21,"Total Categories"),e.k0s(),e.j41(22,"p",6),e.EFF(23),e.k0s()(),e.j41(24,"div",15),e.nrm(25,"i",16),e.k0s()()(),e.j41(26,"div",12)(27,"div",13)(28,"div")(29,"p",14),e.EFF(30,"Active Categories"),e.k0s(),e.j41(31,"p",17),e.EFF(32),e.k0s()(),e.j41(33,"div",18),e.nrm(34,"i",19),e.k0s()()(),e.j41(35,"div",12)(36,"div",13)(37,"div")(38,"p",14),e.EFF(39,"Root Categories"),e.k0s(),e.j41(40,"p",20),e.EFF(41),e.k0s()(),e.j41(42,"div",21),e.nrm(43,"i",22),e.k0s()()()(),e.j41(44,"div",23)(45,"div",24)(46,"div",25)(47,"div")(48,"label",26),e.EFF(49,"Search"),e.k0s(),e.j41(50,"span",27),e.nrm(51,"i",28),e.j41(52,"input",29),e.mxI("ngModelChange",function(r){return e.DH7(i.searchTerm,r)||(i.searchTerm=r),r}),e.bIt("input",function(){return i.applyFilters()}),e.k0s()()(),e.j41(53,"div")(54,"label",26),e.EFF(55,"Status"),e.k0s(),e.j41(56,"p-dropdown",30),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedStatus,r)||(i.selectedStatus=r),r}),e.bIt("onChange",function(){return i.applyFilters()}),e.k0s()(),e.j41(57,"div")(58,"label",26),e.EFF(59,"Parent"),e.k0s(),e.j41(60,"p-dropdown",30),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedParentId,r)||(i.selectedParentId=r),r}),e.bIt("onChange",function(){return i.applyFilters()}),e.k0s()(),e.j41(61,"div",31)(62,"p-button",32),e.bIt("onClick",function(){return i.clearFilters()}),e.k0s()()()()(),e.j41(63,"div",33)(64,"div",34)(65,"h2",35),e.EFF(66),e.k0s(),e.j41(67,"p",36),e.EFF(68,"Source: Retail Domain API"),e.k0s()(),e.DNE(69,x,5,0,"div",37)(70,k,4,4,"p-table",38),e.k0s(),e.j41(71,"p-dialog",39),e.mxI("visibleChange",function(r){return e.DH7(i.showCategoryDialog,r)||(i.showCategoryDialog=r),r}),e.DNE(72,I,21,7,"div",40)(73,T,2,3,"ng-template",41),e.k0s()()),2&n&&(e.R7$(14),e.Y8G("outlined",!0)("rounded",!0),e.R7$(9),e.JRh(i.categories.length),e.R7$(9),e.JRh(i.getActiveCategories()),e.R7$(9),e.JRh(i.getRootCategories()),e.R7$(11),e.R50("ngModel",i.searchTerm),e.R7$(4),e.R50("ngModel",i.selectedStatus),e.Y8G("options",i.statusOptions),e.R7$(4),e.R50("ngModel",i.selectedParentId),e.Y8G("options",i.parentOptions),e.R7$(2),e.Y8G("outlined",!0),e.R7$(4),e.SpI("Category List (",i.filteredCategories.length,")"),e.R7$(3),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(),e.Aen(e.lJ4(21,j)),e.R50("visible",i.showCategoryDialog),e.Y8G("header",null!=i.editingCategory&&i.editingCategory.id?"Edit Category":"Add Category")("modal",!0)("closable",!i.saving),e.R7$(),e.Y8G("ngIf",i.editingCategory))},dependencies:[d.MD,d.bT,d.vh,g.YN,g.me,g.BC,g.vS,u.tm,u.$n,p.Ei,_.bG,_.XI,m.Ph,m.lG,C.um,C.Sm,h.kr,h.ms,b.Z2,v.EJ,v.Ex,y.FP,y.TM,f.MB,f.y8],encapsulation:2})}return o})()}}]);