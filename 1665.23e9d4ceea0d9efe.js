"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[1665],{1665:(Te,E,u)=>{u.r(E),u.d(E,{PlanningCreatePlanComponent:()=>Me});var _=u(467),e=u(1360),h=u(9377),f=u(2881),m=u(9417),b=u(8537),C=u(1570),x=u(1141),F=u(5430),P=u(6221),j=u(1823),w=u(1413),M=u(152),S=u(3294),D=u(5558),R=u(6354),O=u(9437),k=u(7673),B=u(8512),T=u(5779);const A=["createPlanMap"],I=()=>({width:"950px",maxWidth:"95vw"}),W=()=>[5,10,25,50],N=()=>({"min-width":"100%"}),V=(a,s,n)=>({"bg-orange-50 border-l-4 border-l-orange-500":a,"bg-white hover:bg-orange-50/50":s,"bg-gray-50/50 hover:bg-orange-50/50":n});function $(a,s){1&a&&(e.j41(0,"div",143)(1,"div",144),e.nrm(2,"div",145),e.j41(3,"span",146),e.EFF(4,"\u0110ang t\u1ea3i b\u1ea3n \u0111\u1ed3..."),e.k0s()()())}function G(a,s){if(1&a&&(e.j41(0,"div",147),e.EFF(1),e.k0s()),2&a){const n=e.XpG();e.R7$(),e.SpI(" \u2713 ",n.timelineWarehouses.length," b\u01b0u c\u1ee5c \u0111\xe3 ch\u1ecdn ")}}function L(a,s){1&a&&(e.j41(0,"div",148),e.nrm(1,"div",149),e.k0s())}function z(a,s){if(1&a){const n=e.RV6();e.j41(0,"div",152),e.bIt("click",function(){const t=e.eBV(n).$implicit,i=e.XpG(2);return e.Njj(i.onWarehouseResultClick(t))}),e.j41(1,"div",153),e.EFF(2),e.k0s(),e.j41(3,"div",154)(4,"div",155),e.EFF(5),e.k0s(),e.j41(6,"div",156),e.EFF(7),e.k0s()()()}if(2&a){const n=s.$implicit,o=s.index;e.R7$(2),e.JRh(o+1),e.R7$(3),e.JRh(n.warehouse_name),e.R7$(2),e.Lme("",n.district_name,", ",n.province_name,"")}}function Y(a,s){if(1&a&&(e.j41(0,"div",150),e.DNE(1,z,8,4,"div",151),e.k0s()),2&a){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.warehouseSuggestions)}}function X(a,s){if(1&a){const n=e.RV6();e.j41(0,"button",157),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.clearAllPoints())}),e.qSk(),e.j41(1,"svg",158),e.nrm(2,"path",159),e.k0s()()}}function U(a,s){if(1&a){const n=e.RV6();e.j41(0,"div",162)(1,"div",163),e.EFF(2),e.k0s(),e.j41(3,"div",154)(4,"div",164),e.EFF(5),e.k0s(),e.j41(6,"div",156),e.EFF(7),e.k0s()(),e.j41(8,"button",165),e.bIt("click",function(){const t=e.eBV(n).$implicit,i=e.XpG(2);return e.Njj(i.removeFromTimeline(t))}),e.qSk(),e.j41(9,"svg",166),e.nrm(10,"path",167),e.k0s()()()}if(2&a){const n=s.$implicit,o=s.index;e.R7$(2),e.SpI(" ",o+1," "),e.R7$(3),e.JRh(n.warehouse_name),e.R7$(2),e.Lme("",n.district_name,", ",n.province_name,"")}}function H(a,s){if(1&a&&(e.j41(0,"div",160),e.DNE(1,U,11,4,"div",161),e.k0s()),2&a){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.timelineWarehouses)}}function K(a,s){1&a&&(e.j41(0,"div",168)(1,"div"),e.qSk(),e.j41(2,"svg",169),e.nrm(3,"path",48),e.k0s(),e.joV(),e.j41(4,"p",170),e.EFF(5,"Ch\u01b0a c\xf3 b\u01b0u c\u1ee5c n\xe0o"),e.k0s(),e.j41(6,"p",171),e.EFF(7,"Ch\u1ecdn v\xf9ng ho\u1eb7c t\xecm ki\u1ebfm \u0111\u1ec3 th\xeam"),e.k0s()()())}function J(a,s){if(1&a&&(e.j41(0,"option",172),e.EFF(1),e.k0s()),2&a){const n=s.$implicit;e.Y8G("value",n.code),e.R7$(),e.Lme(" ",n.code," - ",n.name," ")}}function Q(a,s){1&a&&(e.j41(0,"div",177)(1,"div",144),e.nrm(2,"div",178),e.j41(3,"p",179),e.EFF(4,"\u0110ang t\u1ea3i danh s\xe1ch b\u01b0u c\u1ee5c..."),e.k0s()()())}function Z(a,s){if(1&a&&(e.j41(0,"div",180)(1,"div",181)(2,"div",182),e.qSk(),e.j41(3,"svg",61),e.nrm(4,"path",183),e.k0s()(),e.joV(),e.j41(5,"span",184),e.EFF(6),e.k0s()()()),2&a){const n=e.XpG(2);e.R7$(6),e.JRh(n.modalWarehousesError)}}function q(a,s){if(1&a){const n=e.RV6();e.j41(0,"tr",203),e.bIt("click",function(){const t=e.eBV(n).$implicit,i=e.XpG(3);return e.Njj(i.toggleWarehouseSelection(t))}),e.j41(1,"td",204),e.bIt("click",function(t){return e.eBV(n),e.Njj(t.stopPropagation())}),e.j41(2,"input",197),e.bIt("change",function(){const t=e.eBV(n).$implicit,i=e.XpG(3);return e.Njj(i.toggleWarehouseSelection(t))}),e.k0s()(),e.j41(3,"td",205),e.EFF(4),e.k0s(),e.j41(5,"td",206)(6,"div",207),e.EFF(7),e.k0s()(),e.j41(8,"td",206)(9,"div",208),e.EFF(10),e.k0s()(),e.j41(11,"td",209),e.EFF(12),e.k0s()()}if(2&a){const n=s.$implicit,o=s.index,t=e.XpG(3);e.R7$(2),e.Y8G("checked",t.isWarehouseSelectedInModal(n)),e.R7$(2),e.JRh(o+1),e.R7$(3),e.JRh(n.warehouse_name),e.R7$(3),e.Lme("",n.district_name||"-",", ",n.province_name||"-",""),e.R7$(2),e.JRh(n.warehouse_id)}}function ee(a,s){if(1&a){const n=e.RV6();e.j41(0,"div",173)(1,"div",185)(2,"div",181)(3,"div",186),e.EFF(4," T\u1ed5ng: "),e.j41(5,"span",187),e.EFF(6),e.k0s()(),e.nrm(7,"div",188),e.j41(8,"div",189),e.EFF(9," \u0110\xe3 ch\u1ecdn: "),e.j41(10,"span",190),e.EFF(11),e.k0s()()(),e.j41(12,"div",45)(13,"button",191),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.selectAllWarehousesInModal())}),e.EFF(14," \u2713 T\u1ea5t c\u1ea3 "),e.k0s(),e.j41(15,"button",192),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.deselectAllWarehousesInModal())}),e.EFF(16," \u2715 B\u1ecf ch\u1ecdn "),e.k0s()()(),e.j41(17,"div",193)(18,"table",194)(19,"thead",195)(20,"tr")(21,"th",196)(22,"input",197),e.bIt("change",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.modalSelectedWarehouses.size===t.modalWarehouses.length?t.deselectAllWarehousesInModal():t.selectAllWarehousesInModal())}),e.k0s()(),e.j41(23,"th",198),e.EFF(24,"STT"),e.k0s(),e.j41(25,"th",199),e.EFF(26,"T\xean b\u01b0u c\u1ee5c"),e.k0s(),e.j41(27,"th",199),e.EFF(28,"\u0110\u1ecba ch\u1ec9"),e.k0s(),e.j41(29,"th",200),e.EFF(30,"ID"),e.k0s()()(),e.j41(31,"tbody",201),e.DNE(32,q,13,6,"tr",202),e.k0s()()()()}if(2&a){const n=e.XpG(2);e.R7$(6),e.JRh(n.modalWarehouses.length),e.R7$(5),e.JRh(n.modalSelectedWarehouses.size),e.R7$(2),e.Y8G("disabled",n.modalSelectedWarehouses.size===n.modalWarehouses.length),e.R7$(2),e.Y8G("disabled",0===n.modalSelectedWarehouses.size),e.R7$(7),e.Y8G("checked",n.modalSelectedWarehouses.size===n.modalWarehouses.length&&n.modalWarehouses.length>0),e.R7$(10),e.Y8G("ngForOf",n.modalWarehouses)}}function ne(a,s){1&a&&(e.j41(0,"div",210)(1,"div",211),e.qSk(),e.j41(2,"svg",212),e.nrm(3,"path",213),e.k0s()(),e.joV(),e.j41(4,"p",214),e.EFF(5,"Kh\xf4ng c\xf3 b\u01b0u c\u1ee5c n\xe0o trong v\xf9ng n\xe0y"),e.k0s()())}function te(a,s){1&a&&(e.j41(0,"div",210)(1,"div",211),e.qSk(),e.j41(2,"svg",212),e.nrm(3,"path",35),e.k0s()(),e.joV(),e.j41(4,"p",214),e.EFF(5,"Vui l\xf2ng ch\u1ecdn v\xf9ng \u0111\u1ec3 xem danh s\xe1ch b\u01b0u c\u1ee5c"),e.k0s()())}function oe(a,s){if(1&a&&(e.j41(0,"div",173),e.DNE(1,Q,5,0,"div",174)(2,Z,7,1,"div",175)(3,ee,33,6,"div",67)(4,ne,6,0,"div",176)(5,te,6,0,"div",176),e.k0s()),2&a){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.loadingModalWarehouses),e.R7$(),e.Y8G("ngIf",n.modalWarehousesError&&!n.loadingModalWarehouses),e.R7$(),e.Y8G("ngIf",!n.loadingModalWarehouses&&!n.modalWarehousesError&&n.modalWarehouses.length>0),e.R7$(),e.Y8G("ngIf",!n.loadingModalWarehouses&&!n.modalWarehousesError&&0===n.modalWarehouses.length&&n.modalSelectedRegion),e.R7$(),e.Y8G("ngIf",!n.modalSelectedRegion)}}function ae(a,s){if(1&a&&(e.j41(0,"span"),e.EFF(1," \u0110\xe3 ch\u1ecdn "),e.j41(2,"span",87),e.EFF(3),e.k0s(),e.EFF(4," / "),e.j41(5,"span",221),e.EFF(6),e.k0s(),e.EFF(7," b\u01b0u c\u1ee5c "),e.k0s()),2&a){const n=e.XpG(2);e.R7$(3),e.JRh(n.modalSelectedWarehouses.size),e.R7$(3),e.JRh(n.modalWarehouses.length)}}function ie(a,s){1&a&&(e.j41(0,"span",222),e.EFF(1,"Vui l\xf2ng ch\u1ecdn v\xf9ng"),e.k0s())}function re(a,s){if(1&a){const n=e.RV6();e.j41(0,"div",215)(1,"div",216),e.DNE(2,ae,8,2,"span",217)(3,ie,2,0,"span",218),e.k0s(),e.j41(4,"div",45)(5,"p-button",219),e.bIt("onClick",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.closeRegionSelectionModal())}),e.k0s(),e.j41(6,"p-button",220),e.bIt("onClick",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.confirmModalSelection())}),e.k0s()()()}if(2&a){const n=e.XpG();e.R7$(2),e.Y8G("ngIf",n.modalSelectedRegion&&n.modalWarehouses.length>0),e.R7$(),e.Y8G("ngIf",!n.modalSelectedRegion),e.R7$(3),e.Y8G("disabled",!n.modalSelectedRegion||0===n.modalSelectedWarehouses.size)}}function se(a,s){if(1&a&&(e.j41(0,"div",223)(1,"div",181)(2,"div",224),e.qSk(),e.j41(3,"svg",225),e.nrm(4,"path",183),e.k0s()(),e.joV(),e.j41(5,"div")(6,"h4",226),e.EFF(7,"L\u1ed7i t\u1ea3i d\u1eef li\u1ec7u"),e.k0s(),e.j41(8,"span",227),e.EFF(9),e.k0s()()()()),2&a){const n=e.XpG();e.R7$(9),e.JRh(n.demandsError)}}function le(a,s){1&a&&(e.j41(0,"div",228)(1,"div",229)(2,"div",230),e.qSk(),e.j41(3,"svg",231),e.nrm(4,"path",232),e.k0s()(),e.joV(),e.j41(5,"div")(6,"h4",233),e.EFF(7,"Ch\u01b0a c\xf3 b\u01b0u c\u1ee5c"),e.k0s(),e.j41(8,"p",234),e.EFF(9,"Vui l\xf2ng th\xeam b\u01b0u c\u1ee5c v\xe0o timeline \u0111\u1ec3 xem d\u1eef li\u1ec7u demands."),e.k0s()()()())}function de(a,s){if(1&a&&(e.j41(0,"span",235),e.EFF(1," (Hi\u1ec3n th\u1ecb: "),e.j41(2,"span",236),e.EFF(3),e.k0s(),e.EFF(4,") "),e.k0s()),2&a){const n=e.XpG();e.R7$(3),e.JRh(n.filteredDemands.length)}}function ue(a,s){1&a&&(e.j41(0,"div",237)(1,"div",144),e.nrm(2,"div",238),e.j41(3,"span",239),e.EFF(4,"\u0110ang t\u1ea3i d\u1eef li\u1ec7u demands..."),e.k0s()()())}function ge(a,s){1&a&&(e.qSk(),e.nrm(0,"path",258))}function pe(a,s){1&a&&(e.qSk(),e.nrm(0,"path",37))}function ce(a,s){if(1&a&&(e.qSk(),e.j41(0,"svg",255),e.DNE(1,ge,1,0,"path",256)(2,pe,1,0,"path",257),e.k0s()),2&a){const n=e.XpG(3);e.R7$(),e.Y8G("ngIf","asc"===n.demandSortOrder),e.R7$(),e.Y8G("ngIf","desc"===n.demandSortOrder)}}function he(a,s){1&a&&(e.qSk(),e.nrm(0,"path",258))}function me(a,s){1&a&&(e.qSk(),e.nrm(0,"path",37))}function _e(a,s){if(1&a&&(e.qSk(),e.j41(0,"svg",255),e.DNE(1,he,1,0,"path",256)(2,me,1,0,"path",257),e.k0s()),2&a){const n=e.XpG(3);e.R7$(),e.Y8G("ngIf","asc"===n.demandSortOrder),e.R7$(),e.Y8G("ngIf","desc"===n.demandSortOrder)}}function fe(a,s){1&a&&(e.qSk(),e.nrm(0,"path",258))}function ve(a,s){1&a&&(e.qSk(),e.nrm(0,"path",37))}function Ee(a,s){if(1&a&&(e.qSk(),e.j41(0,"svg",255),e.DNE(1,fe,1,0,"path",256)(2,ve,1,0,"path",257),e.k0s()),2&a){const n=e.XpG(3);e.R7$(),e.Y8G("ngIf","asc"===n.demandSortOrder),e.R7$(),e.Y8G("ngIf","desc"===n.demandSortOrder)}}function be(a,s){if(1&a){const n=e.RV6();e.j41(0,"tr")(1,"th",245)(2,"button",246),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.sortDemands("warehouse_name"))}),e.EFF(3," B\u01b0u c\u1ee5c "),e.DNE(4,ce,3,2,"svg",247),e.k0s()(),e.j41(5,"th",248)(6,"button",249),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.sortDemands("total_pick"))}),e.EFF(7," T\u1ed5ng L\u1ea5y "),e.DNE(8,_e,3,2,"svg",247),e.k0s()(),e.j41(9,"th",248)(10,"button",249),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.sortDemands("total_deliver"))}),e.EFF(11," T\u1ed5ng Giao "),e.DNE(12,Ee,3,2,"svg",247),e.k0s()(),e.j41(13,"th",250)(14,"div",251)(15,"span"),e.EFF(16,"Ca"),e.k0s(),e.j41(17,"button",252),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.openShiftEditorModal())}),e.qSk(),e.j41(18,"svg",253),e.nrm(19,"path",254),e.k0s()()()(),e.joV(),e.j41(20,"th",248),e.EFF(21," T\u1ec9 l\u1ec7 (L\u1ea5y/Giao) "),e.k0s()()}if(2&a){const n=e.XpG(2);e.R7$(4),e.Y8G("ngIf","warehouse_name"===n.demandSortField),e.R7$(4),e.Y8G("ngIf","total_pick"===n.demandSortField),e.R7$(4),e.Y8G("ngIf","total_deliver"===n.demandSortField)}}function Ce(a,s){if(1&a&&(e.j41(0,"option",172),e.EFF(1),e.k0s()),2&a){const n=s.$implicit;e.Y8G("value",s.index),e.R7$(),e.E5c(" ",n.name," (",n.start_hour,":00 - ",n.end_hour,":00) ")}}function xe(a,s){if(1&a){const n=e.RV6();e.j41(0,"tr",259),e.bIt("click",function(){const t=e.eBV(n).$implicit,i=e.XpG(2);return e.Njj(i.selectDemand(t))}),e.j41(1,"td",260)(2,"div")(3,"div",261),e.EFF(4),e.k0s(),e.j41(5,"div",262),e.EFF(6),e.k0s()()(),e.j41(7,"td",263)(8,"span",264),e.EFF(9),e.nI1(10,"number"),e.k0s()(),e.j41(11,"td",263)(12,"span",264),e.EFF(13),e.nI1(14,"number"),e.k0s()(),e.j41(15,"td",265),e.bIt("click",function(t){return e.eBV(n),e.Njj(t.stopPropagation())}),e.j41(16,"select",266),e.bIt("change",function(t){const i=e.eBV(n).$implicit,r=e.XpG(2);return e.Njj(r.setDemandShift(i,+t.target.value))}),e.j41(17,"option",172),e.EFF(18,"\u2014"),e.k0s(),e.DNE(19,Ce,2,4,"option",66),e.k0s()(),e.j41(20,"td",263)(21,"span",87),e.EFF(22),e.k0s()()()}if(2&a){const n=s.$implicit,o=s.rowIndex,t=e.XpG(2);e.Y8G("ngClass",e.sMw(13,V,t.isDemandSelected(n),!t.isDemandSelected(n)&&o%2==0,!t.isDemandSelected(n)&&o%2==1)),e.R7$(4),e.JRh(n.warehouse_name||"\u2014"),e.R7$(2),e.SpI("ID: ",n.warehouse_id,""),e.R7$(3),e.JRh(e.bMT(10,9,n.total_pick)),e.R7$(4),e.JRh(e.bMT(14,11,n.total_deliver)),e.R7$(3),e.Y8G("value",t.demandShiftAssignment.get(n.warehouse_id||n.id)),e.R7$(),e.Y8G("value",void 0),e.R7$(2),e.Y8G("ngForOf",t.shifts),e.R7$(3),e.JRh(t.formatRatio(t.getDemandRatio(n)))}}function Pe(a,s){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&a){const n=e.XpG(3);e.R7$(),e.SpI('Kh\xf4ng t\xecm th\u1ea5y k\u1ebft qu\u1ea3 cho "',n.demandSearchQuery,'"')}}function ke(a,s){1&a&&(e.j41(0,"span"),e.EFF(1,"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"),e.k0s())}function ye(a,s){if(1&a){const n=e.RV6();e.j41(0,"button",273),e.bIt("click",function(){e.eBV(n);const t=e.XpG(3);return e.Njj(t.clearSearch())}),e.EFF(1," X\xf3a b\u1ed9 l\u1ecdc "),e.k0s()}}function Fe(a,s){if(1&a&&(e.j41(0,"tr")(1,"td",267)(2,"div",268),e.qSk(),e.j41(3,"svg",269),e.nrm(4,"path",270),e.k0s(),e.joV(),e.j41(5,"div",271),e.DNE(6,Pe,2,1,"span",217)(7,ke,2,0,"span",217),e.k0s(),e.DNE(8,ye,2,0,"button",272),e.k0s()()()),2&a){const n=e.XpG(2);e.R7$(6),e.Y8G("ngIf",n.demandSearchQuery),e.R7$(),e.Y8G("ngIf",!n.demandSearchQuery),e.R7$(),e.Y8G("ngIf",n.demandSearchQuery)}}function je(a,s){if(1&a&&(e.j41(0,"div",240)(1,"p-table",241),e.DNE(2,be,22,3,"ng-template",242)(3,xe,23,17,"ng-template",243)(4,Fe,9,3,"ng-template",244),e.k0s()()),2&a){const n=e.XpG();e.R7$(),e.Y8G("value",n.filteredDemands)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.lJ4(7,W))("tableStyle",e.lJ4(8,N))("responsiveLayout","scroll")}}function we(a,s){1&a&&(e.j41(0,"div",237)(1,"div",144),e.qSk(),e.j41(2,"svg",274),e.nrm(3,"path",213),e.k0s(),e.joV(),e.j41(4,"p",275),e.EFF(5,"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u s\u1ea3n l\u01b0\u1ee3ng"),e.k0s()()())}let Me=(()=>{class a{platformId;cdr;datasetService;mapContainerRef;currentStep=1;warehouseRegionShortname="HNO";availableRegions=[{code:"HNO",name:"H\xe0 N\u1ed9i"},{code:"HCM",name:"H\u1ed3 Ch\xed Minh"},{code:"HPG",name:"H\u1ea3i Ph\xf2ng"},{code:"DAD",name:"\u0110\xe0 N\u1eb5ng"},{code:"CXR",name:"C\u1ea7n Th\u01a1"},{code:"HAN",name:"H\xe0 Nam"},{code:"VPC",name:"V\u0129nh Ph\xfac"},{code:"HPH",name:"H\u1ea3i Ph\xf2ng"},{code:"QNH",name:"Qu\u1ea3ng Ninh"},{code:"BNH",name:"B\u1eafc Ninh"}];warehouseSearchQuery="";warehouseSuggestions=[];warehouseAutoLoading=!1;timelineWarehouses=[];selectedWarehouse=null;warehouseAutoCompleteSubject=new w.B;warehouses=[];loadingWarehouses=!1;warehousesError=null;showRegionSelectionModal=!1;modalSelectedRegion="";modalWarehouses=[];modalSelectedWarehouses=new Set;loadingModalWarehouses=!1;modalWarehousesError=null;map=null;markerLayer=null;markersById=new Map;mapLoaded=!1;VIETNAM_BOUNDS=[8.5,102,23.5,110];demands=[];loadingDemands=!1;demandsError=null;selectedDemand=null;demandSearchQuery="";demandSortField=null;demandSortOrder="desc";shifts=[{name:"s\xe1ng",start_hour:6,end_hour:10},{name:"tr\u01b0a",start_hour:10,end_hour:14},{name:"chi\u1ec1u",start_hour:14,end_hour:18},{name:"t\u1ed1i",start_hour:18,end_hour:22}];showShiftEditorModal=!1;shiftErrors=[];hours=Array.from({length:24},(n,o)=>o);hoursInclusive=Array.from({length:25},(n,o)=>o);demandShiftAssignment=new Map;constructor(n,o,t){this.platformId=n,this.cdr=o,this.datasetService=t}ngOnInit(){const o=new Date(new Date);o.setDate(o.getDate()-30),this.warehouseAutoCompleteSubject.pipe((0,M.B)(300),(0,S.F)(),(0,D.n)(t=>!t||t.length<1?(0,k.of)([]):(this.warehouseAutoLoading=!0,this.datasetService.getWarehouses({region_shortname:this.warehouseRegionShortname,size:5,search:t}).pipe((0,R.T)(i=>{this.warehouseAutoLoading=!1;const r=i;return Array.isArray(r.data)?r.data:r.data?.data||[]}),(0,O.W)(i=>(console.error("[PlanningCreatePlan] warehouse autocomplete error",i),this.warehouseAutoLoading=!1,(0,k.of)([]))))))).subscribe(t=>{this.warehouseSuggestions=(t||[]).slice(0,5),this.cdr.detectChanges()}),(0,h.UE)(this.platformId)&&typeof window<"u"&&(window.goToCreatePlanStep=t=>this.goToCreatePlanStep(t))}ngOnDestroy(){if((0,h.UE)(this.platformId)&&(this.map&&(this.map.remove(),this.map=null),typeof window<"u"))try{window.goToCreatePlanStep&&delete window.goToCreatePlanStep}catch{}}ngAfterViewInit(){var n=this;return(0,_.A)(function*(){(0,h.UE)(n.platformId)&&(yield new Promise(o=>setTimeout(o,300)),yield n.initMap(),yield new Promise(o=>setTimeout(o,200)),n.cdr.detectChanges())})()}goToCreatePlanStep(n){(0,h.UE)(this.platformId)&&(n<1||n>5||(this.currentStep=n,console.log("[PlanningCreatePlan] Going to step:",n),2===n&&this.timelineWarehouses.length>0&&this.loadDemands(),this.cdr.detectChanges()))}onWarehouseRegionChange(n){this.warehouseRegionShortname=n,this.warehouseCurrentPage=1,this.loadingWarehouses=!0,this.warehousesError=null,this.datasetService.getWarehouses({region_shortname:this.warehouseRegionShortname,size:1e3,offset:0,search:""}).subscribe({next:t=>{try{const i=t,r=Array.isArray(i.data)?i.data:i.data?.data||[];this.warehouses=r||[],Array.isArray(i.data);let l=0;for(const g of this.warehouses)this.timelineWarehouses.find(d=>(d.warehouse_id||d.id)===(g.warehouse_id||g.id))||(this.timelineWarehouses.push(g),l++);l>0&&(console.log(`[PlanningCreatePlan] Auto-added ${l} warehouses to timeline for region ${this.warehouseRegionShortname}`),this.renderAllPointsOnMap()),this.warehouseSuggestions=[],this.warehouseSearchQuery=""}catch(i){console.error("[PlanningCreatePlan] onWarehouseRegionChange processing error",i),this.warehousesError="L\u1ed7i khi x\u1eed l\xfd danh s\xe1ch b\u01b0u c\u1ee5c"}this.loadingWarehouses=!1,this.cdr.detectChanges()},error:t=>{console.error("[PlanningCreatePlan] onWarehouseRegionChange error",t),this.warehousesError=t.message||"L\u1ed7i khi t\u1ea3i danh s\xe1ch b\u01b0u c\u1ee5c",this.loadingWarehouses=!1,this.cdr.detectChanges()}})}onWarehouseAutoComplete(n){this.warehouseAutoCompleteSubject.next(n&&n.query?n.query:n||"")}onWarehouseAutoSelect(n){const o=n;o&&(this.warehouseSearchQuery=o.warehouse_name||"",this.warehouseSuggestions=[],this.selectWarehouse(o),this.addToTimeline(o),this.cdr.detectChanges())}onWarehouseResultClick(n){n&&(this.warehouseSearchQuery=n.warehouse_name||"",this.warehouseSuggestions=[],this.selectWarehouse(n),this.addToTimeline(n),this.cdr.detectChanges())}selectWarehouse(n){this.selectedWarehouse=n,this.updateMapForSelection(n)}updateMapForSelection(n){var o=this;return(0,_.A)(function*(){if(!(0,h.UE)(o.platformId)||!n||!o.map)return;const t=Number(n.latitude),i=Number(n.longitude);if(t&&i&&!isNaN(t)&&!isNaN(i))try{yield u.e(8244).then(u.t.bind(u,8244,23));const l=(n.warehouse_id||n.id||"").toString(),g=o.markersById.get(l);if(g)try{g.openPopup(),o.map.setView(g.getLatLng?g.getLatLng():[t,i],13)}catch(d){console.error("[PlanningCreatePlan] Error opening popup for existing marker:",d)}}catch(r){console.error("[PlanningCreatePlan] Error updating map for selection:",r)}else console.warn("[PlanningCreatePlan] Invalid coordinates for selected warehouse:",n.warehouse_name)})()}addToTimeline(n){this.timelineWarehouses.find(o=>(o.warehouse_id||o.id)===(n.warehouse_id||n.id))?console.log("[PlanningCreatePlan] Warehouse already in timeline:",n.warehouse_name):(this.timelineWarehouses.push(n),console.log("[PlanningCreatePlan] Added warehouse to timeline:",n.warehouse_name),this.addPointToMap(n,this.timelineWarehouses.length-1),this.cdr.detectChanges())}removeFromTimeline(n){const o=this.timelineWarehouses.findIndex(t=>(t.warehouse_id||t.id)===(n.warehouse_id||n.id));o>-1&&(this.timelineWarehouses.splice(o,1),this.removePointFromMap(n),this.renderAllPointsOnMap(),this.cdr.detectChanges())}isInTimeline(n){return this.timelineWarehouses.some(o=>(o.warehouse_id||o.id)===(n.warehouse_id||n.id))}clearAllPoints(){this.timelineWarehouses=[],this.clearMapMarkers(),this.cdr.detectChanges()}get selectedPoints(){return this.timelineWarehouses}initMap(){var n=this;return(0,_.A)(function*(){if((0,h.UE)(n.platformId)){if(n.map)return void console.log("[PlanningCreatePlan] Map already initialized");try{const o="leaflet-css-planning";if(!document.getElementById(o)){const v=document.createElement("link");v.id=o,v.rel="stylesheet",v.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(v),yield new Promise(Be=>setTimeout(Be,100))}const t=yield u.e(8244).then(u.t.bind(u,8244,23));let i=n.mapContainerRef?.nativeElement||null;if(i||(i=document.getElementById("cp_route_map")),!i)return console.error("[PlanningCreatePlan] Map container not found. ViewChild:",n.mapContainerRef),void setTimeout(()=>n.initMap(),500);const r=i;console.log("[PlanningCreatePlan] Initializing map on container:",r);const[l,g,d,c]=n.VIETNAM_BOUNDS,p=[21.0278,105.8342],Se=p[0],De=p[1],Re=t.latLng(l,g),Oe=t.latLng(d,c),y=t.latLngBounds(Re,Oe);delete t.Icon.Default.prototype._getIconUrl,t.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),n.map=t.map(r,{center:[Se,De],zoom:6,zoomControl:!0,minZoom:5,maxZoom:18,maxBounds:y,maxBoundsViscosity:.8}),t.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors",maxZoom:19}).addTo(n.map),n.markerLayer=t.layerGroup().addTo(n.map),n.map.fitBounds(y,{padding:[40,40],maxZoom:6}),setTimeout(()=>{n.map&&n.map.invalidateSize()},100),setTimeout(()=>{n.map&&(n.map.invalidateSize(),n.mapLoaded=!0,console.log("[PlanningCreatePlan] Map initialized successfully"),n.cdr.detectChanges())},300)}catch(o){console.error("[PlanningCreatePlan] Error initializing map:",o),n.mapLoaded=!1,n.cdr.detectChanges(),setTimeout(()=>{n.map||(console.log("[PlanningCreatePlan] Retrying map initialization..."),n.initMap())},1e3)}}})()}addPointToMap(n,o){var t=this;return(0,_.A)(function*(){if(!(0,h.UE)(t.platformId)||!t.map&&(yield t.initMap(),!t.map))return;const i=Number(n.latitude),r=Number(n.longitude);if(i&&r&&!isNaN(i)&&!isNaN(r))try{const l=yield u.e(8244).then(u.t.bind(u,8244,23)),g=(n.warehouse_id||n.id||"").toString(),c=l.divIcon({html:`\n        <div style="position: relative; display: inline-block; width: 40px; height: 40px;">\n          <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">\n            <circle cx="20" cy="20" r="18" fill="var(--p-primary-500)" stroke="white" stroke-width="2"/>\n          </svg>\n          <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); \n                      width: 24px; height: 24px; background-color: rgba(var(--p-primary-500), 0.95); \n                      border-radius: 50%; border: 2px solid white;\n                      display: flex; align-items: center; justify-content: center;\n                      color: white; font-weight: bold; font-size: 12px; \n                      text-shadow: 0 1px 2px rgba(0,0,0,0.2);\n                      box-shadow: 0 2px 4px rgba(0,0,0,0.3);">\n            ${o+1}\n          </div>\n        </div>\n      `,className:"custom-point-marker",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]}),p=l.marker([i,r],{icon:c});p.bindPopup(`\n        <div style="min-width: 200px;">\n          <h4 style="margin: 0 0 8px; font-weight: 600; color: #111827;">${n.warehouse_name||"Unknown"}</h4>\n          <div style="font-size: 12px; color: #6b7280;">\n            <div>\u{1f4cd} ${n.warehouse_address||"Ch\u01b0a c\xf3 \u0111\u1ecba ch\u1ec9"}</div>\n            <div>\u{1f3e2} ${n.district_name||""}, ${n.province_name||""}</div>\n            <div>\u{1f194} ID: ${n.warehouse_id||n.id||"N/A"}</div>\n          </div>\n        </div>\n      `),p.addTo(t.markerLayer),t.markersById.set(g,p),t.fitMapToPoints(),console.log("[PlanningCreatePlan] Added marker for point:",n.warehouse_name)}catch(l){console.error("[PlanningCreatePlan] Error adding point to map:",l)}else console.warn("[PlanningCreatePlan] Invalid coordinates for warehouse:",n.warehouse_name)})()}removePointFromMap(n){const o=(n.warehouse_id||n.id||"").toString(),t=this.markersById.get(o);t&&this.markerLayer&&(this.markerLayer.removeLayer(t),this.markersById.delete(o))}clearMapMarkers(){this.markerLayer&&this.markerLayer.clearLayers(),this.markersById.clear()}renderAllPointsOnMap(){var n=this;return(0,_.A)(function*(){n.clearMapMarkers();for(let o=0;o<n.timelineWarehouses.length;o++)yield n.addPointToMap(n.timelineWarehouses[o],o);n.fitMapToPoints()})()}fitMapToPoints(){if(this.map&&0!==this.timelineWarehouses.length)try{const[n,o,t,i]=this.VIETNAM_BOUNDS,r=this.timelineWarehouses.map(l=>{const g=Number(l.latitude),d=Number(l.longitude);return!g||!d||isNaN(g)||isNaN(d)?null:[Math.max(n,Math.min(t,g)),Math.max(o,Math.min(i,d))]}).filter(l=>null!==l);if(0===r.length)return void this.fitMapToVietnam();u.e(8244).then(u.t.bind(u,8244,23)).then(l=>{if(1===r.length){const[g,d]=r[0],c=Math.max(n,Math.min(t,g)),p=Math.max(o,Math.min(i,d));this.map.setView([c,p],13)}else{const g=l.latLngBounds(r);try{this.map.fitBounds(g,{padding:[40,40],maxZoom:12})}catch(d){console.warn("[PlanningCreatePlan] Error fitting to points bounds, using Vietnam bounds:",d),this.fitMapToVietnam()}}})}catch(n){console.error("[PlanningCreatePlan] Error fitting map to points:",n),this.fitMapToVietnam()}else this.fitMapToVietnam()}fitMapToVietnam(){if(this.map)try{u.e(8244).then(u.t.bind(u,8244,23)).then(n=>{const[o,t,i,r]=this.VIETNAM_BOUNDS,l=n.latLng(o,t),g=n.latLng(i,r),d=n.latLngBounds(l,g);this.map.fitBounds(d,{padding:[40,40],maxZoom:6})})}catch(n){console.error("[PlanningCreatePlan] Error fitting map to Vietnam:",n)}}getRegionName(n){const o=this.availableRegions.find(t=>t.code===n);return o?o.name:n}getTotalDemandWeight(){return this.demands&&0!==this.demands.length?this.demands.reduce((n,o)=>n+(o.weight_kg||o.weight||0),0):0}getFormattedTotalDemandWeight(){return this.getTotalDemandWeight().toLocaleString()}get selectedRegion(){return this.warehouseRegionShortname}set selectedRegion(n){this.warehouseRegionShortname=n}onRegionChange(n){this.onWarehouseRegionChange(n)}warehouseCurrentPage=1;openRegionSelectionModal(){this.showRegionSelectionModal=!0,this.modalSelectedRegion=this.warehouseRegionShortname||"",this.modalSelectedWarehouses.clear(),this.modalWarehouses=[],this.modalWarehousesError=null,this.modalSelectedRegion&&this.loadWarehousesForModal()}closeRegionSelectionModal(){this.showRegionSelectionModal=!1,this.modalSelectedWarehouses.clear(),this.modalWarehouses=[],this.modalWarehousesError=null}onModalRegionChange(){this.modalSelectedWarehouses.clear(),this.modalWarehouses=[],this.modalWarehousesError=null,this.modalSelectedRegion&&this.loadWarehousesForModal()}loadWarehousesForModal(){this.modalSelectedRegion&&(this.loadingModalWarehouses=!0,this.modalWarehousesError=null,this.datasetService.getWarehouses({region_shortname:this.modalSelectedRegion,size:1e3,offset:0,search:""}).subscribe({next:o=>{try{const t=o,i=Array.isArray(t.data)?t.data:t.data?.data||[];this.modalWarehouses=i||[],this.modalSelectedWarehouses.clear();for(const r of this.modalWarehouses){const l=(r.warehouse_id||r.id)?.toString();l&&this.isInTimeline(r)&&this.modalSelectedWarehouses.add(l)}}catch(t){console.error("[PlanningCreatePlan] loadWarehousesForModal error",t),this.modalWarehousesError="L\u1ed7i khi t\u1ea3i danh s\xe1ch b\u01b0u c\u1ee5c"}this.loadingModalWarehouses=!1,this.cdr.detectChanges()},error:o=>{console.error("[PlanningCreatePlan] loadWarehousesForModal error",o),this.modalWarehousesError=o.message||"L\u1ed7i khi t\u1ea3i danh s\xe1ch b\u01b0u c\u1ee5c",this.loadingModalWarehouses=!1,this.cdr.detectChanges()}}))}toggleWarehouseSelection(n){const o=(n.warehouse_id||n.id)?.toString();o&&(this.modalSelectedWarehouses.has(o)?this.modalSelectedWarehouses.delete(o):this.modalSelectedWarehouses.add(o),this.cdr.detectChanges())}isWarehouseSelectedInModal(n){const o=(n.warehouse_id||n.id)?.toString();return!!o&&this.modalSelectedWarehouses.has(o)}selectAllWarehousesInModal(){this.modalSelectedWarehouses.clear();for(const n of this.modalWarehouses){const o=(n.warehouse_id||n.id)?.toString();o&&this.modalSelectedWarehouses.add(o)}this.cdr.detectChanges()}deselectAllWarehousesInModal(){this.modalSelectedWarehouses.clear(),this.cdr.detectChanges()}confirmModalSelection(){if(!this.modalSelectedRegion||0===this.modalSelectedWarehouses.size)return void console.warn("[PlanningCreatePlan] No region or warehouses selected");this.modalSelectedRegion!==this.warehouseRegionShortname&&(this.warehouseRegionShortname=this.modalSelectedRegion);const o=[];for(const i of this.timelineWarehouses){const r=(i.warehouse_id||i.id)?.toString();r&&this.modalWarehouses.some(g=>(g.warehouse_id||g.id)?.toString()===r)&&!this.modalSelectedWarehouses.has(r)&&o.push(i)}for(const i of o){const r=this.timelineWarehouses.findIndex(l=>(l.warehouse_id||l.id)?.toString()===(i.warehouse_id||i.id)?.toString());r>-1&&this.timelineWarehouses.splice(r,1)}let t=0;for(const i of this.modalWarehouses){const r=(i.warehouse_id||i.id)?.toString();r&&this.modalSelectedWarehouses.has(r)&&(this.isInTimeline(i)||(this.timelineWarehouses.push(i),t++))}console.log(`[PlanningCreatePlan] Updated timeline: ${t} added, ${o.length} removed, ${this.timelineWarehouses.length} total`),this.renderAllPointsOnMap(),this.closeRegionSelectionModal(),this.cdr.detectChanges()}loadDemands(){if(0===this.timelineWarehouses.length)return console.log("[PlanningCreatePlan] loadDemands: No warehouses in timeline, skipping"),this.loadingDemands=!1,this.demands=[],void this.cdr.detectChanges();console.log("[PlanningCreatePlan] loadDemands: Starting, timelineWarehouses.length:",this.timelineWarehouses.length),this.loadingDemands=!0,this.demandsError=null,this.cdr.detectChanges();const n=this.timelineWarehouses.map(d=>d.warehouse_id||d.id).map(d=>Number(d)).filter(d=>!isNaN(d)),o=new Date,t=o.toISOString().slice(0,10),g={warehouse_ids:n,time_range:{start:new Date(o.getTime()-25056e5).toISOString().slice(0,10),end:t}};console.log("[PlanningCreatePlan] loadDemands: Starting with payload:",g),this.datasetService.getDemandsWithTimeRange(g).subscribe({next:d=>{console.log("[PlanningCreatePlan] getDemandsWithTimeRange response:",d);try{let c=[];if(d&&"object"==typeof d){if("ok"in d&&d.ok&&"data"in d){const p=d.data;c=Array.isArray(p)?p:p&&(p.data||p)||[]}else if(Array.isArray(d))c=d;else if("data"in d){const p=d.data;c=Array.isArray(p)?p:[]}}else Array.isArray(d)&&(c=d);console.log("[PlanningCreatePlan] Parsed demands data:",c),this.demands=c,this.demandsError=null,!this.selectedDemand&&c.length>0&&(this.selectedDemand=c[0])}catch(c){console.error("[PlanningCreatePlan] Error parsing demands response:",c),this.demandsError="L\u1ed7i khi x\u1eed l\xfd d\u1eef li\u1ec7u demands",this.demands=[]}this.loadingDemands=!1,this.cdr.detectChanges(),console.log("[PlanningCreatePlan] loadDemands completed. loadingDemands:",this.loadingDemands,"demands.length:",this.demands.length)},error:d=>{console.error("[PlanningCreatePlan] getDemandsWithTimeRange error:",d),this.demandsError=d?.message||"L\u1ed7i khi t\u1ea3i demands",this.demands=[],this.loadingDemands=!1,this.cdr.detectChanges()}})}get filteredDemands(){let n=[...this.demands||[]];if(this.demandSearchQuery&&this.demandSearchQuery.trim()){const o=this.demandSearchQuery.toLowerCase().trim();n=n.filter(t=>(t.warehouse_name||"").toLowerCase().includes(o)||(t.warehouse_id?.toString()||"").includes(o))}return this.demandSortField&&n.sort((o,t)=>{let i=o[this.demandSortField],r=t[this.demandSortField];return null==i&&(i=0),null==r&&(r=0),"asc"===this.demandSortOrder?i>r?1:i<r?-1:0:i<r?1:i>r?-1:0}),n}selectDemand(n){this.selectedDemand=n,this.cdr.detectChanges()}isDemandSelected(n){return!(!this.selectedDemand||!n)&&(this.selectedDemand.warehouse_id||this.selectedDemand.id)===(n.warehouse_id||n.id)}sortDemands(n){this.demandSortField===n?this.demandSortOrder="asc"===this.demandSortOrder?"desc":"asc":(this.demandSortField=n,this.demandSortOrder="desc"),this.cdr.detectChanges()}clearSearch(){this.demandSearchQuery="",this.cdr.detectChanges()}openShiftEditorModal(){this.showShiftEditorModal=!0,this.cdr.detectChanges()}closeShiftEditorModal(){this.showShiftEditorModal=!1,this.shiftErrors=[],this.cdr.detectChanges()}addShift(){this.shifts.push({name:"",start_hour:0,end_hour:0}),this.cdr.detectChanges()}removeShift(n){if(this.shifts.length>1){this.shifts.splice(n,1);const o=new Map;this.demandShiftAssignment.forEach((t,i)=>{t<n?o.set(i,t):t>n&&o.set(i,t-1)}),this.demandShiftAssignment=o,this.cdr.detectChanges()}}validateShifts(){this.shiftErrors=[];const n=[];for(let o=0;o<this.shifts.length;o++){const t=this.shifts[o];if(t.name&&""!==t.name.trim())if(t.start_hour>=t.end_hour)n[o]="Gi\u1edd b\u1eaft \u0111\u1ea7u ph\u1ea3i nh\u1ecf h\u01a1n gi\u1edd k\u1ebft th\xfac";else for(let i=o+1;i<this.shifts.length;i++){const r=this.shifts[i];(t.start_hour<r.end_hour&&t.end_hour>r.start_hour||r.start_hour<t.end_hour&&r.end_hour>t.start_hour)&&(n[o]="Ca b\u1ecb tr\xf9ng th\u1eddi gian v\u1edbi ca kh\xe1c",n[i]="Ca b\u1ecb tr\xf9ng th\u1eddi gian v\u1edbi ca kh\xe1c")}else n[o]="T\xean ca kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"}return this.shiftErrors=n,0===n.length||n.every(o=>!o)}saveShifts(){this.validateShifts()&&(this.closeShiftEditorModal(),this.cdr.detectChanges())}getDemandShift(n){const t=this.demandShiftAssignment.get(n.warehouse_id||n.id);return void 0!==t&&this.shifts[t]?this.shifts[t].name:"\u2014"}setDemandShift(n,o){const t=n.warehouse_id||n.id;null==o?this.demandShiftAssignment.delete(t):this.demandShiftAssignment.set(t,o),this.cdr.detectChanges()}getDemandRatio(n){return n.total_deliver&&0!==n.total_deliver?n.total_pick/n.total_deliver:n.total_pick>0?999:0}formatRatio(n){return 0===n?"0.00":n>=999?"\u221e":n.toFixed(2)}static \u0275fac=function(o){return new(o||a)(e.rXU(e.Agw),e.rXU(e.gRc),e.rXU(B.q))};static \u0275cmp=e.VBU({type:a,selectors:[["app-planning-create-plan"]],viewQuery:function(o,t){if(1&o&&e.GBs(A,5),2&o){let i;e.mGM(i=e.lsd())&&(t.mapContainerRef=i.first)}},decls:344,vars:76,consts:[["createPlanMap",""],["id","planning-create-plan",1,"planning-page"],["title","Auto Planning","subtitle","L\u1eadp l\u1ecbch t\u1ea3i t\u1ef1 \u0111\u1ed9ng - Vui l\xf2ng \u0111i\u1ec1n c\xe1c tham s\u1ed1 b\xean d\u01b0\u1edbi \u0111\u1ec3 l\u1eadp l\u1ecbch","icon","\u{1f5fa}\ufe0f"],[1,"planning-stepper-container"],[1,"planning-stepper-nav"],[1,"planning-stepper-title"],["data-step","1",1,"planning-step-item",2,"cursor","pointer",3,"click"],[1,"planning-step-indicator"],[1,"planning-step-label"],[1,"planning-step-title"],[1,"planning-step-desc"],["data-step","2",1,"planning-step-item",2,"cursor","pointer",3,"click"],["data-step","3",1,"planning-step-item",2,"cursor","pointer",3,"click"],["data-step","4",1,"planning-step-item",2,"cursor","pointer",3,"click"],["data-step","5",1,"planning-step-item",2,"cursor","pointer",3,"click"],[1,"planning-step-content"],["id","create-plan-step-1",1,"planning-step-panel"],[1,"planning-step-header"],[1,"planning-step-body"],[1,"planning-form-section"],[1,"flex","gap-4",2,"display","flex","gap","20px","min-height","650px"],[1,"flex-1",2,"flex","1.65","position","relative","background","#e5e7eb","border-radius","10px","overflow","hidden","min-height","650px","max-height","650px"],["class","absolute inset-0 z-10 flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg",4,"ngIf"],["id","cp_route_map",1,"planning-map-container",2,"width","100%","height","100%","min-height","650px","transition","opacity 0.3s"],[1,"planning-map-stats"],[1,"planning-map-stat"],[1,"stat-label"],[1,"stat-value"],[1,"flex","flex-col","space-y-3",2,"flex","0 0 400px","display","flex","flex-direction","column","gap","12px","max-height","650px","overflow-y","auto","padding-right","8px"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","p-3","flex-shrink-0"],[1,"block","text-xs","font-semibold","text-gray-700","mb-2"],[1,"text-red-500"],["type","button",1,"w-full","inline-flex","items-center","justify-between","gap-2","px-3","py-2","bg-gradient-to-r","from-orange-500","to-orange-600","hover:from-orange-600","hover:to-orange-700","text-white","text-sm","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all",3,"click"],[1,"flex","items-center","gap-2","flex-1","min-w-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"],[1,"truncate"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","mt-2 text-xs text-orange-600 font-medium",4,"ngIf"],[1,"relative"],["field","warehouse_name","styleClass","w-full text-sm",1,"w-full",3,"ngModelChange","completeMethod","onSelect","ngModel","minLength","dropdown","forceSelection","autoHighlight","placeholder","delay"],["class","absolute right-2 top-1/2 -translate-y-1/2",4,"ngIf"],["class","absolute left-0 mt-1 w-full bg-white rounded-lg shadow-lg border border-gray-200 p-2 z-50 max-h-52 overflow-auto",4,"ngIf"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","p-3","flex-shrink-0",2,"flex","1","min-height","0","display","flex","flex-direction","column"],[1,"flex","items-center","justify-between","mb-3","flex-shrink-0"],[1,"flex","items-center","gap-2"],[1,"w-6","h-6","rounded","bg-gradient-to-br","from-orange-400","to-orange-600","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","font-bold","text-gray-900"],[1,"px-2","py-0.5","bg-orange-100","text-orange-700","rounded-full","text-xs","font-semibold"],["type","button","class","px-2 py-1 text-red-500 hover:bg-red-50 rounded text-xs font-medium transition-colors","title","X\xf3a t\u1ea5t c\u1ea3",3,"click",4,"ngIf"],["class","flex-1 overflow-y-auto space-y-1.5 pr-1","style","min-height: 0;",4,"ngIf"],["class","flex-1 flex items-center justify-center text-center py-8 text-gray-400","style","min-height: 150px;",4,"ngIf"],[1,"planning-step-footer"],["type","button",1,"planning-btn","planning-btn-primary",3,"click","disabled"],["header","Ch\u1ecdn v\xf9ng v\xe0 b\u01b0u c\u1ee5c","styleClass","p-fluid",3,"visibleChange","onHide","visible","modal","closable","dismissableMask"],[1,"space-y-4"],[1,"bg-gradient-to-r","from-orange-50","to-orange-50/50","border-2","border-orange-200","rounded-xl","p-4"],[1,"flex","items-center","gap-3","mb-3"],[1,"w-10","h-10","rounded-lg","bg-orange-500","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-white"],[1,"flex-1"],[1,"block","text-sm","font-bold","text-gray-900","mb-1"],[1,"w-full","px-4","py-2.5","border-2","border-gray-300","rounded-lg","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","bg-white","text-sm","font-semibold","text-gray-900","shadow-sm","hover:border-orange-400","transition-colors",3,"ngModelChange","change","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","space-y-3",4,"ngIf"],["pTemplate","footer"],["id","create-plan-step-2",1,"planning-step-panel"],["class","bg-red-50 border-2 border-red-200 rounded-xl p-5 mb-6 shadow-sm",4,"ngIf"],["class","bg-gradient-to-r from-orange-50 to-orange-100 border-2 border-orange-200 rounded-xl p-6 mb-6 shadow-sm",4,"ngIf"],[1,"mb-6"],[1,"bg-white","border-b-2","border-orange-200","p-6"],[1,"flex","items-center","gap-4","mb-4"],[1,"w-14","h-14","rounded-2xl","bg-orange-50","flex","items-center","justify-center","shadow-sm","border","border-orange-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"],[1,"text-2xl","font-bold","mb-1","text-orange-600"],[1,"text-gray-600","text-sm"],[1,"flex","items-center","justify-between","mt-4","pt-4","border-t","border-orange-200"],[1,"flex","items-center","gap-3","text-xs"],[1,"flex","items-center","gap-1.5"],[1,"w-4","h-4","rounded","bg-green-100","border","border-green-300"],[1,"text-gray-700"],[1,"w-4","h-4","rounded","bg-red-100","border","border-red-300"],[1,"text-sm","text-gray-700","font-medium"],[1,"text-orange-600","font-bold"],["class","ml-2 text-gray-600",4,"ngIf"],[1,"p-6"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","overflow-hidden",4,"ngIf"],["type","button",1,"planning-btn","planning-btn-secondary",3,"click"],["id","create-plan-step-3",1,"planning-step-panel"],[1,"planning-fleet-actions"],[1,"planning-hint-text"],[1,"planning-action-buttons"],["type","button",1,"planning-btn","planning-btn-outline"],["type","button",1,"planning-btn","planning-btn-ghost"],[1,"planning-fleet-table"],["id","cp_fleet_table",1,"planning-empty-state"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"planning-fleet-stats"],[1,"planning-stat-card","orange"],[1,"stat-title"],[1,"planning-stat-card","orange-light"],[1,"planning-stat-card","orange-dark"],["type","button",1,"planning-btn","planning-btn-primary",3,"click"],["id","create-plan-step-4",1,"planning-step-panel"],[1,"planning-settings-grid"],[1,"planning-setting-group"],["type","number","id","cp_vehicle_speed","value","40",1,"planning-input"],["type","number","id","cp_vehicle_max_time","value","86400",1,"planning-input"],["type","number","id","cp_avg_light_weight","value","1000",1,"planning-input"],["type","number","id","cp_avg_heavy_weight","value","29000",1,"planning-input"],["type","number","id","cp_solve_time_limit","value","60",1,"planning-input"],["type","number","id","cp_start_route_time","value","240",1,"planning-input"],["type","number","id","cp_limit_duration_time","value","180",1,"planning-input"],["type","number","id","cp_depot_capacity","value","10",1,"planning-input"],["type","text","id","cp_user_id","placeholder","v\xed d\u1ee5: thienht",1,"planning-input"],["id","cp_planning_mode_select",1,"planning-select"],["value","delivery_only"],["value","pickup_and_delivery"],["value","round_trip"],["id","create-plan-step-5",1,"planning-step-panel"],[1,"planning-summary-grid"],[1,"planning-summary-section"],[1,"summary-section-header"],["type","button",1,"planning-btn-icon","small",3,"click"],[1,"summary-row"],[1,"planning-summary-estimate"],[1,"estimate-title"],[1,"estimate-value"],[1,"estimate-label"],[1,"planning-footer-actions"],["type","button",1,"planning-btn","planning-btn-primary","planning-btn-lg"],["id","cp_status_bar",1,"planning-status-bar",2,"display","none"],[1,"status-info"],["id","cp_status_text"],["id","cp_status_progress"],[1,"status-bar"],["id","cp_progress_bar",1,"status-bar-fill",2,"width","0%"],[1,"absolute","inset-0","z-10","flex","items-center","justify-center","bg-gradient-to-br","from-gray-100","to-gray-200","rounded-lg"],[1,"text-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-orange-500","mx-auto","mb-3"],[1,"text-gray-600","font-medium","text-sm"],[1,"mt-2","text-xs","text-orange-600","font-medium"],[1,"absolute","right-2","top-1/2","-translate-y-1/2"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-orange-500"],[1,"absolute","left-0","mt-1","w-full","bg-white","rounded-lg","shadow-lg","border","border-gray-200","p-2","z-50","max-h-52","overflow-auto"],["class","py-2 px-3 hover:bg-orange-50 cursor-pointer flex items-start gap-2 border-b border-gray-100 last:border-b-0 rounded transition-colors",3,"click",4,"ngFor","ngForOf"],[1,"py-2","px-3","hover:bg-orange-50","cursor-pointer","flex","items-start","gap-2","border-b","border-gray-100","last:border-b-0","rounded","transition-colors",3,"click"],[1,"w-6","h-6","rounded-full","bg-gradient-to-br","from-orange-400","to-orange-600","text-white","flex","items-center","justify-center","font-semibold","text-xs","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"text-xs","font-semibold","text-gray-900","truncate"],[1,"text-xs","text-gray-500","truncate"],["type","button","title","X\xf3a t\u1ea5t c\u1ea3",1,"px-2","py-1","text-red-500","hover:bg-red-50","rounded","text-xs","font-medium","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex-1","overflow-y-auto","space-y-1.5","pr-1",2,"min-height","0"],["class","flex items-center gap-2 p-2 bg-orange-50/50 border border-orange-200 rounded hover:bg-orange-50 transition-colors group",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-2","p-2","bg-orange-50/50","border","border-orange-200","rounded","hover:bg-orange-50","transition-colors","group"],[1,"flex","items-center","justify-center","w-7","h-7","bg-gradient-to-br","from-orange-500","to-orange-600","rounded-full","text-white","text-xs","font-bold","flex-shrink-0"],[1,"font-semibold","text-gray-900","text-xs","mb-0.5","truncate"],["type","button","title","X\xf3a",1,"flex-shrink-0","p-1","text-red-500","hover:bg-red-100","rounded","transition-colors","opacity-0","group-hover:opacity-100",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3.5","h-3.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","flex","items-center","justify-center","text-center","py-8","text-gray-400",2,"min-height","150px"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-2","text-gray-300"],[1,"text-xs","font-medium","text-gray-400"],[1,"text-xs","text-gray-400","mt-1"],[3,"value"],[1,"space-y-3"],["class","flex items-center justify-center py-16 bg-gray-50 rounded-xl border border-gray-200",4,"ngIf"],["class","bg-red-50 border-2 border-red-200 rounded-xl p-4",4,"ngIf"],["class","text-center py-16 bg-gray-50 rounded-xl border-2 border-gray-200",4,"ngIf"],[1,"flex","items-center","justify-center","py-16","bg-gray-50","rounded-xl","border","border-gray-200"],[1,"animate-spin","rounded-full","h-10","w-10","border-3","border-orange-500","border-t-transparent","mx-auto","mb-3"],[1,"text-sm","font-medium","text-gray-600"],[1,"bg-red-50","border-2","border-red-200","rounded-xl","p-4"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","rounded-full","bg-red-500","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","font-semibold","text-red-700"],[1,"flex","items-center","justify-between","bg-gradient-to-r","from-gray-50","to-gray-50/50","rounded-lg","px-4","py-2.5","border-2","border-gray-200"],[1,"text-xs","font-semibold","text-gray-700"],[1,"text-gray-900","font-bold"],[1,"w-px","h-4","bg-gray-300"],[1,"text-xs","font-semibold","text-orange-600"],[1,"text-orange-700","font-bold"],["type","button",1,"px-3","py-1.5","text-xs","font-bold","bg-green-500","hover:bg-green-600","disabled:bg-gray-300","disabled:cursor-not-allowed","text-white","rounded-lg","transition-all","shadow-sm",3,"click","disabled"],["type","button",1,"px-3","py-1.5","text-xs","font-bold","bg-red-500","hover:bg-red-600","disabled:bg-gray-300","disabled:cursor-not-allowed","text-white","rounded-lg","transition-all","shadow-sm",3,"click","disabled"],[1,"border-2","border-gray-200","rounded-xl","overflow-hidden","bg-white","shadow-sm","max-h-[420px]","overflow-y-auto"],[1,"w-full"],[1,"bg-gradient-to-r","from-gray-100","to-gray-50","sticky","top-0","z-10","border-b-2","border-gray-200"],[1,"px-3","py-2.5","text-left","w-12"],["type","checkbox",1,"w-4","h-4","text-orange-600","border-gray-400","rounded","focus:ring-2","focus:ring-orange-500","cursor-pointer",3,"change","checked"],[1,"px-3","py-2.5","text-left","text-xs","font-bold","text-gray-700","uppercase","w-12"],[1,"px-3","py-2.5","text-left","text-xs","font-bold","text-gray-700","uppercase"],[1,"px-3","py-2.5","text-left","text-xs","font-bold","text-gray-700","uppercase","w-20"],[1,"divide-y","divide-gray-150"],["class","hover:bg-orange-50/50 transition-colors cursor-pointer border-b border-gray-100",3,"click",4,"ngFor","ngForOf"],[1,"hover:bg-orange-50/50","transition-colors","cursor-pointer","border-b","border-gray-100",3,"click"],[1,"px-3","py-2.5",3,"click"],[1,"px-3","py-2.5","text-sm","font-bold","text-gray-700"],[1,"px-3","py-2.5"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-xs","text-gray-600"],[1,"px-3","py-2.5","text-xs","text-gray-500","font-mono"],[1,"text-center","py-16","bg-gray-50","rounded-xl","border-2","border-gray-200"],[1,"w-16","h-16","mx-auto","mb-3","rounded-full","bg-gray-200","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"],[1,"text-sm","font-semibold","text-gray-600"],[1,"flex","items-center","justify-between","w-full","pt-2","border-t","border-gray-200"],[1,"text-sm","font-medium","text-gray-700"],[4,"ngIf"],["class","text-gray-400",4,"ngIf"],["label","H\u1ee7y","icon","pi pi-times","styleClass","p-button-text p-button-sm",3,"onClick"],["label","X\xe1c nh\u1eadn","icon","pi pi-check","styleClass","p-button-primary p-button-sm",3,"onClick","disabled"],[1,"font-bold"],[1,"text-gray-400"],[1,"bg-red-50","border-2","border-red-200","rounded-xl","p-5","mb-6","shadow-sm"],[1,"w-10","h-10","rounded-full","bg-red-100","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-red-500"],[1,"text-red-800","font-bold","mb-1"],[1,"text-red-700"],[1,"bg-gradient-to-r","from-orange-50","to-orange-100","border-2","border-orange-200","rounded-xl","p-6","mb-6","shadow-sm"],[1,"flex","items-start","gap-4"],[1,"w-12","h-12","rounded-full","bg-orange-200","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-orange-800","font-bold","mb-1"],[1,"text-orange-700"],[1,"ml-2","text-gray-600"],[1,"font-bold","text-orange-600"],[1,"flex","items-center","justify-center","py-20"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-orange-500","mx-auto","mb-4"],[1,"text-sm","text-gray-600","font-medium"],[1,"overflow-hidden"],["currentPageReportTemplate","Hi\u1ec3n th\u1ecb {first} \u0111\u1ebfn {last} c\u1ee7a {totalRecords} b\u01b0u c\u1ee5c","styleClass","p-datatable-sm",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","tableStyle","responsiveLayout"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"text-left","font-bold","text-gray-800","py-4","px-6","bg-gradient-to-r","from-orange-50","to-orange-100","border-b-2","border-orange-300"],[1,"flex","items-center","gap-2","hover:text-orange-700","transition-colors","text-gray-800","font-bold",3,"click"],["class","w-4 h-4 flex-shrink-0","fill","none","stroke","currentColor","viewBox","0 0 24 24","preserveAspectRatio","xMidYMid meet",4,"ngIf"],[1,"text-right","font-bold","text-gray-800","py-4","px-6","bg-gradient-to-r","from-orange-50","to-orange-100","border-b-2","border-orange-300"],[1,"flex","items-center","justify-end","gap-2","hover:text-orange-700","transition-colors","w-full","text-gray-800","font-bold",3,"click"],[1,"text-center","font-bold","text-gray-800","py-4","px-6","bg-gradient-to-r","from-orange-50","to-orange-100","border-b-2","border-orange-300"],[1,"flex","items-center","justify-center","gap-2"],["title","C\u1ea5u h\xecnh ca l\xe0m vi\u1ec7c",1,"p-1","hover:bg-orange-200","rounded","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","preserveAspectRatio","xMidYMid meet",1,"w-4","h-4","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7"],[1,"cursor-pointer","transition-all","duration-150","border-b","border-gray-200",3,"click","ngClass"],[1,"py-4","px-6"],[1,"text-gray-900","font-semibold","text-sm"],[1,"text-xs","text-gray-500","mt-1","font-medium"],[1,"text-right","py-4","px-6"],[1,"text-gray-800","font-semibold"],[1,"text-center","py-4","px-6",3,"click"],[1,"text-sm","font-semibold","px-3","py-1.5","border","border-gray-300","rounded-lg","bg-white","hover:border-orange-400","focus:border-orange-500","focus:ring-2","focus:ring-orange-200","transition-colors","cursor-pointer",3,"change","value"],["colspan","5",1,"text-center","py-16","bg-white"],[1,"flex","flex-col","items-center","gap-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-20","h-20","text-gray-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-gray-600","font-semibold","text-base"],["class","px-6 py-2.5 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm font-semibold shadow-sm",3,"click",4,"ngIf"],[1,"px-6","py-2.5","bg-orange-500","text-white","rounded-lg","hover:bg-orange-600","transition-colors","text-sm","font-semibold","shadow-sm",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","mb-4","text-gray-300"],[1,"text-gray-600","font-medium"]],template:function(o,t){if(1&o){const i=e.RV6();e.j41(0,"div",1),e.nrm(1,"app-page-header",2),e.j41(2,"div",3)(3,"div",4)(4,"div",5),e.EFF(5,"C\xe1c b\u01b0\u1edbc l\u1eadp l\u1ecbch"),e.k0s(),e.j41(6,"div",6),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(1))}),e.j41(7,"div",7),e.EFF(8,"1"),e.k0s(),e.j41(9,"div",8)(10,"div",9),e.EFF(11,"Kho h\xe0ng v\xe0 v\xf9ng"),e.k0s(),e.j41(12,"div",10),e.EFF(13,"V\xf9ng c\u1ea7n l\xean l\u1ecbch v\xe0 \u0111i\u1ec3m giao h\xe0ng"),e.k0s()()(),e.j41(14,"div",11),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(2))}),e.j41(15,"div",7),e.EFF(16,"2"),e.k0s(),e.j41(17,"div",8)(18,"div",9),e.EFF(19,"S\u1ea3n l\u01b0\u1ee3ng"),e.k0s()()(),e.j41(20,"div",12),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(3))}),e.j41(21,"div",7),e.EFF(22,"3"),e.k0s(),e.j41(23,"div",8)(24,"div",9),e.EFF(25,"Ph\u01b0\u01a1ng ti\u1ec7n"),e.k0s(),e.j41(26,"div",10),e.EFF(27,"L\u1ef1a ch\u1ecdn xe v\xe0 t\u1ea3i tr\u1ecdng"),e.k0s()()(),e.j41(28,"div",13),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(4))}),e.j41(29,"div",7),e.EFF(30,"4"),e.k0s(),e.j41(31,"div",8)(32,"div",9),e.EFF(33,"C\xe0i \u0111\u1eb7t"),e.k0s(),e.j41(34,"div",10),e.EFF(35,"C\u1ea5u h\xecnh c\xe1c t\xf9y ch\u1ecdn"),e.k0s()()(),e.j41(36,"div",14),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(5))}),e.j41(37,"div",7),e.EFF(38,"5"),e.k0s(),e.j41(39,"div",8)(40,"div",9),e.EFF(41,"Xem tr\u01b0\u1edbc"),e.k0s(),e.j41(42,"div",10),e.EFF(43,"Xem l\u1ea1i & t\u1ea1o l\u1ecbch t\u1ea3i"),e.k0s()()()(),e.j41(44,"div",15)(45,"div",16)(46,"div",17)(47,"h3"),e.EFF(48,"\u{1f4cd} V\xf9ng c\u1ea7n l\xean l\u1ecbch v\xe0 \u0110i\u1ec3m giao h\xe0ng"),e.k0s()(),e.j41(49,"div",18)(50,"div",19)(51,"div",20)(52,"div",21),e.DNE(53,$,5,0,"div",22),e.nrm(54,"div",23,0),e.j41(56,"div",24)(57,"div",25)(58,"span",26),e.EFF(59,"\u0110i\u1ec3m \u0111\xe3 ch\u1ecdn"),e.k0s(),e.j41(60,"span",27),e.EFF(61),e.k0s()()()(),e.j41(62,"div",28)(63,"div",29)(64,"label",30),e.EFF(65," \u{1f30d} V\xf9ng c\u1ea7n l\xean l\u1ecbch "),e.j41(66,"span",31),e.EFF(67,"*"),e.k0s()(),e.j41(68,"button",32),e.bIt("click",function(){return e.eBV(i),e.Njj(t.openRegionSelectionModal())}),e.j41(69,"div",33),e.qSk(),e.j41(70,"svg",34),e.nrm(71,"path",35),e.k0s(),e.joV(),e.j41(72,"span",36),e.EFF(73),e.k0s()(),e.qSk(),e.j41(74,"svg",34),e.nrm(75,"path",37),e.k0s()(),e.DNE(76,G,2,1,"div",38),e.k0s(),e.joV(),e.j41(77,"div",29)(78,"label",30),e.EFF(79,"\u{1f50d} T\xecm b\u01b0u c\u1ee5c"),e.k0s(),e.j41(80,"div",39)(81,"p-autoComplete",40),e.mxI("ngModelChange",function(l){return e.eBV(i),e.DH7(t.warehouseSearchQuery,l)||(t.warehouseSearchQuery=l),e.Njj(l)}),e.bIt("completeMethod",function(l){return e.eBV(i),e.Njj(t.onWarehouseAutoComplete(l))})("onSelect",function(l){return e.eBV(i),e.Njj(t.onWarehouseAutoSelect(l))}),e.k0s(),e.DNE(82,L,2,0,"div",41)(83,Y,2,1,"div",42),e.k0s()(),e.j41(84,"div",43)(85,"div",44)(86,"div",45)(87,"div",46),e.qSk(),e.j41(88,"svg",47),e.nrm(89,"path",48),e.k0s()(),e.joV(),e.j41(90,"span",49),e.EFF(91,"\u0110i\u1ec3m d\u1eebng"),e.k0s(),e.j41(92,"span",50),e.EFF(93),e.k0s()(),e.DNE(94,X,3,0,"button",51),e.k0s(),e.DNE(95,H,2,1,"div",52)(96,K,8,0,"div",53),e.k0s()()()()(),e.j41(97,"div",54),e.nrm(98,"div"),e.j41(99,"button",55),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(2))}),e.EFF(100," Next: S\u1ea3n l\u01b0\u1ee3ng \u2192 "),e.k0s()()(),e.j41(101,"p-dialog",56),e.mxI("visibleChange",function(l){return e.eBV(i),e.DH7(t.showRegionSelectionModal,l)||(t.showRegionSelectionModal=l),e.Njj(l)}),e.bIt("onHide",function(){return e.eBV(i),e.Njj(t.closeRegionSelectionModal())}),e.j41(102,"div",57)(103,"div",58)(104,"div",59)(105,"div",60),e.qSk(),e.j41(106,"svg",61),e.nrm(107,"path",35),e.k0s()(),e.joV(),e.j41(108,"div",62)(109,"label",63),e.EFF(110,"Ch\u1ecdn v\xf9ng "),e.j41(111,"span",31),e.EFF(112,"*"),e.k0s()(),e.j41(113,"select",64),e.mxI("ngModelChange",function(l){return e.eBV(i),e.DH7(t.modalSelectedRegion,l)||(t.modalSelectedRegion=l),e.Njj(l)}),e.bIt("change",function(){return e.eBV(i),e.Njj(t.onModalRegionChange())}),e.j41(114,"option",65),e.EFF(115,"-- Ch\u1ecdn v\xf9ng --"),e.k0s(),e.DNE(116,J,2,3,"option",66),e.k0s()()()(),e.DNE(117,oe,6,5,"div",67),e.k0s(),e.DNE(118,re,7,3,"ng-template",68),e.k0s(),e.j41(119,"div",69)(120,"div",18),e.DNE(121,se,10,1,"div",70)(122,le,10,0,"div",71),e.j41(123,"div",72)(124,"div")(125,"div",73)(126,"div",74)(127,"div",75),e.qSk(),e.j41(128,"svg",76),e.nrm(129,"path",77),e.k0s()(),e.joV(),e.j41(130,"div",62)(131,"h3",78),e.EFF(132,"Chi ti\u1ebft S\u1ea3n l\u01b0\u1ee3ng theo B\u01b0u c\u1ee5c"),e.k0s(),e.j41(133,"p",79),e.EFF(134,"Ph\xe2n t\xedch chi ti\u1ebft s\u1ea3n l\u01b0\u1ee3ng l\u1ea5y v\xe0 giao theo t\u1eebng b\u01b0u c\u1ee5c"),e.k0s()()(),e.j41(135,"div",80)(136,"div",81)(137,"div",82),e.nrm(138,"div",83),e.j41(139,"span",84),e.EFF(140,"Cao h\u01a1n TB"),e.k0s()(),e.j41(141,"div",82),e.nrm(142,"div",85),e.j41(143,"span",84),e.EFF(144,"Th\u1ea5p h\u01a1n TB"),e.k0s()()(),e.j41(145,"div",86),e.EFF(146," T\u1ed5ng: "),e.j41(147,"span",87),e.EFF(148),e.k0s(),e.EFF(149," b\u01b0u c\u1ee5c "),e.DNE(150,de,5,1,"span",88),e.k0s()()(),e.j41(151,"div",89),e.DNE(152,ue,5,0,"div",90)(153,je,5,9,"div",91)(154,we,6,0,"div",90),e.k0s()()()(),e.j41(155,"div",54)(156,"button",92),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(1))}),e.EFF(157,"\u2190 Previous"),e.k0s(),e.j41(158,"button",55),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(3))}),e.EFF(159," Next: Ph\u01b0\u01a1ng ti\u1ec7n \u2192 "),e.k0s()()(),e.j41(160,"div",93)(161,"div",17)(162,"h3"),e.EFF(163,"\u{1f69b} C\u1ea5u h\xecnh Ph\u01b0\u01a1ng ti\u1ec7n"),e.k0s(),e.j41(164,"p"),e.EFF(165,"Import ph\u01b0\u01a1ng ti\u1ec7n t\u1eeb CSV ho\u1eb7c c\u1ea5u h\xecnh th\u1ee7 c\xf4ng"),e.k0s()(),e.j41(166,"div",18)(167,"div",94)(168,"span",95),e.EFF(169,"Import ph\u01b0\u01a1ng ti\u1ec7n t\u1eeb CSV ho\u1eb7c c\u1ea5u h\xecnh th\u1ee7 c\xf4ng"),e.k0s(),e.j41(170,"div",96)(171,"button",97),e.EFF(172,"Import CSV"),e.k0s(),e.j41(173,"button",97),e.EFF(174,"Import JSON"),e.k0s(),e.j41(175,"button",98),e.EFF(176,"X\xf3a t\u1ea5t c\u1ea3"),e.k0s()()(),e.j41(177,"div",99)(178,"div",100),e.qSk(),e.j41(179,"svg",101),e.nrm(180,"path",102),e.k0s(),e.joV(),e.j41(181,"p"),e.EFF(182,"Ch\u01b0a c\xf3 ph\u01b0\u01a1ng ti\u1ec7n"),e.k0s(),e.j41(183,"span"),e.EFF(184,"Import CSV ho\u1eb7c c\u1ea5u h\xecnh th\u1ee7 c\xf4ng"),e.k0s()()(),e.j41(185,"div",103)(186,"div",104)(187,"div",105),e.EFF(188,"T\u1ed5ng s\u1ed1 ph\u01b0\u01a1ng ti\u1ec7n"),e.k0s(),e.j41(189,"div",27),e.EFF(190,"0"),e.k0s()(),e.j41(191,"div",106)(192,"div",105),e.EFF(193,"\u0110\xe3 ch\u1ecdn"),e.k0s(),e.j41(194,"div",27),e.EFF(195,"0"),e.k0s()(),e.j41(196,"div",107)(197,"div",105),e.EFF(198,"T\u1ed5ng t\u1ea3i tr\u1ecdng"),e.k0s(),e.j41(199,"div",27),e.EFF(200,"0 kg"),e.k0s()()()(),e.j41(201,"div",54)(202,"button",92),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(2))}),e.EFF(203,"\u2190 Previous"),e.k0s(),e.j41(204,"button",108),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(4))}),e.EFF(205,"Next: C\xe0i \u0111\u1eb7t \u2192"),e.k0s()()(),e.j41(206,"div",109)(207,"div",17)(208,"h3"),e.EFF(209,"\u2699\ufe0f C\xe0i \u0111\u1eb7t N\xe2ng cao"),e.k0s(),e.j41(210,"p"),e.EFF(211,"C\u1ea5u h\xecnh c\xe1c tham s\u1ed1 v\xe0 r\xe0ng bu\u1ed9c routing"),e.k0s()(),e.j41(212,"div",18)(213,"div",110)(214,"div",111)(215,"label"),e.EFF(216,"T\u1ed1c \u0111\u1ed9 xe (km/h)"),e.k0s(),e.nrm(217,"input",112),e.k0s(),e.j41(218,"div",111)(219,"label"),e.EFF(220,"Th\u1eddi gian t\u1ed1i \u0111a xe (s)"),e.k0s(),e.nrm(221,"input",113),e.k0s(),e.j41(222,"div",111)(223,"label"),e.EFF(224,"Kh\u1ed1i l\u01b0\u1ee3ng nh\u1eb9 trung b\xecnh (g)"),e.k0s(),e.nrm(225,"input",114),e.k0s(),e.j41(226,"div",111)(227,"label"),e.EFF(228,"Kh\u1ed1i l\u01b0\u1ee3ng n\u1eb7ng trung b\xecnh (g)"),e.k0s(),e.nrm(229,"input",115),e.k0s(),e.j41(230,"div",111)(231,"label"),e.EFF(232,"Gi\u1edbi h\u1ea1n th\u1eddi gian gi\u1ea3i (s)"),e.k0s(),e.nrm(233,"input",116),e.k0s(),e.j41(234,"div",111)(235,"label"),e.EFF(236,"Th\u1eddi gian b\u1eaft \u0111\u1ea7u tuy\u1ebfn (ph\xfat)"),e.k0s(),e.nrm(237,"input",117),e.k0s(),e.j41(238,"div",111)(239,"label"),e.EFF(240,"Gi\u1edbi h\u1ea1n th\u1eddi gian di chuy\u1ec3n (ph\xfat)"),e.k0s(),e.nrm(241,"input",118),e.k0s(),e.j41(242,"div",111)(243,"label"),e.EFF(244,"Dung l\u01b0\u1ee3ng Kho"),e.k0s(),e.nrm(245,"input",119),e.k0s(),e.j41(246,"div",111)(247,"label"),e.EFF(248,"User ID"),e.k0s(),e.nrm(249,"input",120),e.k0s(),e.j41(250,"div",111)(251,"label"),e.EFF(252,"Ch\u1ebf \u0111\u1ed9 L\u1eadp l\u1ecbch"),e.k0s(),e.j41(253,"select",121)(254,"option",122),e.EFF(255,"Ch\u1ec9 Giao h\xe0ng"),e.k0s(),e.j41(256,"option",123),e.EFF(257,"L\u1ea5y v\xe0 Giao"),e.k0s(),e.j41(258,"option",124),e.EFF(259,"Chuy\u1ebfn Kh\u1ee9 h\u1ed3i"),e.k0s()()()()(),e.j41(260,"div",54)(261,"button",92),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(3))}),e.EFF(262,"\u2190 Previous"),e.k0s(),e.j41(263,"button",108),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(5))}),e.EFF(264,"Next: Xem tr\u01b0\u1edbc \u2192"),e.k0s()()(),e.j41(265,"div",125)(266,"div",17)(267,"h3"),e.EFF(268,"\u{1f4cb} T\xf3m t\u1eaft K\u1ebf ho\u1ea1ch"),e.k0s(),e.j41(269,"p"),e.EFF(270,"Xem l\u1ea1i c\u1ea5u h\xecnh tr\u01b0\u1edbc khi t\u1ea1o l\u1ecbch t\u1ea3i"),e.k0s()(),e.j41(271,"div",18)(272,"div",126)(273,"div",127)(274,"div",128)(275,"span"),e.EFF(276,"Th\xf4ng tin V\xf9ng"),e.k0s(),e.j41(277,"button",129),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(1))}),e.EFF(278,"\u270f\ufe0f"),e.k0s()(),e.j41(279,"div",130)(280,"span"),e.EFF(281,"V\xf9ng c\u1ea7n l\xean l\u1ecbch"),e.k0s(),e.j41(282,"span"),e.EFF(283),e.k0s()(),e.j41(284,"div",130)(285,"span"),e.EFF(286,"\u0110i\u1ec3m \u0111\xe3 ch\u1ecdn"),e.k0s(),e.j41(287,"span"),e.EFF(288),e.k0s()()(),e.j41(289,"div",127)(290,"div",128)(291,"span"),e.EFF(292,"\u0110i\u1ec3m Giao h\xe0ng"),e.k0s(),e.j41(293,"button",129),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(1))}),e.EFF(294,"\u270f\ufe0f"),e.k0s()(),e.j41(295,"div",130)(296,"span"),e.EFF(297,"T\u1ed5ng s\u1ed1 \u0111i\u1ec3m"),e.k0s(),e.j41(298,"span"),e.EFF(299),e.k0s()(),e.j41(300,"div",130)(301,"span"),e.EFF(302,"T\u1ed5ng s\u1ea3n l\u01b0\u1ee3ng"),e.k0s(),e.j41(303,"span"),e.EFF(304),e.k0s()()(),e.j41(305,"div",127)(306,"div",128)(307,"span"),e.EFF(308,"Ph\u01b0\u01a1ng ti\u1ec7n"),e.k0s(),e.j41(309,"button",129),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(3))}),e.EFF(310,"\u270f\ufe0f"),e.k0s()(),e.j41(311,"div",130)(312,"span"),e.EFF(313,"Ph\u01b0\u01a1ng ti\u1ec7n \u0111\xe3 ch\u1ecdn"),e.k0s(),e.j41(314,"span"),e.EFF(315,"0"),e.k0s()(),e.j41(316,"div",130)(317,"span"),e.EFF(318,"T\u1ed5ng t\u1ea3i tr\u1ecdng"),e.k0s(),e.j41(319,"span"),e.EFF(320,"0 kg"),e.k0s()()(),e.j41(321,"div",131)(322,"div",132),e.EFF(323,"Tuy\u1ebfn \u0111\u01b0\u1eddng \u01b0\u1edbc t\xednh"),e.k0s(),e.j41(324,"div",133),e.EFF(325),e.k0s(),e.j41(326,"div",134),e.EFF(327,"D\u1ef1a tr\xean c\u1ea5u h\xecnh hi\u1ec7n t\u1ea1i"),e.k0s()()()(),e.j41(328,"div",54)(329,"button",92),e.bIt("click",function(){return e.eBV(i),e.Njj(t.goToCreatePlanStep(4))}),e.EFF(330,"\u2190 Previous"),e.k0s(),e.j41(331,"div",135)(332,"button",97),e.EFF(333,"\u{1f50e} Xem tr\u01b0\u1edbc Payload"),e.k0s(),e.j41(334,"button",136),e.EFF(335," \u{1f680} T\u1ea1o L\u1ecbch T\u1ea3i "),e.k0s()()()()()(),e.j41(336,"div",137)(337,"div",138)(338,"span",139),e.EFF(339,"Processing..."),e.k0s(),e.j41(340,"span",140),e.EFF(341,"0%"),e.k0s()(),e.j41(342,"div",141),e.nrm(343,"div",142),e.k0s()()()}2&o&&(e.R7$(6),e.AVh("active",1===t.currentStep)("completed",t.currentStep>1),e.R7$(8),e.AVh("active",2===t.currentStep)("completed",t.currentStep>2),e.R7$(6),e.AVh("active",3===t.currentStep)("completed",t.currentStep>3),e.R7$(8),e.AVh("active",4===t.currentStep)("completed",t.currentStep>4),e.R7$(8),e.AVh("active",5===t.currentStep)("completed",t.currentStep>5),e.R7$(9),e.AVh("active",1===t.currentStep),e.R7$(8),e.Y8G("ngIf",!t.mapLoaded),e.R7$(),e.xc7("opacity",t.mapLoaded?"1":"0")("pointer-events",t.mapLoaded?"auto":"none"),e.R7$(7),e.JRh(t.timelineWarehouses.length),e.R7$(12),e.JRh(t.warehouseRegionShortname?t.warehouseRegionShortname+" - "+t.getRegionName(t.warehouseRegionShortname):"Ch\u1ecdn v\xf9ng"),e.R7$(3),e.Y8G("ngIf",t.warehouseRegionShortname&&t.timelineWarehouses.length>0),e.R7$(5),e.R50("ngModel",t.warehouseSearchQuery),e.Y8G("minLength",1)("dropdown",!1)("forceSelection",!1)("autoHighlight",!0)("placeholder","Nh\u1eadp t\xean b\u01b0u c\u1ee5c...")("delay",300),e.R7$(),e.Y8G("ngIf",t.warehouseAutoLoading),e.R7$(),e.Y8G("ngIf",t.warehouseSuggestions&&t.warehouseSuggestions.length>0),e.R7$(10),e.JRh(t.timelineWarehouses.length),e.R7$(),e.Y8G("ngIf",t.timelineWarehouses.length>0),e.R7$(),e.Y8G("ngIf",t.timelineWarehouses.length>0),e.R7$(),e.Y8G("ngIf",0===t.timelineWarehouses.length),e.R7$(3),e.Y8G("disabled",0===t.timelineWarehouses.length),e.R7$(2),e.Aen(e.lJ4(75,I)),e.R50("visible",t.showRegionSelectionModal),e.Y8G("modal",!0)("closable",!0)("dismissableMask",!0),e.R7$(12),e.R50("ngModel",t.modalSelectedRegion),e.R7$(3),e.Y8G("ngForOf",t.availableRegions),e.R7$(),e.Y8G("ngIf",t.modalSelectedRegion),e.R7$(2),e.AVh("active",2===t.currentStep),e.R7$(2),e.Y8G("ngIf",t.demandsError&&!t.loadingDemands),e.R7$(),e.Y8G("ngIf",!t.loadingDemands&&!t.demandsError&&0===t.timelineWarehouses.length),e.R7$(26),e.JRh(t.demands.length),e.R7$(2),e.Y8G("ngIf",t.demandSearchQuery),e.R7$(2),e.Y8G("ngIf",t.loadingDemands),e.R7$(),e.Y8G("ngIf",!t.loadingDemands&&t.demands.length>0),e.R7$(),e.Y8G("ngIf",!t.loadingDemands&&0===t.demands.length&&!t.demandsError&&t.timelineWarehouses.length>0),e.R7$(4),e.Y8G("disabled",0===t.demands.length),e.R7$(2),e.AVh("active",3===t.currentStep),e.R7$(46),e.AVh("active",4===t.currentStep),e.R7$(59),e.AVh("active",5===t.currentStep),e.R7$(18),e.Lme("",t.warehouseRegionShortname," - ",t.getRegionName(t.warehouseRegionShortname),""),e.R7$(5),e.SpI("",t.timelineWarehouses.length," \u0111i\u1ec3m"),e.R7$(11),e.JRh(t.timelineWarehouses.length),e.R7$(5),e.SpI("",t.getFormattedTotalDemandWeight()," kg"),e.R7$(21),e.JRh(t.timelineWarehouses.length>0?"\u0110\xe3 s\u1eb5n s\xe0ng":"Ch\u01b0a \u0111\u1ee7 d\u1eef li\u1ec7u"))},dependencies:[f.MD,f.YU,f.Sq,f.bT,f.QX,m.YN,m.xH,m.y7,m.wz,m.BC,m.vS,b.$$,b.j9,T.Ei,C.Ph,C.lG,x.tm,x.$n,F.q4,P.bG,P.XI,j.y],styles:[".planning-page[_ngcontent-%COMP%]{min-height:100%}.planning-page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.planning-page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.planning-title-icon[_ngcontent-%COMP%]{font-size:36px}.planning-page-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 4px;font-size:24px;font-weight:700;color:var(--p-surface-900)}.planning-page-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:var(--p-surface-600)}.planning-status-badge[_ngcontent-%COMP%]{padding:6px 14px;border-radius:20px;font-size:12px;font-weight:600}.planning-status-badge.draft[_ngcontent-%COMP%]{background:var(--p-surface-100);color:var(--p-surface-600)}.planning-stepper-container[_ngcontent-%COMP%]{display:flex;gap:24px;background:var(--p-surface-0);border-radius:12px;box-shadow:0 1px 3px #0000001a;min-height:auto}.planning-stepper-nav[_ngcontent-%COMP%]{width:240px;background:var(--p-surface-50);border-radius:12px 0 0 12px;padding:20px;border-right:1px solid var(--p-surface-200)}.planning-stepper-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--p-surface-500);text-transform:uppercase;letter-spacing:.5px;margin-bottom:20px}.planning-step-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;border-radius:8px;cursor:pointer;margin-bottom:8px;transition:all .2s}.planning-step-item[_ngcontent-%COMP%]:hover{background:rgba(var(--p-primary-500),.05)}.planning-step-item.active[_ngcontent-%COMP%]{background:rgba(var(--p-primary-500),.1)}.planning-step-item.active[_ngcontent-%COMP%]   .planning-step-indicator[_ngcontent-%COMP%], .planning-step-item.completed[_ngcontent-%COMP%]   .planning-step-indicator[_ngcontent-%COMP%]{background:var(--p-primary-500);color:#fff}.planning-step-indicator[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:50%;background:var(--p-surface-200);color:var(--p-surface-600);display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:600;flex-shrink:0}.planning-step-label[_ngcontent-%COMP%]{flex:1;min-width:0}.planning-step-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--p-surface-700)}.planning-step-desc[_ngcontent-%COMP%]{font-size:12px;color:var(--p-surface-500)}.planning-step-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.planning-step-panel[_ngcontent-%COMP%]{display:none;flex-direction:column;height:auto}.planning-step-panel.active[_ngcontent-%COMP%]{display:flex}.planning-step-header[_ngcontent-%COMP%]{padding:24px 24px 0}.planning-step-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;font-weight:700;color:var(--p-surface-900)}.planning-step-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:var(--p-surface-600)}.planning-step-body[_ngcontent-%COMP%]{flex:1;padding:24px;overflow-y:auto}.planning-step-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-top:1px solid var(--p-surface-200);background:var(--p-surface-50);border-radius:0 0 12px}.planning-form-section[_ngcontent-%COMP%]{margin-bottom:20px}.planning-form-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--p-surface-700);margin-bottom:12px}.planning-form-field[_ngcontent-%COMP%]{margin-bottom:12px}.planning-form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:var(--p-surface-600);margin-bottom:6px}.planning-form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.planning-form-hint[_ngcontent-%COMP%]{font-size:12px;color:var(--p-surface-500);margin-top:4px}.planning-select[_ngcontent-%COMP%], .planning-input[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:1px solid var(--p-surface-300);border-radius:8px;font-size:14px;color:var(--p-surface-700);background:var(--p-surface-0);transition:border-color .2s}.planning-select[_ngcontent-%COMP%]:focus, .planning-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--p-primary-500);box-shadow:0 0 0 3px rgba(var(--p-primary-500),.1)}.planning-depot-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px}.planning-depot-card[_ngcontent-%COMP%]{background:var(--p-surface-50);border:1px solid var(--p-surface-200);border-radius:8px;padding:12px;margin-top:12px}.depot-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 0;font-size:13px}.depot-label[_ngcontent-%COMP%]{color:var(--p-surface-600)}.depot-value[_ngcontent-%COMP%]{color:var(--p-surface-700);font-weight:500}.planning-mode-selector[_ngcontent-%COMP%]{display:flex;gap:12px}.planning-mode-option[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;padding:16px;border:2px solid var(--p-surface-200);border-radius:10px;cursor:pointer;transition:all .2s}.planning-mode-option[_ngcontent-%COMP%]:hover{border-color:var(--p-primary-500)}.planning-mode-option.active[_ngcontent-%COMP%], .planning-mode-option[_ngcontent-%COMP%]:has(input:checked){border-color:var(--p-primary-500);background:rgba(var(--p-primary-500),.05)}.planning-mode-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.mode-icon[_ngcontent-%COMP%]{font-size:24px;margin-bottom:8px}.mode-name[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--p-surface-700)}.planning-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;border:none}.planning-btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--p-primary-500),var(--p-primary-600));color:#fff}.planning-btn-primary[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px rgba(var(--p-primary-500),.3)}.planning-btn-secondary[_ngcontent-%COMP%]{background:var(--p-surface-100);color:var(--p-surface-700)}.planning-btn-secondary[_ngcontent-%COMP%]:hover{background:var(--p-surface-200)}.planning-btn-outline[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--p-surface-300);color:var(--p-surface-700)}.planning-btn-outline[_ngcontent-%COMP%]:hover{background:var(--p-surface-50)}.planning-btn-ghost[_ngcontent-%COMP%]{background:transparent;color:var(--p-surface-600)}.planning-btn-ghost[_ngcontent-%COMP%]:hover{background:var(--p-surface-100)}.planning-btn-lg[_ngcontent-%COMP%]{padding:12px 28px;font-size:15px}.planning-btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;border:1px solid var(--p-surface-200);border-radius:8px;background:var(--p-surface-0);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:16px}.planning-btn-icon.small[_ngcontent-%COMP%]{width:28px;height:28px;font-size:12px}.planning-empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;color:var(--p-surface-500);text-align:center}.planning-empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px;margin-bottom:16px;opacity:.5}.planning-empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:var(--p-surface-600);margin:0 0 4px}.planning-empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}.planning-empty-state.small[_ngcontent-%COMP%]{padding:24px}.planning-empty-state.small[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.planning-demands-actions[_ngcontent-%COMP%], .planning-fleet-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.planning-hint-text[_ngcontent-%COMP%]{font-size:13px;color:var(--p-surface-600)}.planning-action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.planning-demands-table-container[_ngcontent-%COMP%], .planning-fleet-table[_ngcontent-%COMP%]{background:var(--p-surface-0);border:1px solid var(--p-surface-200);border-radius:10px;overflow:hidden;min-height:200px}.planning-fleet-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:16px}.planning-stat-card[_ngcontent-%COMP%]{padding:16px;border-radius:10px}.planning-stat-card.orange[_ngcontent-%COMP%]{background:rgba(var(--p-primary-500),.1);border:1px solid rgba(var(--p-primary-500),.2)}.planning-stat-card.orange-light[_ngcontent-%COMP%], .planning-stat-card.orange-dark[_ngcontent-%COMP%]{background:rgba(var(--p-primary-500),.15);border:1px solid rgba(var(--p-primary-500),.3)}.planning-stat-card[_ngcontent-%COMP%]   .stat-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--p-surface-600);margin-bottom:4px}.planning-stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--p-surface-900)}.planning-settings-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.planning-setting-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.planning-setting-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:var(--p-surface-600)}.planning-summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.planning-summary-section[_ngcontent-%COMP%]{background:var(--p-surface-50);border-radius:10px;padding:16px}.summary-section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:14px;font-weight:600;color:var(--p-surface-700);margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--p-surface-200)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;font-size:13px}.summary-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{color:var(--p-surface-600)}.summary-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:600;color:var(--p-surface-900)}.planning-summary-estimate[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--p-primary-500),var(--p-primary-600));border-radius:10px;padding:24px;text-align:center;color:#fff;grid-column:span 2}.estimate-title[_ngcontent-%COMP%]{font-size:14px;opacity:.9;margin-bottom:8px}.estimate-value[_ngcontent-%COMP%]{font-size:48px;font-weight:700;margin-bottom:8px}.estimate-label[_ngcontent-%COMP%]{font-size:12px;opacity:.8}.planning-footer-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.planning-status-bar[_ngcontent-%COMP%]{background:var(--p-surface-0);border-radius:10px;padding:16px 20px;margin-top:20px;box-shadow:0 1px 3px #0000001a}.status-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px;font-size:14px}#cp_status_text[_ngcontent-%COMP%]{font-weight:600;color:var(--p-surface-700)}#cp_status_progress[_ngcontent-%COMP%]{color:var(--p-surface-600)}.status-bar[_ngcontent-%COMP%]{height:8px;background:var(--p-surface-200);border-radius:4px;overflow:hidden}.status-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--p-primary-500),var(--p-primary-600));transition:width .3s}.planning-points-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 320px;gap:20px;padding:0!important;height:100%}.planning-map-section[_ngcontent-%COMP%]{position:relative;background:var(--p-surface-200);border-radius:10px;overflow:hidden;min-height:400px}.planning-map-container[_ngcontent-%COMP%]{width:100%;height:100%;min-height:400px}.planning-map-stats[_ngcontent-%COMP%]{position:absolute;top:12px;left:12px;display:flex;gap:8px}.planning-map-stat[_ngcontent-%COMP%]{background:var(--p-surface-0);padding:8px 14px;border-radius:8px;box-shadow:0 2px 8px #0000001a;text-align:center}.planning-map-stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:10px;color:var(--p-surface-600);display:block}.planning-map-stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--p-surface-900)}.planning-points-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--p-surface-0);border-radius:10px;border:1px solid var(--p-surface-200);overflow:hidden}.planning-points-header[_ngcontent-%COMP%]{display:flex;gap:8px;padding:12px;border-bottom:1px solid var(--p-surface-200);background:var(--p-surface-50)}.planning-search-input[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:1px solid var(--p-surface-200);border-radius:6px;font-size:13px}.planning-points-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.planning-points-items[_ngcontent-%COMP%]{flex:1;overflow-y:auto;max-height:350px}@media (max-width: 1024px){.planning-stepper-container[_ngcontent-%COMP%]{flex-direction:column}.planning-stepper-nav[_ngcontent-%COMP%]{width:100%;border-radius:12px 12px 0 0;border-right:none;border-bottom:1px solid var(--p-surface-200);padding:16px;display:flex;gap:8px;overflow-x:auto}.planning-stepper-title[_ngcontent-%COMP%]{display:none}.planning-step-item[_ngcontent-%COMP%]{flex-direction:column;gap:6px;padding:10px 16px;margin-bottom:0;min-width:max-content}.planning-step-label[_ngcontent-%COMP%]{text-align:center}.planning-step-desc[_ngcontent-%COMP%]{display:none}.planning-depot-grid[_ngcontent-%COMP%], .planning-points-layout[_ngcontent-%COMP%], .planning-settings-grid[_ngcontent-%COMP%], .planning-summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.planning-summary-estimate[_ngcontent-%COMP%]{grid-column:span 1}}"]})}return a})()}}]);