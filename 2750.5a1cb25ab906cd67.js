"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[2750],{2750:(I,u,s)=>{s.r(u),s.d(u,{LocationsComponent:()=>w});var c=s(2881),d=s(9417),g=s(1141),_=s(6221),m=s(1570),h=s(2242),f=s(8150),v=s(7480),C=s(7722),b=s(6150),p=s(5779),L=s(8533),e=s(1360);const y=()=>({width:"700px"});function j(a,r){1&a&&(e.j41(0,"div",43)(1,"div",44),e.nrm(2,"i",45),e.k0s(),e.j41(3,"p",7),e.EFF(4,"Loading warehouses..."),e.k0s()())}function E(a,r){1&a&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Name"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Location"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Address"),e.k0s(),e.j41(7,"th"),e.EFF(8,"City"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Country"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Total Capacity"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Status"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Updated At"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Actions"),e.k0s()())}function F(a,r){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td",50),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.nrm(14,"p-badge",51),e.k0s(),e.j41(15,"td"),e.EFF(16),e.nI1(17,"date"),e.k0s(),e.j41(18,"td")(19,"div",52)(20,"p-button",53),e.bIt("onClick",function(){const i=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.viewLocation(i))}),e.k0s()()()()}if(2&a){const t=r.$implicit,o=e.XpG(2);e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.location||"-"),e.R7$(2),e.JRh(t.address||"-"),e.R7$(2),e.JRh(t.city||"-"),e.R7$(2),e.JRh(t.country||"-"),e.R7$(2),e.JRh(o.formatNumber(t.totalCapacity)),e.R7$(2),e.Y8G("value",o.getStatusLabel(t.isActive))("severity",o.getStatusSeverity(t.isActive)),e.R7$(2),e.JRh(e.i5U(17,10,t.updatedAt,"short")),e.R7$(4),e.Y8G("outlined",!0)}}function M(a,r){1&a&&(e.j41(0,"tr")(1,"td",54),e.EFF(2,"No locations found"),e.k0s()())}function x(a,r){if(1&a&&(e.j41(0,"p-table",46),e.DNE(1,E,19,0,"ng-template",47)(2,F,21,13,"ng-template",48)(3,M,3,0,"ng-template",49),e.k0s()),2&a){const t=e.XpG();e.Y8G("value",t.filteredLocations)("paginator",!0)("rows",10)("showCurrentPageReport",!0)}}function k(a,r){if(1&a){const t=e.RV6();e.j41(0,"div",55)(1,"div")(2,"label",27),e.EFF(3,"Name *"),e.k0s(),e.j41(4,"input",56),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.editingLocation.name,i)||(n.editingLocation.name=i),e.Njj(i)}),e.k0s()(),e.j41(5,"div")(6,"label",27),e.EFF(7,"Location *"),e.k0s(),e.j41(8,"input",57),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.editingLocation.location,i)||(n.editingLocation.location=i),e.Njj(i)}),e.k0s()(),e.j41(9,"div")(10,"label",27),e.EFF(11,"Address *"),e.k0s(),e.j41(12,"input",58),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.editingLocation.address,i)||(n.editingLocation.address=i),e.Njj(i)}),e.k0s()(),e.j41(13,"div")(14,"label",27),e.EFF(15,"City *"),e.k0s(),e.j41(16,"input",59),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.editingLocation.city,i)||(n.editingLocation.city=i),e.Njj(i)}),e.k0s()(),e.j41(17,"div")(18,"label",27),e.EFF(19,"Country *"),e.k0s(),e.j41(20,"input",60),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.editingLocation.country,i)||(n.editingLocation.country=i),e.Njj(i)}),e.k0s()(),e.j41(21,"div")(22,"label",27),e.EFF(23,"Total Capacity"),e.k0s(),e.j41(24,"p-inputNumber",61),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.editingLocation.totalCapacity,i)||(n.editingLocation.totalCapacity=i),e.Njj(i)}),e.k0s()(),e.j41(25,"div")(26,"label",27),e.EFF(27,"Status"),e.k0s(),e.j41(28,"p-dropdown",62),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.editingLocation.isActive,i)||(n.editingLocation.isActive=i),e.Njj(i)}),e.k0s()(),e.j41(29,"div")(30,"label",27),e.EFF(31,"Created At"),e.k0s(),e.nrm(32,"input",63),e.nI1(33,"date"),e.k0s(),e.j41(34,"div")(35,"label",27),e.EFF(36,"Updated At"),e.k0s(),e.nrm(37,"input",63),e.nI1(38,"date"),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(4),e.R50("ngModel",t.editingLocation.name),e.Y8G("disabled","view"===t.dialogMode),e.R7$(4),e.R50("ngModel",t.editingLocation.location),e.Y8G("disabled","view"===t.dialogMode),e.R7$(4),e.R50("ngModel",t.editingLocation.address),e.Y8G("disabled","view"===t.dialogMode),e.R7$(4),e.R50("ngModel",t.editingLocation.city),e.Y8G("disabled","view"===t.dialogMode),e.R7$(4),e.R50("ngModel",t.editingLocation.country),e.Y8G("disabled","view"===t.dialogMode),e.R7$(4),e.R50("ngModel",t.editingLocation.totalCapacity),e.Y8G("useGrouping",!1)("disabled","view"===t.dialogMode),e.R7$(4),e.R50("ngModel",t.editingLocation.isActive),e.Y8G("options",t.dialogStatusOptions)("disabled","view"===t.dialogMode),e.R7$(4),e.Y8G("ngModel",e.i5U(33,18,t.editingLocation.createdAt,"medium")),e.R7$(5),e.Y8G("ngModel",e.i5U(38,21,t.editingLocation.updatedAt,"medium"))}}function R(a,r){if(1&a){const t=e.RV6();e.j41(0,"p-button",66),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.saveLocation())}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("loading",t.saving)}}function T(a,r){if(1&a){const t=e.RV6();e.j41(0,"p-button",64),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancelEdit())}),e.k0s(),e.DNE(1,R,1,1,"p-button",65)}if(2&a){const t=e.XpG();e.Y8G("outlined",!0),e.R7$(),e.Y8G("ngIf","create"===t.dialogMode)}}let w=(()=>{class a{messageService;warehouseService;locations=[];filteredLocations=[];searchTerm="";selectedStatus="";loading=!1;saving=!1;showLocationDialog=!1;dialogMode="create";editingLocation=null;statusOptions=[{label:"All Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}];dialogStatusOptions=[{label:"Active",value:!0},{label:"Inactive",value:!1}];constructor(t,o){this.messageService=t,this.warehouseService=o}ngOnInit(){this.loadLocations()}loadLocations(){this.loading=!0,this.warehouseService.listWarehouses(0,50).subscribe({next:t=>{const o=Array.isArray(t?.data)?t.data:[];this.locations=o.map(i=>this.mapWarehouse(i)),this.applyFilters(),this.loading=!1},error:t=>{this.loading=!1,this.locations=[],this.filteredLocations=[],this.messageService.add({severity:"error",summary:"Error",detail:t?.error?.message||"Failed to load warehouses"})}})}applyFilters(){const t=this.searchTerm.trim().toLowerCase();this.filteredLocations=this.locations.filter(o=>(!t||o.name.toLowerCase().includes(t)||o.location.toLowerCase().includes(t)||o.address.toLowerCase().includes(t)||o.city.toLowerCase().includes(t)||o.country.toLowerCase().includes(t))&&(!this.selectedStatus||(o.isActive?"active":"inactive")===this.selectedStatus))}onSearch(){this.applyFilters()}onStatusChange(){this.applyFilters()}clearFilters(){this.searchTerm="",this.selectedStatus="",this.applyFilters()}createLocation(){this.dialogMode="create",this.editingLocation={id:"",name:"",location:"",address:"",city:"",country:"",totalCapacity:0,isActive:!0,createdAt:null,updatedAt:null},this.showLocationDialog=!0}viewLocation(t){this.dialogMode="view",this.saving=!0,this.warehouseService.getWarehouse(t.id).subscribe({next:o=>{this.editingLocation=this.mapWarehouse(o?.data||t),this.showLocationDialog=!0,this.saving=!1},error:()=>{this.editingLocation={...t},this.showLocationDialog=!0,this.saving=!1}})}saveLocation(){if(!this.editingLocation||"create"!==this.dialogMode)return void(this.showLocationDialog=!1);const t={name:this.editingLocation.name.trim(),location:this.editingLocation.location.trim(),address:this.editingLocation.address.trim(),city:this.editingLocation.city.trim(),country:this.editingLocation.country.trim(),total_capacity:Number(this.editingLocation.totalCapacity||0),is_active:this.editingLocation.isActive};t.name&&t.location&&t.address&&t.city&&t.country?(this.saving=!0,this.warehouseService.createWarehouse(t).subscribe({next:()=>{this.saving=!1,this.showLocationDialog=!1,this.editingLocation=null,this.messageService.add({severity:"success",summary:"Created",detail:"Warehouse created successfully"}),this.loadLocations()},error:o=>{this.saving=!1,this.messageService.add({severity:"error",summary:"Create Failed",detail:o?.error?.message||"Failed to create warehouse"})}})):this.messageService.add({severity:"warn",summary:"Validation",detail:"Name, location, address, city, and country are required."})}cancelEdit(){this.showLocationDialog=!1,this.editingLocation=null}getActiveLocationsCount(){return this.locations.filter(t=>t.isActive).length}getTotalCapacity(){return this.locations.reduce((t,o)=>t+o.totalCapacity,0)}getStatusSeverity(t){return t?"success":"danger"}getStatusLabel(t){return t?"active":"inactive"}formatNumber(t){return new Intl.NumberFormat("en-US").format(t||0)}exportLocations(){this.messageService.add({severity:"info",summary:"Export",detail:"Export functionality will be implemented"})}refreshData(){this.loadLocations(),this.messageService.add({severity:"success",summary:"Refreshed",detail:"Data refreshed successfully"})}mapWarehouse(t){return{id:String(t?._id||t?.id||""),name:String(t?.name||""),location:String(t?.location||""),address:String(t?.address||""),city:String(t?.city||""),country:String(t?.country||""),totalCapacity:Number(t?.total_capacity||0),isActive:!1!==t?.is_active,createdAt:t?.created_at?new Date(t.created_at):null,updatedAt:t?.updated_at?new Date(t.updated_at):null}}static \u0275fac=function(o){return new(o||a)(e.rXU(p.bg),e.rXU(L.zc))};static \u0275cmp=e.VBU({type:a,selectors:[["app-locations"]],features:[e.Jv_([p.bg])],decls:70,vars:22,consts:[[1,"bg-gray-50","min-h-screen","p-6"],[1,"bg-white","rounded-lg","shadow-sm","p-6","mb-6"],[1,"flex","flex-col","lg:flex-row","lg:items-center","lg:justify-between","gap-4"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-gradient-to-br","from-blue-500","to-cyan-600","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-map-marker","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"flex","flex-wrap","items-center","gap-2","sm:gap-3"],["icon","pi pi-download","severity","secondary","pTooltip","Export",1,"hidden","sm:inline-flex",3,"onClick","outlined","rounded"],["icon","pi pi-refresh","severity","info","pTooltip","Refresh",1,"hidden","sm:inline-flex",3,"onClick","outlined","rounded"],["label","Add Location","icon","pi pi-plus","severity","primary",3,"onClick"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-6"],[1,"bg-white","rounded-lg","shadow-sm","p-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-600"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-building","text-blue-600","text-xl"],[1,"text-3xl","font-bold","text-green-600"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-check-circle","text-green-600","text-xl"],[1,"text-3xl","font-bold","text-purple-600"],[1,"w-12","h-12","bg-purple-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-chart-bar","text-purple-600","text-xl"],[1,"bg-white","rounded-lg","shadow-sm","mb-6"],[1,"p-6"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"p-input-icon-left","w-full"],[1,"pi","pi-search"],["pInputText","","placeholder","Search by name, location, city...",1,"w-full",3,"ngModelChange","input","ngModel"],["optionLabel","label","optionValue","value",1,"w-full",3,"ngModelChange","onChange","ngModel","options"],[1,"flex","items-end"],["label","Clear Filters","icon","pi pi-times","severity","secondary",3,"onClick","outlined"],[1,"bg-white","rounded-xl","border","border-gray-200","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200","flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],["class","bg-white rounded-xl border border-gray-200 p-10 text-center",4,"ngIf"],["styleClass","p-datatable-sm","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} locations",3,"value","paginator","rows","showCurrentPageReport",4,"ngIf"],[3,"visibleChange","visible","header","modal","closable"],["class","grid grid-cols-1 md:grid-cols-2 gap-4",4,"ngIf"],["pTemplate","footer"],[1,"bg-white","rounded-xl","border","border-gray-200","p-10","text-center"],[1,"w-12","h-12","bg-blue-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-3"],[1,"pi","pi-spin","pi-spinner","text-blue-500","text-xl"],["styleClass","p-datatable-sm","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} locations",3,"value","paginator","rows","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"font-semibold","text-gray-900"],[3,"value","severity"],[1,"flex","gap-1"],["icon","pi pi-eye","size","small","pTooltip","View Detail",3,"onClick","outlined"],["colspan","9",1,"text-center","py-12","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["pInputText","","placeholder","Warehouse name",1,"w-full",3,"ngModelChange","ngModel","disabled"],["pInputText","","placeholder","Location code/name",1,"w-full",3,"ngModelChange","ngModel","disabled"],["pInputText","","placeholder","Address",1,"w-full",3,"ngModelChange","ngModel","disabled"],["pInputText","","placeholder","City",1,"w-full",3,"ngModelChange","ngModel","disabled"],["pInputText","","placeholder","Country",1,"w-full",3,"ngModelChange","ngModel","disabled"],[1,"w-full",3,"ngModelChange","ngModel","useGrouping","disabled"],["optionLabel","label","optionValue","value",1,"w-full",3,"ngModelChange","ngModel","options","disabled"],["pInputText","","disabled","",1,"w-full",3,"ngModel"],["label","Close","icon","pi pi-times",3,"onClick","outlined"],["label","Create","icon","pi pi-check",3,"loading","onClick",4,"ngIf"],["label","Create","icon","pi pi-check",3,"onClick","loading"]],template:function(o,i){1&o&&(e.nrm(0,"p-toast"),e.j41(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e.nrm(6,"i",5),e.k0s(),e.j41(7,"div")(8,"h1",6),e.EFF(9,"Inventory Locations"),e.k0s(),e.j41(10,"p",7),e.EFF(11,"Manage warehouses from Retail API"),e.k0s()()(),e.j41(12,"div",8)(13,"p-button",9),e.bIt("onClick",function(){return i.exportLocations()}),e.k0s(),e.j41(14,"p-button",10),e.bIt("onClick",function(){return i.refreshData()}),e.k0s(),e.j41(15,"p-button",11),e.bIt("onClick",function(){return i.createLocation()}),e.k0s()()()(),e.j41(16,"div",12)(17,"div",13)(18,"div",14)(19,"div")(20,"p",15),e.EFF(21,"Total Locations"),e.k0s(),e.j41(22,"p",6),e.EFF(23),e.k0s()(),e.j41(24,"div",16),e.nrm(25,"i",17),e.k0s()()(),e.j41(26,"div",13)(27,"div",14)(28,"div")(29,"p",15),e.EFF(30,"Active Locations"),e.k0s(),e.j41(31,"p",18),e.EFF(32),e.k0s()(),e.j41(33,"div",19),e.nrm(34,"i",20),e.k0s()()(),e.j41(35,"div",13)(36,"div",14)(37,"div")(38,"p",15),e.EFF(39,"Total Capacity"),e.k0s(),e.j41(40,"p",21),e.EFF(41),e.k0s()(),e.j41(42,"div",22),e.nrm(43,"i",23),e.k0s()()()(),e.j41(44,"div",24)(45,"div",25)(46,"div",26)(47,"div")(48,"label",27),e.EFF(49,"Search"),e.k0s(),e.j41(50,"span",28),e.nrm(51,"i",29),e.j41(52,"input",30),e.mxI("ngModelChange",function(l){return e.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),e.bIt("input",function(){return i.onSearch()}),e.k0s()()(),e.j41(53,"div")(54,"label",27),e.EFF(55,"Status"),e.k0s(),e.j41(56,"p-dropdown",31),e.mxI("ngModelChange",function(l){return e.DH7(i.selectedStatus,l)||(i.selectedStatus=l),l}),e.bIt("onChange",function(){return i.onStatusChange()}),e.k0s()(),e.j41(57,"div",32)(58,"p-button",33),e.bIt("onClick",function(){return i.clearFilters()}),e.k0s()()()()(),e.j41(59,"div",34)(60,"div",35)(61,"h2",36),e.EFF(62),e.k0s(),e.j41(63,"p",37),e.EFF(64,"Source: Retail Domain API"),e.k0s()(),e.DNE(65,j,5,0,"div",38)(66,x,4,4,"p-table",39),e.k0s(),e.j41(67,"p-dialog",40),e.mxI("visibleChange",function(l){return e.DH7(i.showLocationDialog,l)||(i.showLocationDialog=l),l}),e.DNE(68,k,39,24,"div",41)(69,T,2,2,"ng-template",42),e.k0s()()),2&o&&(e.R7$(13),e.Y8G("outlined",!0)("rounded",!0),e.R7$(),e.Y8G("outlined",!0)("rounded",!0),e.R7$(9),e.JRh(i.locations.length),e.R7$(9),e.JRh(i.getActiveLocationsCount()),e.R7$(9),e.JRh(i.formatNumber(i.getTotalCapacity())),e.R7$(11),e.R50("ngModel",i.searchTerm),e.R7$(4),e.R50("ngModel",i.selectedStatus),e.Y8G("options",i.statusOptions),e.R7$(2),e.Y8G("outlined",!0),e.R7$(4),e.SpI("Warehouse List (",i.filteredLocations.length,")"),e.R7$(3),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(),e.Aen(e.lJ4(21,y)),e.R50("visible",i.showLocationDialog),e.Y8G("header","create"===i.dialogMode?"Add New Location":"Location Detail")("modal",!0)("closable",!i.saving),e.R7$(),e.Y8G("ngIf",i.editingLocation))},dependencies:[c.MD,c.bT,c.vh,d.YN,d.me,d.BC,d.vS,g.tm,g.$n,p.Ei,_.bG,_.XI,m.Ph,m.lG,h.um,h.Sm,f.kr,f.ms,v.O3,v.YI,C.MB,C.y8,b.EJ,b.Ex],encapsulation:2})}return a})()}}]);