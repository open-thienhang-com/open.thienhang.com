"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8212],{1593:(M,x,o)=>{o.d(x,{VS:()=>U});var e=o(2881),d=o(1360),C=o(5779),b=o(3491),c=o(6263);const j=["*"],y=({dt:r})=>`\n.p-floatlabel {\n    display: block;\n    position: relative;\n}\n\n.p-floatlabel label {\n    position: absolute;\n    pointer-events: none;\n    top: 50%;\n    transform: translateY(-50%);\n    transition-property: all;\n    transition-timing-function: ease;\n    line-height: 1;\n    font-weight: ${r("floatlabel.font.weight")};\n    inset-inline-start: ${r("floatlabel.position.x")};\n    color: ${r("floatlabel.color")};\n    transition-duration: ${r("floatlabel.transition.duration")};\n}\n\n.p-floatlabel:has(.p-textarea) label {\n    top: ${r("floatlabel.position.y")};\n    transform: translateY(0);\n}\n\n.p-floatlabel:has(.p-inputicon:first-child) label {\n    inset-inline-start: calc((${r("form.field.padding.x")} * 2) + ${r("icon.size")});\n}\n\n.p-floatlabel:has(.ng-invalid.ng-dirty) label {\n    color: ${r("floatlabel.invalid.color")};\n}\n\n.p-floatlabel:has(input:focus) label,\n.p-floatlabel:has(input.p-filled) label,\n.p-floatlabel:has(input:-webkit-autofill) label,\n.p-floatlabel:has(textarea:focus) label,\n.p-floatlabel:has(textarea.p-filled) label,\n.p-floatlabel:has(.p-inputwrapper-focus) label,\n.p-floatlabel:has(.p-inputwrapper-filled) label {\n    top: ${r("floatlabel.over.active.top")};\n    transform: translateY(0);\n    font-size: ${r("floatlabel.active.font.size")};\n    font-weight: ${r("floatlabel.label.active.font.weight")};\n}\n\n.p-floatlabel:has(input.p-filled) label,\n.p-floatlabel:has(textarea.p-filled) label,\n.p-floatlabel:has(.p-inputwrapper-filled) label {\n    color: ${r("floatlabel.active.color")};\n}\n\n.p-floatlabel:has(input:focus) label,\n.p-floatlabel:has(input:-webkit-autofill) label,\n.p-floatlabel:has(textarea:focus) label,\n.p-floatlabel:has(.p-inputwrapper-focus) label {\n    color: ${r("floatlabel.focus.color")};\n}\n\n.p-floatlabel-in .p-inputtext,\n.p-floatlabel-in .p-textarea,\n.p-floatlabel-in .p-select-label,\n.p-floatlabel-in .p-multiselect-label-container,\n.p-floatlabel-in .p-autocomplete-input-multiple,\n.p-floatlabel-in .p-cascadeselect-label,\n.p-floatlabel-in .p-treeselect-label {\n    padding-top: ${r("floatlabel.in.input.padding.top")};\n}\n\n.p-floatlabel-in:has(input:focus) label,\n.p-floatlabel-in:has(input.p-filled) label,\n.p-floatlabel-in:has(input:-webkit-autofill) label,\n.p-floatlabel-in:has(textarea:focus) label,\n.p-floatlabel-in:has(textarea.p-filled) label,\n.p-floatlabel-in:has(.p-inputwrapper-focus) label,\n.p-floatlabel-in:has(.p-inputwrapper-filled) label {\n    top: ${r("floatlabel.in.active.top")};\n}\n\n.p-floatlabel-on:has(input:focus) label,\n.p-floatlabel-on:has(input.p-filled) label,\n.p-floatlabel-on:has(input:-webkit-autofill) label,\n.p-floatlabel-on:has(textarea:focus) label,\n.p-floatlabel-on:has(textarea.p-filled) label,\n.p-floatlabel-on:has(.p-inputwrapper-focus) label,\n.p-floatlabel-on:has(.p-inputwrapper-filled) label {\n    top: 0;\n    transform: translateY(-50%);\n    border-radius: ${r("floatlabel.on.border.radius")};\n    background: ${r("floatlabel.on.active.background")};\n    padding: ${r("floatlabel.on.active.padding")};\n}\n`,_={root:({props:g})=>["p-floatlabel",{"p-floatlabel-over":"over"===g.variant,"p-floatlabel-on":"on"===g.variant,"p-floatlabel-in":"in"===g.variant}]};let k=(()=>{class r extends c.j{name="floatlabel";theme=y;classes=_;static \u0275fac=(()=>{let u;return function(m){return(u||(u=d.xGo(r)))(m||r)}})();static \u0275prov=d.jDH({token:r,factory:r.\u0275fac})}return r})(),U=(()=>{class r extends b.${_componentStyle=(0,d.WQX)(k);variant="over";static \u0275fac=(()=>{let u;return function(m){return(u||(u=d.xGo(r)))(m||r)}})();static \u0275cmp=d.VBU({type:r,selectors:[["p-floatlabel"],["p-floatLabel"],["p-float-label"]],hostVars:8,hostBindings:function(f,m){2&f&&d.AVh("p-floatlabel",!0)("p-floatlabel-over","over"===m.variant)("p-floatlabel-on","on"===m.variant)("p-floatlabel-in","in"===m.variant)},inputs:{variant:"variant"},features:[d.Jv_([k]),d.Vt3],ngContentSelectors:j,decls:1,vars:0,template:function(f,m){1&f&&(d.NAR(),d.SdG(0))},dependencies:[e.MD,C.Gg],encapsulation:2,changeDetection:0})}return r})()},8212:(M,x,o)=>{o.r(x),o.d(x,{UsersComponent:()=>te});var e=o(1360),d=o(1570),C=o(1593),b=o(2242),c=o(4341),j=o(6348),y=o(4299),_=o(2881),k=o(935),v=o(8542),U=o(7164),F=o(5779),r=o(7722),g=o(1141);const u=()=>({width:"50vw"});function f(n,a){if(1&n&&(e.j41(0,"div",6),e.nrm(1,"i",7),e.j41(2,"span",8),e.EFF(3),e.k0s()()),2&n){const t=e.XpG();e.R7$(3),e.JRh(t.title)}}function m(n,a){1&n&&(e.j41(0,"div",9),e.nrm(1,"i",10),e.k0s())}function G(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"h3",15),e.EFF(5),e.k0s(),e.j41(6,"div",16)(7,"span",17),e.EFF(8),e.k0s(),e.j41(9,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.copyToClipboard(i.user.kid||i.user._id))}),e.k0s()()()()(),e.j41(10,"div",19)(11,"div",20)(12,"div",21),e.EFF(13,"Email"),e.k0s(),e.j41(14,"div",22),e.nrm(15,"i",23),e.j41(16,"span"),e.EFF(17),e.k0s()()(),e.j41(18,"div",20)(19,"div",21),e.EFF(20,"Company"),e.k0s(),e.j41(21,"div",22),e.nrm(22,"i",24),e.j41(23,"span"),e.EFF(24),e.k0s()()(),e.j41(25,"div",20)(26,"div",21),e.EFF(27,"Account"),e.k0s(),e.j41(28,"div",22),e.nrm(29,"i",25),e.j41(30,"span"),e.EFF(31),e.k0s()()(),e.j41(32,"div",20)(33,"div",21),e.EFF(34,"First Name"),e.k0s(),e.j41(35,"div",26),e.EFF(36),e.k0s()(),e.j41(37,"div",20)(38,"div",21),e.EFF(39,"Last Name"),e.k0s(),e.j41(40,"div",26),e.EFF(41),e.k0s()()(),e.nrm(42,"p-divider"),e.j41(43,"div",27)(44,"div")(45,"span",28),e.EFF(46,"Created:"),e.k0s(),e.j41(47,"span",29),e.EFF(48),e.nI1(49,"date"),e.k0s()(),e.j41(50,"div")(51,"span",28),e.EFF(52,"Updated:"),e.k0s(),e.j41(53,"span",29),e.EFF(54),e.nI1(55,"date"),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(5),e.JRh(t.getFullName()),e.R7$(3),e.JRh(t.user.kid||t.user._id),e.R7$(9),e.JRh(t.user.email||"N/A"),e.R7$(7),e.JRh(t.user.company||"N/A"),e.R7$(7),e.JRh(t.user.account||"N/A"),e.R7$(5),e.JRh(t.user.first_name||"N/A"),e.R7$(5),e.JRh(t.user.last_name||"N/A"),e.R7$(7),e.JRh(e.i5U(49,9,t.user.created_at,"medium")),e.R7$(6),e.JRh(e.i5U(55,12,t.user.updated_at,"medium"))}}function I(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",30)(1,"div",19)(2,"p-floatLabel")(3,"input",31),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.user.first_name,i)||(l.user.first_name=i),e.Njj(i)}),e.k0s(),e.j41(4,"label",32),e.EFF(5,"First Name"),e.k0s()(),e.j41(6,"p-floatLabel")(7,"input",33),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.user.last_name,i)||(l.user.last_name=i),e.Njj(i)}),e.k0s(),e.j41(8,"label",34),e.EFF(9,"Last Name"),e.k0s()()(),e.j41(10,"p-floatLabel")(11,"input",35),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.user.email,i)||(l.user.email=i),e.Njj(i)}),e.k0s(),e.j41(12,"label",36),e.EFF(13,"Email *"),e.k0s()(),e.j41(14,"p-floatLabel")(15,"input",37),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.user.company,i)||(l.user.company=i),e.Njj(i)}),e.k0s(),e.j41(16,"label",38),e.EFF(17,"Company"),e.k0s()(),e.j41(18,"p-floatLabel")(19,"input",39),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.user.account,i)||(l.user.account=i),e.Njj(i)}),e.k0s(),e.j41(20,"label",40),e.EFF(21,"Account"),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(3),e.R50("ngModel",t.user.first_name),e.R7$(4),e.R50("ngModel",t.user.last_name),e.R7$(4),e.R50("ngModel",t.user.email),e.R7$(4),e.R50("ngModel",t.user.company),e.R7$(4),e.R50("ngModel",t.user.account)}}function $(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",47),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.delete())}),e.k0s()}}function V(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.switchToEditMode())}),e.k0s()}}function S(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",49),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.save())}),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("label",t.isEditMode?"Update":"Create")("loading",t.loading)}}function N(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",41)(1,"div"),e.DNE(2,$,1,0,"button",42),e.k0s(),e.j41(3,"div",43)(4,"button",44),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.visible=!1)}),e.k0s(),e.DNE(5,V,1,0,"button",45)(6,S,1,2,"button",46),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.isViewMode),e.R7$(3),e.Y8G("ngIf",t.isViewMode),e.R7$(),e.Y8G("ngIf",!t.isViewMode)}}let D=(()=>{class n extends j.q{injector;governanceServices;messageService;onSave=new e.bkB;user={};title="Create User";visible=!1;loading=!1;isEditMode=!1;isViewMode=!1;constructor(t,s,i){super(t),this.injector=t,this.governanceServices=s,this.messageService=i}save(){if(!this.validateForm())return;this.loading=!0;const t=this.user.kid||this.user._id||this.user.id;(t?this.governanceServices.updateUser(t,this.user):this.governanceServices.createUser(this.user)).subscribe({next:i=>{i&&(this.showSuccess(t?"Updated successfully":"Created successfully"),this.visible=!1,this.user={},this.loading=!1,this.onSave.emit())},error:i=>{console.error("Error saving user:",i),this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${t?"update":"create"} user`}),this.loading=!1}})}show(t){this.visible=!0,this.user={},this.isEditMode=!1,this.isViewMode=!1,t?(this.title="Edit User",this.isEditMode=!0,this.loadUser(t)):this.title="Create User"}view(t){this.visible=!0,this.isViewMode=!0,this.isEditMode=!0,this.title="User Details",this.loadUser(t.kid||t._id||t.id)}edit(t){this.visible=!0,this.isEditMode=!0,this.isViewMode=!1,this.title="Edit User",this.loadUser(t.kid||t._id||t.id)}loadUser(t){this.loading=!0,console.log("Loading user with ID:",t),this.governanceServices.getUser(t).subscribe({next:s=>{console.log("User API response:",s),s?(s.data?(console.log("Using res.data:",s.data),this.user=s.data):(console.log("Using res directly:",s),this.user=s),console.log("Final user object:",this.user),this.loading=!1):console.warn("Empty response from API")},error:s=>{console.error("Error loading user:",s),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load user details"}),this.loading=!1,this.visible=!1}})}delete(){const t=this.user.kid||this.user._id||this.user.id;t?this.confirmOnDelete(new Event("click"),this.governanceServices.deleteUser(t),()=>{this.onSave.emit(),this.visible=!1}):this.messageService.add({severity:"error",summary:"Error",detail:"User ID not found"})}switchToEditMode(){this.isViewMode=!1,this.title="Edit User"}validateForm(){return!!this.user.email?.trim()||(this.messageService.add({severity:"warn",summary:"Validation Error",detail:"Email is required"}),!1)}copyToClipboard(t){navigator.clipboard.writeText(t).then(()=>{this.messageService.add({severity:"success",summary:"Copied",detail:"Text copied to clipboard"})})}getFullName(){return this.user.first_name||this.user.last_name?`${this.user.first_name||""} ${this.user.last_name||""}`.trim():this.user.email||"Unknown User"}static \u0275fac=function(s){return new(s||n)(e.rXU(e.zZn),e.rXU(y.N),e.rXU(F.bg))};static \u0275cmp=e.VBU({type:n,selectors:[["app-user"]],outputs:{onSave:"onSave"},features:[e.Jv_([F.bg]),e.Vt3],decls:7,vars:10,consts:[[3,"visibleChange","visible","modal","draggable","resizable"],["pTemplate","header"],["class","flex justify-center items-center py-8",4,"ngIf"],["class","space-y-6",4,"ngIf"],["class","space-y-4",4,"ngIf"],["pTemplate","footer"],[1,"flex","items-center","gap-2"],[1,"pi","pi-user","text-xl"],[1,"font-semibold","text-xl"],[1,"flex","justify-center","items-center","py-8"],[1,"pi","pi-spin","pi-spinner","text-4xl","text-primary"],[1,"space-y-6"],[1,"bg-gradient-to-r","from-blue-50","to-indigo-50","p-6","rounded-lg","border","border-blue-200"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"text-2xl","font-bold","text-gray-800","mb-2"],[1,"flex","items-center","gap-2","text-gray-600"],[1,"font-mono","text-sm","bg-white","px-3","py-1","rounded","border"],["pButton","","type","button","icon","pi pi-copy","pTooltip","Copy ID",1,"p-button-text","p-button-sm",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"p-4","bg-gray-50","rounded-lg","border","border-gray-200"],[1,"text-sm","text-gray-500","mb-1"],[1,"font-medium","text-gray-800","flex","items-center","gap-2"],[1,"pi","pi-envelope","text-blue-600"],[1,"pi","pi-building","text-purple-600"],[1,"pi","pi-user","text-green-600"],[1,"font-medium","text-gray-800"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"text-gray-500"],[1,"ml-2","text-gray-700"],[1,"space-y-4"],["pInputText","","id","first_name",1,"w-full",3,"ngModelChange","ngModel"],["for","first_name"],["pInputText","","id","last_name",1,"w-full",3,"ngModelChange","ngModel"],["for","last_name"],["pInputText","","id","email","type","email","required","",1,"w-full",3,"ngModelChange","ngModel"],["for","email"],["pInputText","","id","company",1,"w-full",3,"ngModelChange","ngModel"],["for","company"],["pInputText","","id","account",1,"w-full",3,"ngModelChange","ngModel"],["for","account"],[1,"flex","justify-between","w-full"],["pButton","","type","button","label","Delete","icon","pi pi-trash","class","p-button-danger p-button-outlined",3,"click",4,"ngIf"],[1,"flex","gap-2"],["pButton","","type","button","label","Cancel","icon","pi pi-times",1,"p-button-outlined",3,"click"],["pButton","","type","button","label","Edit","icon","pi pi-pencil",3,"click",4,"ngIf"],["pButton","","type","button","icon","pi pi-check",3,"label","loading","click",4,"ngIf"],["pButton","","type","button","label","Delete","icon","pi pi-trash",1,"p-button-danger","p-button-outlined",3,"click"],["pButton","","type","button","label","Edit","icon","pi pi-pencil",3,"click"],["pButton","","type","button","icon","pi pi-check",3,"click","label","loading"]],template:function(s,i){1&s&&(e.j41(0,"p-dialog",0),e.mxI("visibleChange",function(p){return e.DH7(i.visible,p)||(i.visible=p),p}),e.DNE(1,f,4,1,"ng-template",1)(2,m,2,0,"div",2)(3,G,56,15,"div",3)(4,I,22,5,"div",4)(5,N,7,3,"ng-template",5),e.k0s(),e.nrm(6,"p-toast")),2&s&&(e.Aen(e.lJ4(9,u)),e.R50("visible",i.visible),e.Y8G("modal",!0)("draggable",!1)("resizable",!1),e.R7$(2),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",i.isViewMode&&!i.loading),e.R7$(),e.Y8G("ngIf",!i.isViewMode&&!i.loading))},dependencies:[_.MD,_.bT,_.vh,c.YN,c.me,c.BC,c.YS,c.vS,c.X1,g.tm,g._f,F.Ei,d.lG,C.VS,b.Sm,k.$C,v.Ss,v.m_,U.mN,U.cG,r.MB,r.y8],encapsulation:2})}return n})();var B=o(6221),R=o(8150),w=o(6150),T=o(6627),E=o(4799);const Y=["userDetail"];function X(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",2)(1,"div",42)(2,"div",43)(3,"label",44),e.EFF(4,"Search"),e.k0s(),e.j41(5,"span",45),e.nrm(6,"i",46),e.j41(7,"input",47),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.searchTerm,i)||(l.searchTerm=i),e.Njj(i)}),e.bIt("input",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.filterUsers())}),e.k0s()()(),e.j41(8,"div",43)(9,"label",48),e.EFF(10,"Status"),e.k0s(),e.j41(11,"p-dropdown",49),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.selectedStatus,i)||(l.selectedStatus=i),e.Njj(i)}),e.bIt("onChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.filterUsers())}),e.k0s()(),e.j41(12,"div",43)(13,"label",50),e.EFF(14,"Role"),e.k0s(),e.j41(15,"p-dropdown",51),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.selectedRole,i)||(l.selectedRole=i),e.Njj(i)}),e.bIt("onChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.filterUsers())}),e.k0s()(),e.j41(16,"div",43)(17,"label",52),e.EFF(18,"Team"),e.k0s(),e.j41(19,"p-dropdown",53),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.selectedTeam,i)||(l.selectedTeam=i),e.Njj(i)}),e.bIt("onChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.filterUsers())}),e.k0s()()(),e.j41(20,"div",54)(21,"p-button",55),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyFilters())}),e.k0s(),e.j41(22,"p-button",56),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.clearFilters())}),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(7),e.R50("ngModel",t.searchTerm),e.R7$(4),e.Y8G("options",t.statusOptions),e.R50("ngModel",t.selectedStatus),e.Y8G("showClear",!0),e.R7$(4),e.Y8G("options",t.roleOptions),e.R50("ngModel",t.selectedRole),e.Y8G("showClear",!0),e.R7$(4),e.Y8G("options",t.teamOptions),e.R50("ngModel",t.selectedTeam),e.Y8G("showClear",!0),e.R7$(3),e.Y8G("outlined",!0)}}function L(n,a){if(1&n&&(e.j41(0,"div",79),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" Teams: ",t.teams.length," ")}}function P(n,a){1&n&&(e.j41(0,"div",79),e.nrm(1,"i",80),e.EFF(2," Verified "),e.k0s())}function A(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr",64)(1,"td",65)(2,"div",66)(3,"div",67),e.nrm(4,"i",68),e.k0s(),e.j41(5,"div")(6,"div",69),e.EFF(7),e.k0s(),e.j41(8,"div",70),e.EFF(9),e.k0s()()()(),e.j41(10,"td",65)(11,"div")(12,"div",71),e.EFF(13),e.k0s(),e.j41(14,"div",70),e.EFF(15),e.k0s()()(),e.j41(16,"td",65)(17,"div",72),e.nrm(18,"p-badge",73),e.DNE(19,L,2,1,"div",74),e.k0s()(),e.j41(20,"td",65)(21,"div",72),e.nrm(22,"p-badge",73),e.DNE(23,P,3,0,"div",74),e.k0s()(),e.j41(24,"td",65)(25,"div",70),e.EFF(26),e.nI1(27,"date"),e.k0s()(),e.j41(28,"td",65)(29,"div",36)(30,"p-button",75),e.bIt("click",function(){const i=e.eBV(t).$implicit;e.XpG(2);const l=e.sdS(71);return e.Njj(l.view(i))}),e.k0s(),e.j41(31,"p-button",76),e.bIt("click",function(){const i=e.eBV(t).$implicit;e.XpG(2);const l=e.sdS(71);return e.Njj(l.edit(i))}),e.k0s(),e.j41(32,"p-button",77),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.managePermissions(i))}),e.k0s(),e.j41(33,"p-button",78),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.deleteUser(i))}),e.k0s()()()()}if(2&n){const t=a.$implicit,s=e.XpG(2);e.R7$(7),e.Lme("",t.first_name," ",t.last_name,""),e.R7$(2),e.JRh(t.username||t.email),e.R7$(4),e.JRh(t.email),e.R7$(2),e.JRh(t.phone||"N/A"),e.R7$(3),e.Y8G("value",t.role||"User")("severity",s.getRoleSeverity(t.role)),e.R7$(),e.Y8G("ngIf",null==t.teams?null:t.teams.length),e.R7$(3),e.Y8G("value",t.status||"Active")("severity",s.getStatusSeverity(t.status)),e.R7$(),e.Y8G("ngIf",t.is_verified),e.R7$(3),e.SpI(" ",t.last_login?e.i5U(27,20,t.last_login,"short"):"Never"," "),e.R7$(4),e.Y8G("rounded",!0)("text",!0),e.R7$(),e.Y8G("rounded",!0)("text",!0),e.R7$(),e.Y8G("rounded",!0)("text",!0),e.R7$(),e.Y8G("rounded",!0)("text",!0)}}function O(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td",81)(2,"div",82)(3,"div",83),e.nrm(4,"i",84),e.k0s(),e.j41(5,"h3",85),e.EFF(6,"No users found"),e.k0s(),e.j41(7,"p",86),e.EFF(8,"Try adjusting your search criteria or create a new user."),e.k0s(),e.j41(9,"p-button",87),e.bIt("click",function(){e.eBV(t),e.XpG(2);const i=e.sdS(71);return e.Njj(i.show())}),e.k0s()()()()}}function J(n,a){if(1&n&&(e.j41(0,"div",57)(1,"table",58)(2,"thead",59)(3,"tr")(4,"th",60),e.EFF(5,"User"),e.k0s(),e.j41(6,"th",60),e.EFF(7,"Contact"),e.k0s(),e.j41(8,"th",60),e.EFF(9,"Role & Team"),e.k0s(),e.j41(10,"th",60),e.EFF(11,"Status"),e.k0s(),e.j41(12,"th",60),e.EFF(13,"Last Active"),e.k0s(),e.j41(14,"th",60),e.EFF(15,"Actions"),e.k0s()()(),e.j41(16,"tbody",61),e.DNE(17,A,34,23,"tr",62)(18,O,10,0,"tr",63),e.k0s()()()),2&n){const t=e.XpG();e.R7$(17),e.Y8G("ngForOf",t.filteredUsers),e.R7$(),e.Y8G("ngIf",0===t.filteredUsers.length)}}function z(n,a){if(1&n&&(e.j41(0,"div",36),e.nrm(1,"i",109),e.j41(2,"span",101),e.EFF(3),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.phone)}}function H(n,a){if(1&n&&(e.j41(0,"div",36),e.nrm(1,"i",110),e.j41(2,"span",101),e.EFF(3),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(3),e.SpI("",t.teams.length," teams")}}function W(n,a){if(1&n&&(e.j41(0,"div",36),e.nrm(1,"i",111),e.j41(2,"span",101),e.EFF(3),e.nI1(4,"date"),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(3),e.SpI("Last active: ",e.i5U(4,1,t.last_active,"short"),"")}}function K(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",93)(1,"div",94)(2,"div",66)(3,"div",95),e.nrm(4,"i",96),e.k0s(),e.j41(5,"div")(6,"h3",97),e.EFF(7),e.k0s(),e.j41(8,"p",70),e.EFF(9),e.k0s()()(),e.nrm(10,"p-badge",98),e.k0s(),e.j41(11,"div",99)(12,"div",36),e.nrm(13,"i",100),e.j41(14,"span",101),e.EFF(15),e.k0s()(),e.DNE(16,z,4,1,"div",102),e.j41(17,"div",36),e.nrm(18,"i",103)(19,"p-badge",73),e.k0s(),e.DNE(20,H,4,1,"div",102)(21,W,5,4,"div",102),e.k0s(),e.j41(22,"div",104)(23,"p-button",105),e.bIt("click",function(){const i=e.eBV(t).$implicit;e.XpG(3);const l=e.sdS(71);return e.Njj(l.view(i))}),e.k0s(),e.j41(24,"p-button",106),e.bIt("click",function(){const i=e.eBV(t).$implicit;e.XpG(3);const l=e.sdS(71);return e.Njj(l.edit(i))}),e.k0s(),e.j41(25,"p-button",107),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG(3);return e.Njj(l.managePermissions(i))}),e.k0s(),e.j41(26,"p-button",108),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG(3);return e.Njj(l.deleteUser(i))}),e.k0s()()()}if(2&n){const t=a.$implicit,s=e.XpG(3);e.R7$(7),e.Lme("",t.first_name," ",t.last_name,""),e.R7$(2),e.JRh(t.username||t.email),e.R7$(),e.Y8G("value",t.status||"Active")("severity",s.getStatusSeverity(t.status)),e.R7$(5),e.JRh(t.email),e.R7$(),e.Y8G("ngIf",t.phone),e.R7$(3),e.Y8G("value",t.role||"User")("severity",s.getRoleSeverity(t.role)),e.R7$(),e.Y8G("ngIf",null==t.teams?null:t.teams.length),e.R7$(),e.Y8G("ngIf",t.last_active),e.R7$(2),e.Y8G("text",!0),e.R7$(),e.Y8G("text",!0),e.R7$(),e.Y8G("text",!0),e.R7$(),e.Y8G("text",!0)}}function Q(n,a){if(1&n&&(e.j41(0,"div",91),e.DNE(1,K,27,15,"div",92),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.filteredUsers)}}function Z(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",112)(1,"div",113),e.nrm(2,"i",114),e.j41(3,"div")(4,"h3",115),e.EFF(5,"No users found"),e.k0s(),e.j41(6,"p",116),e.EFF(7,"Try adjusting your search criteria or create a new user."),e.k0s()(),e.j41(8,"p-button",87),e.bIt("click",function(){e.eBV(t),e.XpG(2);const i=e.sdS(71);return e.Njj(i.show())}),e.k0s()()()}}function q(n,a){if(1&n&&(e.j41(0,"div",88),e.DNE(1,Q,2,1,"div",89)(2,Z,9,0,"div",90),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.filteredUsers.length>0),e.R7$(),e.Y8G("ngIf",0===t.filteredUsers.length)}}function ee(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",117)(1,"p-paginator",118),e.bIt("onPageChange",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.onPageChange(i))}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("rows",t.tableRowsPerPage)("totalRecords",t.totalRecords)}}let te=(()=>{class n extends j.q{injector;governanceServices;userDetail;users=[];filteredUsers=[];totalUsers=0;activeUsers=0;pendingUsers=0;adminUsers=0;searchTerm="";selectedStatus=null;selectedRole=null;selectedTeam=null;viewMode="list";statusOptions=[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Pending",value:"pending"},{label:"Suspended",value:"suspended"}];roleOptions=[{label:"Admin",value:"admin"},{label:"Manager",value:"manager"},{label:"User",value:"user"},{label:"Viewer",value:"viewer"}];teamOptions=[];totalRecords=0;tableRowsPerPage=10;currentPage=0;isTableLoading=!1;constructor(t,s){super(t),this.injector=t,this.governanceServices=s}ngOnInit(){this.getUsers()}getUsers=(t=0)=>{this.isTableLoading=!0,this.governanceServices.getUsers({size:this.tableRowsPerPage,offset:t*this.tableRowsPerPage,search:this.searchTerm||void 0,status:this.selectedStatus?.value||void 0,role:this.selectedRole?.value||void 0,team_id:this.selectedTeam?.value||void 0}).subscribe({next:i=>{i&&i.data&&(this.users=i.data,this.filteredUsers=[...this.users],this.totalRecords=i.total||this.users.length,this.calculateStats()),this.isTableLoading=!1},error:i=>{console.error("Error loading users:",i),this.showError("Failed to load users"),this.isTableLoading=!1}})};calculateStats(){this.totalUsers=this.users.length,this.activeUsers=this.users.filter(t=>"active"===t.status||t.is_active).length,this.pendingUsers=this.users.filter(t=>"pending"===t.status||!t.is_verified).length,this.adminUsers=this.users.filter(t=>"admin"===t.role).length}filterUsers(){this.filteredUsers=this.users.filter(t=>{const s=!this.searchTerm||`${t.first_name} ${t.last_name}`.toLowerCase().includes(this.searchTerm.toLowerCase())||t.email.toLowerCase().includes(this.searchTerm.toLowerCase()),i=!this.selectedStatus||t.status===this.selectedStatus||"active"===this.selectedStatus&&t.is_active,l=!this.selectedRole||t.role===this.selectedRole,p=!this.selectedTeam||t.teams&&t.teams.some(h=>h===this.selectedTeam);return s&&i&&l&&p})}refreshUsers(){this.getUsers()}exportUsers(){console.log("Exporting users...")}viewUser(t){console.log("Viewing user:",t)}managePermissions(t){console.log("Managing permissions for user:",t)}deleteUser(t){this.confirmOnDelete(null,this.governanceServices.deleteUser(t._id),this.getUsers)}onDeleteUser(t,s){this.confirmOnDelete(t,this.governanceServices.deleteUser(s),this.getUsers)}onPageChange(t){this.getUsers(t.page)}toggleViewMode(){this.viewMode="list"===this.viewMode?"card":"list"}setViewMode(t){this.viewMode=t}showFilters=!1;toggleFilters(){this.showFilters=!this.showFilters}applyFilters(){this.getUsers(0)}clearFilters(){this.searchTerm="",this.selectedRole="",this.selectedStatus="",this.getUsers(0)}getRoleSeverity(t){switch(t?.toLowerCase()){case"admin":return"danger";case"manager":return"warning";case"user":return"info";default:return"secondary"}}getStatusSeverity(t){switch(t?.toLowerCase()){case"active":default:return"success";case"inactive":return"secondary";case"pending":return"warning";case"suspended":return"danger"}}static \u0275fac=function(s){return new(s||n)(e.rXU(e.zZn),e.rXU(y.N))};static \u0275cmp=e.VBU({type:n,selectors:[["app-users"]],viewQuery:function(s,i){if(1&s&&e.GBs(Y,5),2&s){let l;e.mGM(l=e.lsd())&&(i.userDetail=l.first)}},features:[e.Vt3],decls:72,vars:23,consts:[["userDetail",""],[1,"bg-gray-50","min-h-screen","p-6"],[1,"bg-white","rounded-lg","shadow-sm","p-6","mb-6"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-gradient-to-br","from-blue-500","to-indigo-600","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-users","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"flex","flex-wrap","items-center","gap-2","sm:gap-3"],["icon","pi pi-refresh","severity","info","pTooltip","Refresh Users",1,"hidden","sm:inline-flex",3,"click","outlined","rounded"],["icon","pi pi-trash","severity","warning","pTooltip","Clear Cache",1,"hidden","sm:inline-flex",3,"outlined","rounded"],["icon","pi pi-download","severity","secondary","pTooltip","Export Users",1,"hidden","sm:inline-flex",3,"click","outlined","rounded"],["icon","pi pi-filter","severity","secondary","pTooltip","Toggle Filters",1,"hidden","sm:inline-flex",3,"click","outlined","rounded"],["icon","pi pi-list","severity","secondary","pTooltip","List View",1,"hidden","sm:inline-flex",3,"click","outlined","rounded"],["icon","pi pi-th-large","severity","secondary","pTooltip","Card View",1,"hidden","sm:inline-flex",3,"click","outlined","rounded"],["label","Add User","icon","pi pi-plus","severity","primary","size","small",1,"sm:hidden",3,"click"],["icon","pi pi-plus","severity","primary","pTooltip","Add User",1,"hidden","sm:inline-flex",3,"click","rounded"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-6","mb-6"],[1,"bg-white","rounded-lg","shadow-sm","p-6"],[1,"text-sm","font-medium","text-gray-600"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-users","text-blue-600","text-xl"],[1,"text-3xl","font-bold","text-green-600"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-check-circle","text-green-600","text-xl"],[1,"text-3xl","font-bold","text-yellow-600"],[1,"w-12","h-12","bg-yellow-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-clock","text-yellow-600","text-xl"],[1,"text-3xl","font-bold","text-purple-600"],[1,"w-12","h-12","bg-purple-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-shield","text-purple-600","text-xl"],["class","bg-white rounded-lg shadow-sm p-6 mb-6",4,"ngIf"],[1,"bg-white","rounded-xl","border","border-gray-200","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],[1,"flex","items-center","gap-2"],["icon","pi pi-refresh","severity","secondary","pTooltip","Refresh",3,"click","rounded","text"],["class","overflow-x-auto",4,"ngIf"],["class","p-6",4,"ngIf"],["class","px-6 py-4 border-t border-gray-200",4,"ngIf"],[3,"onSave"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-4"],[1,"flex","flex-col","gap-2"],["for","search",1,"text-sm","font-medium","text-gray-700"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["id","search","type","text","pInputText","","placeholder","Search by name, email...",1,"w-full",3,"ngModelChange","input","ngModel"],["for","status",1,"text-sm","font-medium","text-gray-700"],["id","status","placeholder","All Status",1,"w-full",3,"ngModelChange","onChange","options","ngModel","showClear"],["for","role",1,"text-sm","font-medium","text-gray-700"],["id","role","placeholder","All Roles",1,"w-full",3,"ngModelChange","onChange","options","ngModel","showClear"],["for","team",1,"text-sm","font-medium","text-gray-700"],["id","team","placeholder","All Teams",1,"w-full",3,"ngModelChange","onChange","options","ngModel","showClear"],[1,"flex","justify-end","gap-2"],["label","Apply Filters","icon","pi pi-check","severity","primary",3,"onClick"],["label","Clear Filters","icon","pi pi-filter-slash","severity","secondary",3,"onClick","outlined"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"hover:bg-gray-50"],[1,"px-6","py-4"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","bg-gradient-to-br","from-blue-500","to-purple-600","rounded-full","flex","items-center","justify-center"],[1,"pi","pi-user","text-white"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-gray-900"],[1,"space-y-1"],[1,"text-xs",3,"value","severity"],["class","text-xs text-gray-500",4,"ngIf"],["icon","pi pi-eye","severity","info","size","small","pTooltip","View Details",3,"click","rounded","text"],["icon","pi pi-pencil","severity","secondary","size","small","pTooltip","Edit User",3,"click","rounded","text"],["icon","pi pi-shield","severity","warning","size","small","pTooltip","Manage Permissions",3,"click","rounded","text"],["icon","pi pi-trash","severity","danger","size","small","pTooltip","Delete User",3,"click","rounded","text"],[1,"text-xs","text-gray-500"],[1,"pi","pi-verified","text-green-500"],["colspan","6",1,"px-6","py-12","text-center"],[1,"flex","flex-col","items-center"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mb-4"],[1,"pi","pi-users","text-gray-400","text-2xl"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],["label","Add First User","icon","pi pi-plus","severity","primary",3,"click"],[1,"p-6"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],["class","text-center p-8",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",4,"ngFor","ngForOf"],[1,"bg-white","border","border-gray-200","rounded-lg","p-6","hover:shadow-md","transition-shadow"],[1,"flex","items-start","justify-between","mb-4"],[1,"w-12","h-12","bg-gradient-to-br","from-blue-500","to-purple-600","rounded-full","flex","items-center","justify-center"],[1,"pi","pi-user","text-white","text-lg"],[1,"font-semibold","text-gray-900"],[3,"value","severity"],[1,"space-y-3","mb-4"],[1,"pi","pi-envelope","text-gray-400"],[1,"text-sm","text-gray-600"],["class","flex items-center gap-2",4,"ngIf"],[1,"pi","pi-shield","text-gray-400"],[1,"flex","items-center","gap-2","pt-4","border-t","border-gray-200"],["icon","pi pi-eye","severity","info","size","small","pTooltip","View User",3,"click","text"],["icon","pi pi-pencil","severity","secondary","size","small","pTooltip","Edit User",3,"click","text"],["icon","pi pi-shield","severity","warning","size","small","pTooltip","Manage Permissions",3,"click","text"],["icon","pi pi-trash","severity","danger","size","small","pTooltip","Delete User",3,"click","text"],[1,"pi","pi-phone","text-gray-400"],[1,"pi","pi-users","text-gray-400"],[1,"pi","pi-clock","text-gray-400"],[1,"text-center","p-8"],[1,"flex","flex-col","items-center","gap-4"],[1,"pi","pi-users","text-gray-400","text-4xl"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-gray-500"],[1,"px-6","py-4","border-t","border-gray-200"],[3,"onPageChange","rows","totalRecords"]],template:function(s,i){if(1&s){const l=e.RV6();e.nrm(0,"p-toast")(1,"p-confirmDialog"),e.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e.nrm(7,"i",6),e.k0s(),e.j41(8,"div")(9,"h1",7),e.EFF(10,"User Management"),e.k0s(),e.j41(11,"p",8),e.EFF(12,"Manage user accounts, roles, and access permissions"),e.k0s()()(),e.j41(13,"div",9)(14,"p-button",10),e.bIt("click",function(){return e.eBV(l),e.Njj(i.refreshUsers())}),e.k0s(),e.nrm(15,"p-button",11),e.j41(16,"p-button",12),e.bIt("click",function(){return e.eBV(l),e.Njj(i.exportUsers())}),e.k0s(),e.j41(17,"p-button",13),e.bIt("click",function(){return e.eBV(l),e.Njj(i.toggleFilters())}),e.k0s(),e.j41(18,"p-button",14),e.bIt("click",function(){return e.eBV(l),e.Njj(i.setViewMode("list"))}),e.k0s(),e.j41(19,"p-button",15),e.bIt("click",function(){return e.eBV(l),e.Njj(i.setViewMode("card"))}),e.k0s(),e.j41(20,"p-button",16),e.bIt("click",function(){e.eBV(l);const h=e.sdS(71);return e.Njj(h.show())}),e.k0s(),e.j41(21,"p-button",17),e.bIt("click",function(){e.eBV(l);const h=e.sdS(71);return e.Njj(h.show())}),e.k0s()()()(),e.j41(22,"div",18)(23,"div",19)(24,"div",3)(25,"div")(26,"p",20),e.EFF(27,"Total Users"),e.k0s(),e.j41(28,"p",7),e.EFF(29),e.k0s()(),e.j41(30,"div",21),e.nrm(31,"i",22),e.k0s()()(),e.j41(32,"div",19)(33,"div",3)(34,"div")(35,"p",20),e.EFF(36,"Active Users"),e.k0s(),e.j41(37,"p",23),e.EFF(38),e.k0s()(),e.j41(39,"div",24),e.nrm(40,"i",25),e.k0s()()(),e.j41(41,"div",19)(42,"div",3)(43,"div")(44,"p",20),e.EFF(45,"Pending Verification"),e.k0s(),e.j41(46,"p",26),e.EFF(47),e.k0s()(),e.j41(48,"div",27),e.nrm(49,"i",28),e.k0s()()(),e.j41(50,"div",19)(51,"div",3)(52,"div")(53,"p",20),e.EFF(54,"Admin Users"),e.k0s(),e.j41(55,"p",29),e.EFF(56),e.k0s()(),e.j41(57,"div",30),e.nrm(58,"i",31),e.k0s()()()(),e.DNE(59,X,23,11,"div",32),e.j41(60,"div",33)(61,"div",34)(62,"div",3)(63,"h2",35),e.EFF(64,"Users"),e.k0s(),e.j41(65,"div",36)(66,"p-button",37),e.bIt("click",function(){return e.eBV(l),e.Njj(i.refreshUsers())}),e.k0s()()()(),e.DNE(67,J,19,2,"div",38)(68,q,3,2,"div",39)(69,ee,2,2,"div",40),e.k0s()(),e.j41(70,"app-user",41,0),e.bIt("onSave",function(){return e.eBV(l),e.Njj(i.refreshUsers())}),e.k0s()}2&s&&(e.R7$(14),e.Y8G("outlined",!0)("rounded",!0),e.R7$(),e.Y8G("outlined",!0)("rounded",!0),e.R7$(),e.Y8G("outlined",!0)("rounded",!0),e.R7$(),e.Y8G("outlined",!i.showFilters)("rounded",!0),e.R7$(),e.Y8G("outlined","list"!==i.viewMode)("rounded",!0),e.R7$(),e.Y8G("outlined","card"!==i.viewMode)("rounded",!0),e.R7$(2),e.Y8G("rounded",!0),e.R7$(8),e.JRh(i.totalUsers||0),e.R7$(9),e.JRh(i.activeUsers||0),e.R7$(9),e.JRh(i.pendingUsers||0),e.R7$(9),e.JRh(i.adminUsers||0),e.R7$(3),e.Y8G("ngIf",i.showFilters),e.R7$(7),e.Y8G("rounded",!0)("text",!0),e.R7$(),e.Y8G("ngIf","list"===i.viewMode),e.R7$(),e.Y8G("ngIf","card"===i.viewMode),e.R7$(),e.Y8G("ngIf",i.filteredUsers.length>0))},dependencies:[_.MD,_.Sq,_.bT,_.vh,c.YN,c.me,c.BC,c.vS,D,g.$n,B.bG,b.um,b.Sm,R.kr,R.ms,w.EJ,w.Ex,T.IP,T.mg,v.Ss,v.m_,r.MB,r.y8,E.FP,E.TM],encapsulation:2})}return n})()}}]);