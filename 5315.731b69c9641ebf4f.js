"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[5315,7696],{2215:(E,d,s)=>{s.d(d,{G:()=>v});var h=s(8989),f=s(8810),l=s(6354),i=s(9437),g=s(1360),r=s(4412),u=s(1985);let p=(()=>{class a{configs={local:{environment:"local",host:"http://localhost:8081",name:"Local Development"},production:{environment:"production",host:"https://test-api.routing-deviation.ghn.tech",name:"Production API"}};currentConfigSubject=new r.t(this.configs.local);currentConfig$=this.currentConfigSubject.asObservable();constructor(){this.loadSavedConfig()}getCurrentConfig(){return this.currentConfigSubject.value}getHost(){return this.getCurrentConfig().host}getEnvironment(){return this.getCurrentConfig().environment}switchEnvironment(e){const t=this.configs[e];t&&(this.currentConfigSubject.next(t),this.saveConfig(t),console.log(`[API Config] Switched to ${t.name} (${t.host})`))}getAvailableConfigs(){return Object.values(this.configs)}isLocal(){return"local"===this.getEnvironment()}isProduction(){return"production"===this.getEnvironment()}testConnection(){const e=this.getHost(),t=`${e}/_`;return new u.c(o=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).then(n=>{o.next(n.ok?{success:!0,host:e}:{success:!1,host:e,status:n.status}),o.complete()}).catch(n=>{o.next({success:!1,host:e,error:n.message}),o.complete()})})}loadSavedConfig(){try{if(typeof window<"u"&&window.localStorage){const e=localStorage.getItem("api-config");if(e){const t=JSON.parse(e);t.environment&&this.configs[t.environment]&&this.currentConfigSubject.next(this.configs[t.environment])}}}catch(e){console.warn("[API Config] Failed to load saved config:",e)}}saveConfig(e){try{typeof window<"u"&&window.localStorage&&localStorage.setItem("api-config",JSON.stringify({environment:e.environment}))}catch(t){console.warn("[API Config] Failed to save config:",t)}}static \u0275fac=function(t){return new(t||a)};static \u0275prov=g.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),v=(()=>{class a{http;apiConfig;defaultTimeout=3e4;authToken="ZCXb4Thq56HgXlQC4IKS4EcghaYt6xxmIoHdazBJgVBRAwYqbLhx9rE3QTuzIqpo";constructor(e,t){this.http=e,this.apiConfig=t}getAuthHeaders(){const e={"Content-Type":"application/json"},t=this.authToken;return t&&(e.Authorization=`Bearer ${t}`),new h.Lr(e)}getHost(){return this.apiConfig.getHost()}getUrl(e){return this.getHost()+(e.startsWith("/")?e:"/"+e)}handleError(e){let t;return t=typeof ErrorEvent<"u"&&e.error instanceof ErrorEvent?{status:0,message:"Network error",error:"NETWORK_ERROR"}:{status:e.status,message:e.error?.message||e.message||"Server error",error:e.error?.error||"SERVER_ERROR",data:e.error},console.error("[API Error]",t),(0,f.$)(()=>t)}transformResponse(e){return{ok:!0,status:200,data:e,message:"Success"}}get(e,t){const o=this.getUrl(e);let n=new h.Nl;return t&&Object.keys(t).forEach(c=>{null!=t[c]&&(n=n.set(c,t[c].toString()))}),console.log(`[API] GET ${o}`,t),this.http.get(o,{params:n,headers:this.getAuthHeaders()}).pipe((0,l.T)(c=>this.transformResponse(c)),(0,i.W)(c=>this.handleError(c)))}post(e,t){const o=this.getUrl(e);return console.log(`[API] POST ${o}`,t),this.http.post(o,t,{headers:this.getAuthHeaders()}).pipe((0,l.T)(n=>this.transformResponse(n)),(0,i.W)(n=>this.handleError(n)))}put(e,t){const o=this.getUrl(e);return console.log(`[API] PUT ${o}`,t),this.http.put(o,t,{headers:this.getAuthHeaders()}).pipe((0,l.T)(n=>this.transformResponse(n)),(0,i.W)(n=>this.handleError(n)))}delete(e,t){const o=this.getUrl(e);return console.log(`[API] DELETE ${o}`,t),this.http.delete(o,{headers:this.getAuthHeaders(),body:t}).pipe((0,l.T)(n=>this.transformResponse(n)),(0,i.W)(n=>this.handleError(n)))}patch(e,t){const o=this.getUrl(e);return console.log(`[API] PATCH ${o}`,t),this.http.patch(o,t,{headers:this.getAuthHeaders()}).pipe((0,l.T)(n=>this.transformResponse(n)),(0,i.W)(n=>this.handleError(n)))}upload(e,t){const o=this.getUrl(e);console.log(`[API] UPLOAD ${o}`);const n={},c=this.authToken;return c&&(n.Authorization=`Bearer ${c}`),this.http.post(o,t,{headers:new h.Lr(n)}).pipe((0,l.T)(m=>this.transformResponse(m)),(0,i.W)(m=>this.handleError(m)))}static \u0275fac=function(t){return new(t||a)(g.KVO(h.Qq),g.KVO(p))};static \u0275prov=g.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},5315:(E,d,s)=>{s.d(d,{J:()=>l});var h=s(1360),f=s(2215);let l=(()=>{class i{api;constructor(r){this.api=r}getPlan(r){return this.api.post("/routing-deviation/internal/get",{plan_id:r})}getPlans(r){return this.api.post("/routing-deviation/internal/plans",r||{})}createPlan(r){return this.api.post("/routing-deviation/internal/plans",r)}uploadPlan(r){return this.api.upload("/routing-deviation/internal/import",r)}deletePlan(r){return this.api.post("/routing-deviation/internal/delete",{plan_id:r})}predictPlan(r,u){const p=u?new URLSearchParams(u).toString():"";return this.api.post(`/api/v1/route-deviation/plan/${r}/predict${p?"?"+p:""}`,null)}static \u0275fac=function(u){return new(u||i)(h.KVO(f.G))};static \u0275prov=h.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()}}]);