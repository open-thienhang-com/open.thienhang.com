"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[3385],{3385:(O,p,a)=>{a.r(p),a.d(p,{ChatDashboardComponent:()=>P});var t=a(1360),l=a(2881),d=a(9417),v=a(1910),f=a(7468),y=a(5953),b=a(491),m=a(8559),c=a(6221),u=a(1141),g=a(935),_=a(5716),h=a(8150),C=a(5779);function E(o,r){if(1&o&&(t.j41(0,"div",18)(1,"div",19)(2,"div",20)(3,"div")(4,"p",21),t.EFF(5,"Total Conversations"),t.k0s(),t.j41(6,"p",6),t.EFF(7),t.k0s()(),t.j41(8,"div",22),t.nrm(9,"i",23),t.k0s()()(),t.j41(10,"div",19)(11,"div",20)(12,"div")(13,"p",21),t.EFF(14,"Active Conversations"),t.k0s(),t.j41(15,"p",24),t.EFF(16),t.k0s()(),t.j41(17,"div",25),t.nrm(18,"i",26),t.k0s()()(),t.j41(19,"div",19)(20,"div",20)(21,"div")(22,"p",21),t.EFF(23,"Avg Response"),t.k0s(),t.j41(24,"p",27),t.EFF(25),t.k0s()(),t.j41(26,"div",28),t.nrm(27,"i",29),t.k0s()()(),t.j41(28,"div",19)(29,"div",20)(30,"div")(31,"p",21),t.EFF(32,"Satisfaction"),t.k0s(),t.j41(33,"p",30),t.EFF(34),t.k0s()(),t.j41(35,"div",31),t.nrm(36,"i",32),t.k0s()()()()),2&o){const e=t.XpG();t.R7$(7),t.JRh(e.summary.summary.total_conversations),t.R7$(9),t.JRh(e.summary.summary.active_conversations),t.R7$(9),t.JRh(e.summary.summary.avg_response_time),t.R7$(9),t.SpI("",e.summary.summary.customer_satisfaction,"/5")}}function x(o,r){if(1&o){const e=t.RV6();t.j41(0,"div",1)(1,"div",33)(2,"div",34)(3,"label",35),t.EFF(4,"Period"),t.k0s(),t.j41(5,"p-dropdown",36),t.mxI("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.DH7(s.selectedPeriod,i)||(s.selectedPeriod=i),t.Njj(i)}),t.k0s()()(),t.j41(6,"div",37)(7,"p-button",38),t.bIt("onClick",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.applyFilters())}),t.k0s(),t.j41(8,"p-button",39),t.bIt("onClick",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.resetFilters())}),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(5),t.Y8G("options",e.periodOptions),t.R50("ngModel",e.selectedPeriod),t.R7$(3),t.Y8G("outlined",!0)}}function D(o,r){1&o&&(t.j41(0,"div",19)(1,"div",40),t.nrm(2,"p-skeleton",41)(3,"p-skeleton",41)(4,"p-skeleton",41),t.k0s()())}function k(o,r){1&o&&(t.j41(0,"tr")(1,"th"),t.EFF(2,"Type"),t.k0s(),t.j41(3,"th"),t.EFF(4,"User/Agent"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Platform"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Time"),t.k0s()())}function j(o,r){if(1&o&&(t.j41(0,"tr")(1,"td"),t.nrm(2,"p-tag",54),t.k0s(),t.j41(3,"td")(4,"span",55),t.EFF(5),t.k0s()(),t.j41(6,"td")(7,"span",55),t.EFF(8),t.k0s()(),t.j41(9,"td")(10,"span",56),t.EFF(11),t.nI1(12,"date"),t.k0s()()()),2&o){const e=r.$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("value",n.formatActivityType(e.type))("severity",n.getActivitySeverity(e.type)),t.R7$(3),t.JRh(e.user||e.agent||"System"),t.R7$(3),t.JRh(e.platform||"N/A"),t.R7$(3),t.JRh(t.i5U(12,5,e.timestamp,"short"))}}function F(o,r){if(1&o&&(t.j41(0,"div",57)(1,"span",55),t.EFF(2),t.k0s(),t.nrm(3,"p-tag",58),t.k0s()),2&o){const e=r.$implicit;t.R7$(2),t.JRh(e.label),t.R7$(),t.Y8G("value",e.value+"%")}}function R(o,r){if(1&o&&(t.j41(0,"div",42)(1,"div",43)(2,"div",44)(3,"h2",45),t.EFF(4,"Recent Activities"),t.k0s(),t.nrm(5,"p-tag",46),t.k0s(),t.j41(6,"p-table",47),t.DNE(7,k,9,0,"ng-template",48)(8,j,13,8,"ng-template",49),t.k0s()(),t.j41(9,"div",19)(10,"h2",50),t.EFF(11,"Platform Distribution"),t.k0s(),t.nrm(12,"p-chart",51),t.j41(13,"div",52),t.DNE(14,F,4,2,"div",53),t.k0s()()()),2&o){const e=t.XpG();t.R7$(5),t.Mz_("value","",e.summary.recent_activities.length," events"),t.R7$(),t.Y8G("value",e.summary.recent_activities)("paginator",!0)("rows",6),t.R7$(6),t.Y8G("data",e.chartData)("options",e.chartOptions),t.R7$(2),t.Y8G("ngForOf",e.platformDistributionEntries)}}let P=(()=>{class o{chatService=(0,t.WQX)(y.m);router=(0,t.WQX)(v.Ix);summary=null;analytics=null;loading=!1;showFilters=!1;selectedPeriod="7d";periodOptions=[{label:"Last 24 hours",value:"24h"},{label:"Last 7 days",value:"7d"},{label:"Last 30 days",value:"30d"}];chartData;chartOptions;platformDistributionEntries=[];ngOnInit(){this.initChartOptions(),this.loadData()}loadData(){this.loading=!0,(0,f.p)({summary:this.chatService.getSummary(),analytics:this.chatService.getAnalytics(this.selectedPeriod)}).subscribe({next:({summary:e,analytics:n})=>{this.summary=e.data,this.analytics=n.data,this.setupChart(n.data),this.loading=!1},error:e=>{console.error("Error loading chat dashboard",e),this.loading=!1}})}applyFilters(){this.loadData()}resetFilters(){this.selectedPeriod="7d",this.loadData()}setupChart(e){const n=getComputedStyle(document.documentElement);this.platformDistributionEntries=Object.entries(e.platform_distribution||{}).map(([s,T])=>({label:s.charAt(0).toUpperCase()+s.slice(1),value:Number(T)})),this.chartData={labels:this.platformDistributionEntries.map(s=>s.label),datasets:[{data:this.platformDistributionEntries.map(s=>s.value),backgroundColor:[n.getPropertyValue("--blue-500"),n.getPropertyValue("--cyan-500"),n.getPropertyValue("--green-500"),n.getPropertyValue("--orange-500"),n.getPropertyValue("--purple-500")],hoverBackgroundColor:[n.getPropertyValue("--blue-400"),n.getPropertyValue("--cyan-400"),n.getPropertyValue("--green-400"),n.getPropertyValue("--orange-400"),n.getPropertyValue("--purple-400")]}]}}initChartOptions(){const n=getComputedStyle(document.documentElement).getPropertyValue("--text-color");this.chartOptions={plugins:{legend:{labels:{color:n}}}}}navigateTo(e){this.router.navigate(["/chat",e])}getActivitySeverity(e){switch(e){case"conversation_resolved":return"success";case"new_conversation":return"info";case"agent_assigned":return"warn";default:return"danger"}}formatActivityType(e){return e.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ")}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=t.VBU({type:o,selectors:[["app-chat-dashboard"]],decls:21,vars:12,consts:[[1,"bg-gray-50","min-h-screen","p-6"],[1,"bg-white","rounded-lg","shadow-sm","p-6","mb-6"],[1,"flex","items-center","justify-between","flex-wrap","gap-4"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-gradient-to-br","from-cyan-500","to-blue-600","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-comments","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","m-0"],[1,"flex","flex-wrap","items-center","gap-2","sm:gap-3"],["icon","pi pi-refresh","severity","info","pTooltip","Refresh",1,"hidden","sm:inline-flex",3,"onClick","outlined","rounded"],["icon","pi pi-filter","severity","secondary","pTooltip","Toggle Filters",1,"hidden","sm:inline-flex",3,"onClick","outlined","rounded"],["icon","pi pi-comments","severity","secondary","pTooltip","Conversations",1,"hidden","sm:inline-flex",3,"onClick","outlined","rounded"],["icon","pi pi-chart-bar","severity","secondary","pTooltip","Analytics",1,"hidden","sm:inline-flex",3,"onClick","outlined","rounded"],["label","Refresh","icon","pi pi-refresh","severity","primary","size","small",1,"sm:hidden",3,"onClick"],["class","grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-6",4,"ngIf"],["class","bg-white rounded-lg shadow-sm p-6 mb-6",4,"ngIf"],["class","bg-white rounded-lg shadow-sm p-6",4,"ngIf"],["class","grid grid-cols-1 xl:grid-cols-3 gap-6",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-4","gap-6","mb-6"],[1,"bg-white","rounded-lg","shadow-sm","p-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-600"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-comments","text-blue-600","text-xl"],[1,"text-3xl","font-bold","text-green-600"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-bolt","text-green-600","text-xl"],[1,"text-3xl","font-bold","text-orange-600"],[1,"w-12","h-12","bg-orange-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-clock","text-orange-600","text-xl"],[1,"text-3xl","font-bold","text-purple-600"],[1,"w-12","h-12","bg-purple-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-star","text-purple-600","text-xl"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"flex","flex-col","gap-2"],[1,"text-sm","font-medium","text-gray-700"],["optionLabel","label","optionValue","value","placeholder","Select period",1,"w-full",3,"ngModelChange","options","ngModel"],[1,"flex","justify-end","gap-2","mt-4"],["label","Apply","icon","pi pi-check","severity","primary",3,"onClick"],["label","Reset","icon","pi pi-filter-slash","severity","secondary",3,"onClick","outlined"],[1,"space-y-4"],["height","4rem"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-6"],[1,"xl:col-span-2","bg-white","rounded-lg","shadow-sm","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200","flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900","m-0"],["severity","info",3,"value"],["styleClass","p-datatable-sm",3,"value","paginator","rows"],["pTemplate","header"],["pTemplate","body"],[1,"text-lg","font-semibold","text-gray-900","mt-0","mb-4"],["type","doughnut","styleClass","w-full",3,"data","options"],[1,"mt-5","space-y-2"],["class","flex justify-between items-center",4,"ngFor","ngForOf"],[3,"value","severity"],[1,"text-sm","text-gray-700"],[1,"text-sm","text-gray-500"],[1,"flex","justify-between","items-center"],["severity","secondary",3,"value"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.nrm(5,"i",5),t.k0s(),t.j41(6,"div")(7,"h1",6),t.EFF(8,"Chat Management"),t.k0s(),t.j41(9,"p",7),t.EFF(10,"Track conversations, agent response, and platform performance"),t.k0s()()(),t.j41(11,"div",8)(12,"p-button",9),t.bIt("onClick",function(){return i.loadData()}),t.k0s(),t.j41(13,"p-button",10),t.bIt("onClick",function(){return i.showFilters=!i.showFilters}),t.k0s(),t.j41(14,"p-button",11),t.bIt("onClick",function(){return i.navigateTo("conversations")}),t.k0s(),t.j41(15,"p-button",12),t.bIt("onClick",function(){return i.navigateTo("analytics")}),t.k0s(),t.j41(16,"p-button",13),t.bIt("onClick",function(){return i.loadData()}),t.k0s()()()(),t.DNE(17,E,37,4,"div",14)(18,x,9,3,"div",15)(19,D,5,0,"div",16)(20,R,15,8,"div",17),t.k0s()),2&n&&(t.R7$(12),t.Y8G("outlined",!0)("rounded",!0),t.R7$(),t.Y8G("outlined",!i.showFilters)("rounded",!0),t.R7$(),t.Y8G("outlined",!0)("rounded",!0),t.R7$(),t.Y8G("outlined",!0)("rounded",!0),t.R7$(2),t.Y8G("ngIf",i.summary&&i.analytics),t.R7$(),t.Y8G("ngIf",i.showFilters),t.R7$(),t.Y8G("ngIf",i.loading),t.R7$(),t.Y8G("ngIf",!i.loading&&i.summary&&i.analytics))},dependencies:[l.MD,l.Sq,l.bT,l.vh,d.YN,d.BC,d.vS,b.Dw,C.Ei,m.Fr,m.X9,c.bG,c.XI,u.tm,u.$n,g.$C,g.vw,_.k2,_.EA,h.kr,h.ms],styles:["[_nghost-%COMP%]{display:block}"]})}return o})()}}]);