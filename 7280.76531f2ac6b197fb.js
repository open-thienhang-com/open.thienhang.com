"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[7280],{491:(w,T,c)=>{c.d(T,{Dw:()=>x,Zp:()=>L});var _=c(2881),e=c(1360),C=c(9744),M=c(5779),b=c(3491),D=c(6263);const r=["header"],m=["title"],P=["subtitle"],$=["content"],R=["footer"],G=["*",[["p-header"]],[["p-footer"]]],u=["*","p-header","p-footer"];function j(o,g){1&o&&e.eu8(0)}function f(o,g){if(1&o&&(e.j41(0,"div",8),e.SdG(1,1),e.DNE(2,j,1,0,"ng-container",6),e.k0s()),2&o){const i=e.XpG();e.R7$(2),e.Y8G("ngTemplateOutlet",i.headerTemplate||i._headerTemplate)}}function v(o,g){if(1&o&&(e.qex(0),e.EFF(1),e.bVm()),2&o){const i=e.XpG(2);e.R7$(),e.JRh(i.header)}}function E(o,g){1&o&&e.eu8(0)}function t(o,g){if(1&o&&(e.j41(0,"div",9),e.DNE(1,v,2,1,"ng-container",10)(2,E,1,0,"ng-container",6),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.header&&!i._titleTemplate&&!i.titleTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",i.titleTemplate||i._titleTemplate)}}function a(o,g){if(1&o&&(e.qex(0),e.EFF(1),e.bVm()),2&o){const i=e.XpG(2);e.R7$(),e.JRh(i.subheader)}}function F(o,g){1&o&&e.eu8(0)}function d(o,g){if(1&o&&(e.j41(0,"div",11),e.DNE(1,a,2,1,"ng-container",10)(2,F,1,0,"ng-container",6),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.subheader&&!i._subtitleTemplate&&!i.subtitleTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",i.subtitleTemplate||i._subtitleTemplate)}}function y(o,g){1&o&&e.eu8(0)}function h(o,g){1&o&&e.eu8(0)}function U(o,g){if(1&o&&(e.j41(0,"div",12),e.SdG(1,2),e.DNE(2,h,1,0,"ng-container",6),e.k0s()),2&o){const i=e.XpG();e.R7$(2),e.Y8G("ngTemplateOutlet",i.footerTemplate||i._footerTemplate)}}const B=({dt:o})=>`\n.p-card {\n    background: ${o("card.background")};\n    color: ${o("card.color")};\n    box-shadow: ${o("card.shadow")};\n    border-radius: ${o("card.border.radius")};\n    display: flex;\n    flex-direction: column;\n}\n\n.p-card-caption {\n    display: flex;\n    flex-direction: column;\n    gap: ${o("card.caption.gap")};\n}\n\n.p-card-body {\n    padding: ${o("card.body.padding")};\n    display: flex;\n    flex-direction: column;\n    gap: ${o("card.body.gap")};\n}\n\n.p-card-title {\n    font-size: ${o("card.title.font.size")};\n    font-weight: ${o("card.title.font.weight")};\n}\n\n.p-card-subtitle {\n    color: ${o("card.subtitle.color")};\n}\n`,W={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"};let S=(()=>{class o extends D.j{name="card";theme=B;classes=W;static \u0275fac=(()=>{let i;return function(s){return(i||(i=e.xGo(o)))(s||o)}})();static \u0275prov=e.jDH({token:o,factory:o.\u0275fac})}return o})(),L=(()=>{class o extends b.${header;subheader;set style(i){(0,C.aI)(this._style(),i)||this._style.set(i)}styleClass;headerFacet;footerFacet;headerTemplate;titleTemplate;subtitleTemplate;contentTemplate;footerTemplate;_headerTemplate;_titleTemplate;_subtitleTemplate;_contentTemplate;_footerTemplate;_style=(0,e.vPA)(null);_componentStyle=(0,e.WQX)(S);getBlockableElement(){return this.el.nativeElement.children[0]}templates;ngAfterContentInit(){this.templates.forEach(i=>{switch(i.getType()){case"header":this._headerTemplate=i.template;break;case"title":this._titleTemplate=i.template;break;case"subtitle":this._subtitleTemplate=i.template;break;case"content":default:this._contentTemplate=i.template;break;case"footer":this._footerTemplate=i.template}})}static \u0275fac=(()=>{let i;return function(s){return(i||(i=e.xGo(o)))(s||o)}})();static \u0275cmp=e.VBU({type:o,selectors:[["p-card"]],contentQueries:function(n,s,l){if(1&n&&(e.wni(l,M.Y9,5),e.wni(l,M.wi,5),e.wni(l,r,4),e.wni(l,m,4),e.wni(l,P,4),e.wni(l,$,4),e.wni(l,R,4),e.wni(l,M.Ei,4)),2&n){let p;e.mGM(p=e.lsd())&&(s.headerFacet=p.first),e.mGM(p=e.lsd())&&(s.footerFacet=p.first),e.mGM(p=e.lsd())&&(s.headerTemplate=p.first),e.mGM(p=e.lsd())&&(s.titleTemplate=p.first),e.mGM(p=e.lsd())&&(s.subtitleTemplate=p.first),e.mGM(p=e.lsd())&&(s.contentTemplate=p.first),e.mGM(p=e.lsd())&&(s.footerTemplate=p.first),e.mGM(p=e.lsd())&&(s.templates=p)}},inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},features:[e.Jv_([S]),e.Vt3],ngContentSelectors:u,decls:9,vars:10,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[4,"ngIf"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(n,s){1&n&&(e.NAR(G),e.j41(0,"div",0),e.DNE(1,f,3,1,"div",1),e.j41(2,"div",2),e.DNE(3,t,3,2,"div",3)(4,d,3,2,"div",4),e.j41(5,"div",5),e.SdG(6),e.DNE(7,y,1,0,"ng-container",6),e.k0s(),e.DNE(8,U,3,1,"div",7),e.k0s()()),2&n&&(e.HbH(s.styleClass),e.Y8G("ngClass","p-card p-component")("ngStyle",s._style()),e.BMQ("data-pc-name","card"),e.R7$(),e.Y8G("ngIf",s.headerFacet||s.headerTemplate||s._headerTemplate),e.R7$(2),e.Y8G("ngIf",s.header||s.titleTemplate||s._titleTemplate),e.R7$(),e.Y8G("ngIf",s.subheader||s.subtitleTemplate||s._subtitleTemplate),e.R7$(3),e.Y8G("ngTemplateOutlet",s.contentTemplate||s._contentTemplate),e.R7$(),e.Y8G("ngIf",s.footerFacet||s.footerTemplate||s._footerTemplate))},dependencies:[_.MD,_.YU,_.bT,_.T3,_.B3,M.Gg],encapsulation:2,changeDetection:0})}return o})(),x=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=e.$C({type:o});static \u0275inj=e.G2t({imports:[L,M.Gg,M.Gg]})}return o})()},935:(w,T,c)=>{c.d(T,{$C:()=>t,vw:()=>E});var _=c(2881),e=c(1360),C=c(5779),M=c(3491),b=c(6263);const D=["icon"],r=["*"];function m(a,F){if(1&a&&e.nrm(0,"span",4),2&a){const d=e.XpG(2);e.Y8G("ngClass",d.icon)}}function P(a,F){if(1&a&&(e.qex(0),e.DNE(1,m,1,1,"span",3),e.bVm()),2&a){const d=e.XpG();e.R7$(),e.Y8G("ngIf",d.icon)}}function $(a,F){}function R(a,F){1&a&&e.DNE(0,$,0,0,"ng-template")}function G(a,F){if(1&a&&(e.j41(0,"span",5),e.DNE(1,R,1,0,null,6),e.k0s()),2&a){const d=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",d.iconTemplate||d._iconTemplate)}}const u=({dt:a})=>`\n.p-tag {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    background: ${a("tag.primary.background")};\n    color: ${a("tag.primary.color")};\n    font-size: ${a("tag.font.size")};\n    font-weight: ${a("tag.font.weight")};\n    padding: ${a("tag.padding")};\n    border-radius: ${a("tag.border.radius")};\n    gap: ${a("tag.gap")};\n}\n\n.p-tag-icon {\n    font-size: ${a("tag.icon.size")};\n    width: ${a("tag.icon.size")};\n    height:${a("tag.icon.size")};\n}\n\n.p-tag-rounded {\n    border-radius: ${a("tag.rounded.border.radius")};\n}\n\n.p-tag-success {\n    background: ${a("tag.success.background")};\n    color: ${a("tag.success.color")};\n}\n\n.p-tag-info {\n    background: ${a("tag.info.background")};\n    color: ${a("tag.info.color")};\n}\n\n.p-tag-warn {\n    background: ${a("tag.warn.background")};\n    color: ${a("tag.warn.color")};\n}\n\n.p-tag-danger {\n    background: ${a("tag.danger.background")};\n    color: ${a("tag.danger.color")};\n}\n\n.p-tag-secondary {\n    background: ${a("tag.secondary.background")};\n    color: ${a("tag.secondary.color")};\n}\n\n.p-tag-contrast {\n    background: ${a("tag.contrast.background")};\n    color: ${a("tag.contrast.color")};\n}\n`,j={root:({props:a})=>["p-tag p-component",{"p-tag-info":"info"===a.severity,"p-tag-success":"success"===a.severity,"p-tag-warn":"warn"===a.severity,"p-tag-danger":"danger"===a.severity,"p-tag-secondary":"secondary"===a.severity,"p-tag-contrast":"contrast"===a.severity,"p-tag-rounded":a.rounded}],icon:"p-tag-icon",label:"p-tag-label"};let f=(()=>{class a extends b.j{name="tag";theme=u;classes=j;static \u0275fac=(()=>{let d;return function(h){return(d||(d=e.xGo(a)))(h||a)}})();static \u0275prov=e.jDH({token:a,factory:a.\u0275fac})}return a})(),E=(()=>{class a extends M.${get style(){return this._style}set style(d){this._style=d,this.cd.markForCheck()}styleClass;severity;value;icon;rounded;iconTemplate;templates;_iconTemplate;_style;_componentStyle=(0,e.WQX)(f);ngAfterContentInit(){this.templates?.forEach(d=>{"icon"===d.getType()&&(this._iconTemplate=d.template)})}containerClass(){let d="p-tag p-component";return this.severity&&(d+=` p-tag-${this.severity}`),this.rounded&&(d+=" p-tag-rounded"),this.styleClass&&(d+=` ${this.styleClass}`),d}static \u0275fac=(()=>{let d;return function(h){return(d||(d=e.xGo(a)))(h||a)}})();static \u0275cmp=e.VBU({type:a,selectors:[["p-tag"]],contentQueries:function(y,h,U){if(1&y&&(e.wni(U,D,4),e.wni(U,C.Ei,4)),2&y){let B;e.mGM(B=e.lsd())&&(h.iconTemplate=B.first),e.mGM(B=e.lsd())&&(h.templates=B)}},hostVars:4,hostBindings:function(y,h){2&y&&(e.Aen(h.style),e.HbH(h.containerClass()))},inputs:{style:"style",styleClass:"styleClass",severity:"severity",value:"value",icon:"icon",rounded:[2,"rounded","rounded",e.L39]},features:[e.Jv_([f]),e.Vt3],ngContentSelectors:r,decls:5,vars:3,consts:[[4,"ngIf"],["class","p-tag-icon",4,"ngIf"],[1,"p-tag-label"],["class","p-tag-icon",3,"ngClass",4,"ngIf"],[1,"p-tag-icon",3,"ngClass"],[1,"p-tag-icon"],[4,"ngTemplateOutlet"]],template:function(y,h){1&y&&(e.NAR(),e.SdG(0),e.DNE(1,P,2,1,"ng-container",0)(2,G,2,1,"span",1),e.j41(3,"span",2),e.EFF(4),e.k0s()),2&y&&(e.R7$(),e.Y8G("ngIf",!h.iconTemplate&&!h._iconTemplate),e.R7$(),e.Y8G("ngIf",h.iconTemplate||h._iconTemplate),e.R7$(2),e.JRh(h.value))},dependencies:[_.MD,_.YU,_.bT,_.T3,C.Gg],encapsulation:2,changeDetection:0})}return a})(),t=(()=>{class a{static \u0275fac=function(y){return new(y||a)};static \u0275mod=e.$C({type:a});static \u0275inj=e.G2t({imports:[E,C.Gg,C.Gg]})}return a})()},5545:(w,T,c)=>{c.d(T,{g:()=>M});var _=c(4754),e=c(1360),C=c(8989);let M=(()=>{class b{http;baseUrl=`${(0,_.Gi)()}/data-mesh/domains/hotel`;constructor(r){this.http=r}createApartment(r){return this.http.post(`${this.baseUrl}/apartments`,r)}getApartments(){return this.http.get(`${this.baseUrl}/apartments`)}getApartmentById(r){return this.http.get(`${this.baseUrl}/apartments/${r}`)}updateApartment(r,m){return this.http.put(`${this.baseUrl}/apartments/${r}`,m)}deleteApartment(r){return this.http.delete(`${this.baseUrl}/apartments/${r}`)}createRoom(r){return this.http.post(`${this.baseUrl}/rooms/room`,r)}getRooms(){return this.http.get(`${this.baseUrl}/rooms/rooms`)}getRoomById(r){return this.http.get(`${this.baseUrl}/rooms/room/${r}`)}updateRoom(r,m){return this.http.put(`${this.baseUrl}/rooms/room/${r}`,m)}deleteRoom(r){return this.http.delete(`${this.baseUrl}/rooms/room/${r}`)}createBooking(r){return this.http.post(`${this.baseUrl}/bookings/booking`,r)}getBookingById(r){return this.http.get(`${this.baseUrl}/bookings/booking/${r}`)}getBookings(){return this.http.get(`${this.baseUrl}/bookings/bookings`)}updateBooking(r,m){return this.http.put(`${this.baseUrl}/bookings/booking/${r}`,m)}deleteBooking(r){return this.http.delete(`${this.baseUrl}/bookings/booking/${r}`)}cancelBooking(r){return this.http.patch(`${this.baseUrl}/bookings/booking/${r}/cancel`,{})}createReview(r){return this.http.post(`${this.baseUrl}/reviews/review`,r)}getReviewById(r){return this.http.get(`${this.baseUrl}/reviews/review/${r}`)}getReviews(){return this.http.get(`${this.baseUrl}/reviews/reviews`)}getReviewsByApartment(r){return this.http.get(`${this.baseUrl}/reviews/reviews?apartment_id=${r}`)}updateReview(r,m){return this.http.put(`${this.baseUrl}/reviews/review/${r}`,m)}deleteReview(r){return this.http.delete(`${this.baseUrl}/reviews/review/${r}`)}createRating(r){return this.http.post(`${this.baseUrl}/ratings/rating`,r)}getRatingById(r){return this.http.get(`${this.baseUrl}/ratings/rating/${r}`)}getRatings(){return this.http.get(`${this.baseUrl}/ratings/ratings`)}getRatingsByApartment(r){return this.http.get(`${this.baseUrl}/ratings/ratings?apartment_id=${r}`)}getRoomsByApartment(r){return this.http.get(`${this.baseUrl}/rooms/rooms?apartment_id=${r}`)}updateRating(r,m){return this.http.put(`${this.baseUrl}/ratings/rating/${r}`,m)}deleteRating(r){return this.http.delete(`${this.baseUrl}/ratings/rating/${r}`)}healthCheck(){return this.http.get(`${this.baseUrl}/health/`)}getVersion(){return this.http.get(`${this.baseUrl}/version`)}static \u0275fac=function(m){return new(m||b)(e.KVO(C.Qq))};static \u0275prov=e.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})()},5716:(w,T,c)=>{c.d(T,{EA:()=>R,k2:()=>G});var _=c(2881),e=c(1360),C=c(5779),M=c(3491),b=c(6263);const D=({dt:u})=>`\n.p-skeleton {\n    overflow: hidden;\n    background: ${u("skeleton.background")};\n    border-radius: ${u("skeleton.border.radius")};\n}\n\n.p-skeleton::after {\n    content: "";\n    animation: p-skeleton-animation 1.2s infinite;\n    height: 100%;\n    left: 0;\n    position: absolute;\n    right: 0;\n    top: 0;\n    transform: translateX(-100%);\n    z-index: 1;\n    background: linear-gradient(90deg, rgba(255, 255, 255, 0), ${u("skeleton.animation.background")}, rgba(255, 255, 255, 0));\n}\n\n[dir='rtl'] .p-skeleton::after {\n    animation-name: p-skeleton-animation-rtl;\n}\n\n.p-skeleton-circle {\n    border-radius: 50%;\n}\n\n.p-skeleton-animation-none::after {\n    animation: none;\n}\n\n@keyframes p-skeleton-animation {\n    from {\n        transform: translateX(-100%);\n    }\n    to {\n        transform: translateX(100%);\n    }\n}\n\n@keyframes p-skeleton-animation-rtl {\n    from {\n        transform: translateX(100%);\n    }\n    to {\n        transform: translateX(-100%);\n    }\n}\n`,r={root:{position:"relative"}},m={root:({props:u})=>["p-skeleton p-component",{"p-skeleton-circle":"circle"===u.shape,"p-skeleton-animation-none":"none"===u.animation}]};let P=(()=>{class u extends b.j{name="skeleton";theme=D;classes=m;inlineStyles=r;static \u0275fac=(()=>{let f;return function(E){return(f||(f=e.xGo(u)))(E||u)}})();static \u0275prov=e.jDH({token:u,factory:u.\u0275fac})}return u})(),R=(()=>{class u extends M.${styleClass;style;shape="rectangle";animation="wave";borderRadius;size;width="100%";height="1rem";_componentStyle=(0,e.WQX)(P);containerClass(){return{"p-skeleton p-component":!0,"p-skeleton-circle":"circle"===this.shape,"p-skeleton-animation-none":"none"===this.animation}}get containerStyle(){const f=this._componentStyle?.inlineStyles.root;let v;return v=this.size?{...this.style,...f,width:this.size,height:this.size,borderRadius:this.borderRadius}:{...f,width:this.width,height:this.height,borderRadius:this.borderRadius,...this.style},v}static \u0275fac=(()=>{let f;return function(E){return(f||(f=e.xGo(u)))(E||u)}})();static \u0275cmp=e.VBU({type:u,selectors:[["p-skeleton"]],inputs:{styleClass:"styleClass",style:"style",shape:"shape",animation:"animation",borderRadius:"borderRadius",size:"size",width:"width",height:"height"},features:[e.Jv_([P]),e.Vt3],decls:1,vars:7,consts:[[3,"ngClass","ngStyle"]],template:function(v,E){1&v&&e.nrm(0,"div",0),2&v&&(e.HbH(E.styleClass),e.Y8G("ngClass",E.containerClass())("ngStyle",E.containerStyle),e.BMQ("data-pc-name","skeleton")("aria-hidden",!0)("data-pc-section","root"))},dependencies:[_.MD,_.YU,_.B3,C.Gg],encapsulation:2,changeDetection:0})}return u})(),G=(()=>{class u{static \u0275fac=function(v){return new(v||u)};static \u0275mod=e.$C({type:u});static \u0275inj=e.G2t({imports:[R,C.Gg,C.Gg]})}return u})()},7280:(w,T,c)=>{c.r(T),c.d(T,{GuestsComponent:()=>o});var _=c(2881),e=c(9417),C=c(5207),M=c(1141),b=c(491),D=c(1570),r=c(2242),m=c(6221),P=c(6150),$=c(7722),R=c(8542),G=c(5716),u=c(935),j=c(9114),f=c(7164),v=c(5779),E=c(5545),t=c(1360);const a=()=>({width:"80vw",maxWidth:"1000px"}),F=()=>[10,25,50];function d(g,i){1&g&&(t.j41(0,"tr")(1,"th"),t.EFF(2,"Guest"),t.k0s(),t.j41(3,"th"),t.EFF(4,"Total Bookings"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Total Spent"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Favorite Apartment"),t.k0s(),t.j41(9,"th"),t.EFF(10,"Last Booking"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Status"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Actions"),t.k0s()())}function y(g,i){if(1&g&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&g){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,n.lastBooking.check_in,"short")," ")}}function h(g,i){1&g&&(t.j41(0,"span",32),t.EFF(1,"N/A"),t.k0s())}function U(g,i){if(1&g){const n=t.RV6();t.j41(0,"tr")(1,"td")(2,"div",22),t.nrm(3,"p-avatar",23),t.j41(4,"span",24),t.EFF(5),t.k0s()()(),t.j41(6,"td")(7,"span",25),t.EFF(8),t.k0s()(),t.j41(9,"td")(10,"span",26),t.EFF(11),t.nI1(12,"currency"),t.k0s()(),t.j41(13,"td")(14,"span",27),t.EFF(15),t.k0s()(),t.j41(16,"td"),t.DNE(17,y,3,4,"span",28)(18,h,2,0,"span",29),t.k0s(),t.j41(19,"td"),t.nrm(20,"p-badge",30),t.nI1(21,"titlecase"),t.k0s(),t.j41(22,"td")(23,"button",31),t.bIt("click",function(){const l=t.eBV(n).$implicit,p=t.XpG(2);return t.Njj(p.viewGuestDetails(l))}),t.k0s()()()}if(2&g){const n=i.$implicit,s=t.XpG(2);t.R7$(3),t.Y8G("label",s.getInitials(n.account_id)),t.R7$(2),t.JRh(n.account_id),t.R7$(3),t.JRh(n.totalBookings),t.R7$(3),t.JRh(t.bMT(12,9,n.totalSpent)),t.R7$(4),t.JRh(s.getApartmentName(n.favoriteApartment||"")),t.R7$(2),t.Y8G("ngIf",n.lastBooking),t.R7$(),t.Y8G("ngIf",!n.lastBooking),t.R7$(2),t.Y8G("value",t.bMT(21,11,n.status))("severity",s.getStatusSeverity(n.status))}}function B(g,i){1&g&&(t.j41(0,"tr")(1,"td",33)(2,"div",34),t.nrm(3,"i",35),t.j41(4,"p"),t.EFF(5,"No guests found"),t.k0s()()()())}function W(g,i){if(1&g&&(t.j41(0,"p-card")(1,"p-table",18),t.DNE(2,d,15,0,"ng-template",19)(3,U,24,13,"ng-template",20)(4,B,6,0,"ng-template",21),t.k0s()()),2&g){const n=t.XpG();t.R7$(),t.Y8G("value",n.filteredGuests)("paginator",!0)("rows",10)("rowsPerPageOptions",t.lJ4(5,F))("showCurrentPageReport",!0)}}function S(g,i){1&g&&(t.j41(0,"div",36),t.nrm(1,"p-skeleton",37),t.k0s())}function K(g,i){1&g&&(t.j41(0,"tr")(1,"th"),t.EFF(2,"Booking ID"),t.k0s(),t.j41(3,"th"),t.EFF(4,"Apartment"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Check-in"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Check-out"),t.k0s(),t.j41(9,"th"),t.EFF(10,"Total Price"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Status"),t.k0s()())}function L(g,i){if(1&g&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.nI1(7,"date"),t.k0s(),t.j41(8,"td"),t.EFF(9),t.nI1(10,"date"),t.k0s(),t.j41(11,"td"),t.EFF(12),t.nI1(13,"currency"),t.k0s(),t.j41(14,"td"),t.nrm(15,"p-badge",30),t.nI1(16,"titlecase"),t.k0s()()),2&g){const n=i.$implicit,s=t.XpG(2);t.R7$(2),t.JRh(n.id),t.R7$(2),t.JRh(s.getApartmentName(n.apartment_id)),t.R7$(2),t.JRh(t.i5U(7,7,n.check_in,"short")),t.R7$(3),t.JRh(t.i5U(10,10,n.check_out,"short")),t.R7$(3),t.JRh(t.bMT(13,13,n.total_price)),t.R7$(3),t.Y8G("value",t.bMT(16,15,n.booking_status))("severity",s.getBookingStatusSeverity(n.booking_status))}}function x(g,i){if(1&g&&(t.j41(0,"div",38)(1,"div",39)(2,"div",40)(3,"div",41)(4,"span",42),t.EFF(5,"Total Bookings:"),t.k0s(),t.j41(6,"span",43),t.EFF(7),t.k0s()(),t.j41(8,"div",41)(9,"span",42),t.EFF(10,"Total Spent:"),t.k0s(),t.j41(11,"span",44),t.EFF(12),t.nI1(13,"currency"),t.k0s()(),t.j41(14,"div",41)(15,"span",42),t.EFF(16,"Favorite Apartment:"),t.k0s(),t.j41(17,"span",43),t.EFF(18),t.k0s()(),t.j41(19,"div",41)(20,"span",42),t.EFF(21,"Status:"),t.k0s(),t.nrm(22,"p-badge",30),t.nI1(23,"titlecase"),t.k0s()()(),t.nrm(24,"p-divider"),t.j41(25,"h3"),t.EFF(26,"Booking History"),t.k0s(),t.j41(27,"p-table",45),t.DNE(28,K,13,0,"ng-template",19)(29,L,17,17,"ng-template",20),t.k0s()()),2&g){const n=t.XpG();t.R7$(7),t.JRh(n.selectedGuest.totalBookings),t.R7$(5),t.JRh(t.bMT(13,8,n.selectedGuest.totalSpent)),t.R7$(6),t.JRh(n.getApartmentName(n.selectedGuest.favoriteApartment||"")),t.R7$(4),t.Y8G("value",t.bMT(23,10,n.selectedGuest.status))("severity",n.getStatusSeverity(n.selectedGuest.status)),t.R7$(5),t.Y8G("value",n.guestBookings)("paginator",!0)("rows",5)}}let o=(()=>{class g{hotelService;messageService;bookings=[];guests=[];filteredGuests=[];apartments=[];loading=!1;searchTerm="";showGuestDialog=!1;selectedGuest=null;guestBookings=[];constructor(n,s){this.hotelService=n,this.messageService=s}ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.hotelService.getBookings().subscribe({next:n=>{this.bookings=n.data||[],this.processGuests(),this.loadApartments(),this.loading=!1},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load guest data"}),this.loading=!1}})}loadApartments(){this.hotelService.getApartments().subscribe({next:n=>{this.apartments=n.data||[]},error:()=>{}})}processGuests(){const n=new Map;this.bookings.forEach(s=>{const l=s.account_id;n.has(l)||n.set(l,{account_id:l,totalBookings:0,totalSpent:0,status:"active"});const p=n.get(l);p.totalBookings++,p.totalSpent+=s.total_price||0,(!p.lastBooking||new Date(s.check_in)>new Date(p.lastBooking.check_in))&&(p.lastBooking=s)}),n.forEach((s,l)=>{const p=new Map;this.bookings.filter(k=>k.account_id===l).forEach(k=>{const A=p.get(k.apartment_id)||0;p.set(k.apartment_id,A+1)});let I=0,O="";if(p.forEach((k,A)=>{k>I&&(I=k,O=A)}),s.favoriteApartment=O,s.lastBooking){const k=new Date(s.lastBooking.check_in),A=((new Date).getTime()-k.getTime())/864e5;s.status=A>90?"inactive":"active"}}),this.guests=Array.from(n.values()),this.filterGuests()}filterGuests(){let n=[...this.guests];if(this.searchTerm){const s=this.searchTerm.toLowerCase();n=n.filter(l=>l.account_id.toLowerCase().includes(s)||l.favoriteApartment&&this.getApartmentName(l.favoriteApartment).toLowerCase().includes(s))}n.sort((s,l)=>l.totalSpent-s.totalSpent),this.filteredGuests=n}onSearch(){this.filterGuests()}viewGuestDetails(n){this.selectedGuest=n,this.guestBookings=this.bookings.filter(s=>s.account_id===n.account_id).sort((s,l)=>new Date(l.check_in).getTime()-new Date(s.check_in).getTime()),this.showGuestDialog=!0}closeGuestDialog(){this.showGuestDialog=!1,this.selectedGuest=null,this.guestBookings=[]}getApartmentName(n){const s=this.apartments.find(l=>(l.id||l._id)===n);return s?s.title:n}getStatusSeverity(n){return"active"===n?"success":"secondary"}getInitials(n){return n.substring(0,2).toUpperCase()}getActiveGuests(){return this.guests.filter(n=>"active"===n.status).length}getTotalRevenue(){return this.guests.reduce((n,s)=>n+s.totalSpent,0)}getAverageSpending(){return 0===this.guests.length?0:this.getTotalRevenue()/this.guests.length}getBookingStatusSeverity(n){return{confirmed:"success",pending:"warning",canceled:"danger",completed:"info",no_show:"secondary"}[n]||"secondary"}static \u0275fac=function(s){return new(s||g)(t.rXU(E.g),t.rXU(v.bg))};static \u0275cmp=t.VBU({type:g,selectors:[["app-hotel-guests"]],features:[t.Jv_([v.bg])],decls:47,vars:19,consts:[["loadingTemplate",""],[1,"guests-page"],[1,"page-header"],[1,"header-content"],[1,"subtitle"],[1,"header-actions"],["pButton","","type","button","label","Refresh","icon","pi pi-refresh",1,"p-button-secondary",3,"click"],[1,"summary-cards"],[1,"summary-stat"],[1,"stat-value"],[1,"stat-label"],[1,"search-card"],[1,"search-group"],["pInputText","","type","text","placeholder","Search by Guest ID or Apartment",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"pi","pi-search","search-icon"],[4,"ngIf","ngIfElse"],[3,"visibleChange","onHide","visible","header","modal","closable"],["class","guest-details-content",4,"ngIf"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} guests","styleClass","p-datatable-sm",3,"value","paginator","rows","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"guest-info"],["styleClass","mr-2","shape","circle",3,"label"],[1,"guest-id"],[1,"booking-count"],[1,"total-spent"],[1,"apartment-name"],[4,"ngIf"],["class","text-muted",4,"ngIf"],[3,"value","severity"],["pButton","","type","button","icon","pi pi-eye","label","View Details",1,"p-button-sm","p-button-info",3,"click"],[1,"text-muted"],["colspan","7",1,"text-center"],[1,"empty-state"],[1,"pi","pi-users"],[1,"loading-container"],["height","300px"],[1,"guest-details-content"],[1,"guest-summary"],[1,"summary-grid"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"value","price"],["styleClass","p-datatable-sm",3,"value","paginator","rows"]],template:function(s,l){if(1&s){const p=t.RV6();t.j41(0,"div",1),t.nrm(1,"p-toast"),t.j41(2,"div",2)(3,"div",3)(4,"div")(5,"h1"),t.EFF(6,"Guests Management"),t.k0s(),t.j41(7,"p",4),t.EFF(8,"View and manage guest information and booking history"),t.k0s()(),t.j41(9,"div",5)(10,"button",6),t.bIt("click",function(){return t.eBV(p),t.Njj(l.loadData())}),t.k0s()()()(),t.j41(11,"div",7)(12,"p-card")(13,"div",8)(14,"span",9),t.EFF(15),t.k0s(),t.j41(16,"span",10),t.EFF(17,"Total Guests"),t.k0s()()(),t.j41(18,"p-card")(19,"div",8)(20,"span",9),t.EFF(21),t.k0s(),t.j41(22,"span",10),t.EFF(23,"Active Guests"),t.k0s()()(),t.j41(24,"p-card")(25,"div",8)(26,"span",9),t.EFF(27),t.nI1(28,"currency"),t.k0s(),t.j41(29,"span",10),t.EFF(30,"Total Revenue"),t.k0s()()(),t.j41(31,"p-card")(32,"div",8)(33,"span",9),t.EFF(34),t.nI1(35,"currency"),t.k0s(),t.j41(36,"span",10),t.EFF(37,"Avg. Spending"),t.k0s()()()(),t.j41(38,"p-card",11)(39,"div",12)(40,"input",13),t.mxI("ngModelChange",function(O){return t.eBV(p),t.DH7(l.searchTerm,O)||(l.searchTerm=O),t.Njj(O)}),t.bIt("input",function(){return t.eBV(p),t.Njj(l.onSearch())}),t.k0s(),t.nrm(41,"i",14),t.k0s()(),t.DNE(42,W,5,6,"p-card",15)(43,S,2,0,"ng-template",null,0,t.C5r),t.j41(45,"p-dialog",16),t.mxI("visibleChange",function(O){return t.eBV(p),t.DH7(l.showGuestDialog,O)||(l.showGuestDialog=O),t.Njj(O)}),t.bIt("onHide",function(){return t.eBV(p),t.Njj(l.closeGuestDialog())}),t.DNE(46,x,30,12,"div",17),t.k0s()()}if(2&s){const p=t.sdS(44);t.R7$(15),t.JRh(l.guests.length),t.R7$(6),t.JRh(l.getActiveGuests()),t.R7$(6),t.JRh(t.bMT(28,14,l.getTotalRevenue())),t.R7$(7),t.JRh(t.bMT(35,16,l.getAverageSpending())),t.R7$(6),t.R50("ngModel",l.searchTerm),t.R7$(2),t.Y8G("ngIf",!l.loading)("ngIfElse",p),t.R7$(3),t.Aen(t.lJ4(18,a)),t.R50("visible",l.showGuestDialog),t.Y8G("header","Guest Details: "+((null==l.selectedGuest?null:l.selectedGuest.account_id)||""))("modal",!0)("closable",!0),t.R7$(),t.Y8G("ngIf",l.selectedGuest)}},dependencies:[_.MD,_.bT,_.PV,_.oe,_.vh,e.YN,e.me,e.BC,e.vS,C.iI,M.tm,M._f,v.Ei,b.Dw,b.Zp,D.Ph,D.lG,r.um,r.Sm,m.bG,m.XI,P.EJ,P.Ex,$.MB,$.y8,R.Ss,G.k2,G.EA,u.$C,j.mC,j.eu,f.mN,f.cG],styles:[".guests-page[_ngcontent-%COMP%]{padding:2rem}.guests-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;background:linear-gradient(135deg,var(--p-surface-0) 0%,rgba(var(--p-primary-500),.05) 100%);padding:2rem;border-radius:12px;border-bottom:2px solid rgba(var(--p-primary-500),.2)}.guests-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}.guests-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:2rem;font-weight:700;color:var(--p-surface-900)}.guests-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:var(--p-surface-600)}.guests-page[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:2rem}.guests-page[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   p-card[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1rem}.guests-page[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   p-card[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--p-primary-600)}.guests-page[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   p-card[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--p-surface-600);margin-top:.5rem}.guests-page[_ngcontent-%COMP%]   .search-card[_ngcontent-%COMP%]{margin-bottom:2rem}.guests-page[_ngcontent-%COMP%]   .search-card[_ngcontent-%COMP%]   .search-group[_ngcontent-%COMP%]{position:relative}.guests-page[_ngcontent-%COMP%]   .search-card[_ngcontent-%COMP%]   .search-group[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding-right:2.5rem}.guests-page[_ngcontent-%COMP%]   .search-card[_ngcontent-%COMP%]   .search-group[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);color:var(--p-surface-400)}.guests-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{padding:2rem}.guests-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:3rem;text-align:center;color:var(--p-surface-600)}.guests-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;color:var(--p-surface-400)}.guests-page[_ngcontent-%COMP%]   .guest-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.guests-page[_ngcontent-%COMP%]   .guest-info[_ngcontent-%COMP%]   .guest-id[_ngcontent-%COMP%]{font-weight:500;font-family:Courier New,monospace}.guests-page[_ngcontent-%COMP%]   .booking-count[_ngcontent-%COMP%]{font-weight:600;color:var(--p-primary-600)}.guests-page[_ngcontent-%COMP%]   .total-spent[_ngcontent-%COMP%]{font-weight:600;color:var(--p-success-600)}.guests-page[_ngcontent-%COMP%]   .apartment-name[_ngcontent-%COMP%]{font-weight:500}.guests-page[_ngcontent-%COMP%]   .guest-details-content[_ngcontent-%COMP%]   .guest-summary[_ngcontent-%COMP%]{margin-bottom:1.5rem}.guests-page[_ngcontent-%COMP%]   .guest-details-content[_ngcontent-%COMP%]   .guest-summary[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.guests-page[_ngcontent-%COMP%]   .guest-details-content[_ngcontent-%COMP%]   .guest-summary[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--p-surface-50);border-radius:6px}.guests-page[_ngcontent-%COMP%]   .guest-details-content[_ngcontent-%COMP%]   .guest-summary[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:var(--p-surface-600)}.guests-page[_ngcontent-%COMP%]   .guest-details-content[_ngcontent-%COMP%]   .guest-summary[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--p-surface-900)}.guests-page[_ngcontent-%COMP%]   .guest-details-content[_ngcontent-%COMP%]   .guest-summary[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.price[_ngcontent-%COMP%]{color:var(--p-primary-600);font-size:1.1rem}.guests-page[_ngcontent-%COMP%]   .guest-details-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1.5rem 0 1rem;color:var(--p-surface-900)}"]})}return g})()}}]);