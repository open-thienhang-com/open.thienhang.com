"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[3328],{491:(S,O,l)=>{l.d(O,{Dw:()=>Y,Zp:()=>N});var h=l(2881),t=l(1360),T=l(9744),v=l(5779),E=l(3491),$=l(6263);const s=["header"],f=["title"],k=["subtitle"],I=["content"],j=["footer"],w=["*",[["p-header"]],[["p-footer"]]],m=["*","p-header","p-footer"];function G(i,P){1&i&&t.eu8(0)}function y(i,P){if(1&i&&(t.j41(0,"div",8),t.SdG(1,1),t.DNE(2,G,1,0,"ng-container",6),t.k0s()),2&i){const c=t.XpG();t.R7$(2),t.Y8G("ngTemplateOutlet",c.headerTemplate||c._headerTemplate)}}function C(i,P){if(1&i&&(t.qex(0),t.EFF(1),t.bVm()),2&i){const c=t.XpG(2);t.R7$(),t.JRh(c.header)}}function R(i,P){1&i&&t.eu8(0)}function e(i,P){if(1&i&&(t.j41(0,"div",9),t.DNE(1,C,2,1,"ng-container",10)(2,R,1,0,"ng-container",6),t.k0s()),2&i){const c=t.XpG();t.R7$(),t.Y8G("ngIf",c.header&&!c._titleTemplate&&!c.titleTemplate),t.R7$(),t.Y8G("ngTemplateOutlet",c.titleTemplate||c._titleTemplate)}}function o(i,P){if(1&i&&(t.qex(0),t.EFF(1),t.bVm()),2&i){const c=t.XpG(2);t.R7$(),t.JRh(c.subheader)}}function F(i,P){1&i&&t.eu8(0)}function _(i,P){if(1&i&&(t.j41(0,"div",11),t.DNE(1,o,2,1,"ng-container",10)(2,F,1,0,"ng-container",6),t.k0s()),2&i){const c=t.XpG();t.R7$(),t.Y8G("ngIf",c.subheader&&!c._subtitleTemplate&&!c.subtitleTemplate),t.R7$(),t.Y8G("ngTemplateOutlet",c.subtitleTemplate||c._subtitleTemplate)}}function D(i,P){1&i&&t.eu8(0)}function M(i,P){1&i&&t.eu8(0)}function U(i,P){if(1&i&&(t.j41(0,"div",12),t.SdG(1,2),t.DNE(2,M,1,0,"ng-container",6),t.k0s()),2&i){const c=t.XpG();t.R7$(2),t.Y8G("ngTemplateOutlet",c.footerTemplate||c._footerTemplate)}}const B=({dt:i})=>`\n.p-card {\n    background: ${i("card.background")};\n    color: ${i("card.color")};\n    box-shadow: ${i("card.shadow")};\n    border-radius: ${i("card.border.radius")};\n    display: flex;\n    flex-direction: column;\n}\n\n.p-card-caption {\n    display: flex;\n    flex-direction: column;\n    gap: ${i("card.caption.gap")};\n}\n\n.p-card-body {\n    padding: ${i("card.body.padding")};\n    display: flex;\n    flex-direction: column;\n    gap: ${i("card.body.gap")};\n}\n\n.p-card-title {\n    font-size: ${i("card.title.font.size")};\n    font-weight: ${i("card.title.font.weight")};\n}\n\n.p-card-subtitle {\n    color: ${i("card.subtitle.color")};\n}\n`,L={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"};let A=(()=>{class i extends $.j{name="card";theme=B;classes=L;static \u0275fac=(()=>{let c;return function(d){return(c||(c=t.xGo(i)))(d||i)}})();static \u0275prov=t.jDH({token:i,factory:i.\u0275fac})}return i})(),N=(()=>{class i extends E.${header;subheader;set style(c){(0,T.aI)(this._style(),c)||this._style.set(c)}styleClass;headerFacet;footerFacet;headerTemplate;titleTemplate;subtitleTemplate;contentTemplate;footerTemplate;_headerTemplate;_titleTemplate;_subtitleTemplate;_contentTemplate;_footerTemplate;_style=(0,t.vPA)(null);_componentStyle=(0,t.WQX)(A);getBlockableElement(){return this.el.nativeElement.children[0]}templates;ngAfterContentInit(){this.templates.forEach(c=>{switch(c.getType()){case"header":this._headerTemplate=c.template;break;case"title":this._titleTemplate=c.template;break;case"subtitle":this._subtitleTemplate=c.template;break;case"content":default:this._contentTemplate=c.template;break;case"footer":this._footerTemplate=c.template}})}static \u0275fac=(()=>{let c;return function(d){return(c||(c=t.xGo(i)))(d||i)}})();static \u0275cmp=t.VBU({type:i,selectors:[["p-card"]],contentQueries:function(p,d,n){if(1&p&&(t.wni(n,v.Y9,5),t.wni(n,v.wi,5),t.wni(n,s,4),t.wni(n,f,4),t.wni(n,k,4),t.wni(n,I,4),t.wni(n,j,4),t.wni(n,v.Ei,4)),2&p){let r;t.mGM(r=t.lsd())&&(d.headerFacet=r.first),t.mGM(r=t.lsd())&&(d.footerFacet=r.first),t.mGM(r=t.lsd())&&(d.headerTemplate=r.first),t.mGM(r=t.lsd())&&(d.titleTemplate=r.first),t.mGM(r=t.lsd())&&(d.subtitleTemplate=r.first),t.mGM(r=t.lsd())&&(d.contentTemplate=r.first),t.mGM(r=t.lsd())&&(d.footerTemplate=r.first),t.mGM(r=t.lsd())&&(d.templates=r)}},inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},features:[t.Jv_([A]),t.Vt3],ngContentSelectors:m,decls:9,vars:10,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[4,"ngIf"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(p,d){1&p&&(t.NAR(w),t.j41(0,"div",0),t.DNE(1,y,3,1,"div",1),t.j41(2,"div",2),t.DNE(3,e,3,2,"div",3)(4,_,3,2,"div",4),t.j41(5,"div",5),t.SdG(6),t.DNE(7,D,1,0,"ng-container",6),t.k0s(),t.DNE(8,U,3,1,"div",7),t.k0s()()),2&p&&(t.HbH(d.styleClass),t.Y8G("ngClass","p-card p-component")("ngStyle",d._style()),t.BMQ("data-pc-name","card"),t.R7$(),t.Y8G("ngIf",d.headerFacet||d.headerTemplate||d._headerTemplate),t.R7$(2),t.Y8G("ngIf",d.header||d.titleTemplate||d._titleTemplate),t.R7$(),t.Y8G("ngIf",d.subheader||d.subtitleTemplate||d._subtitleTemplate),t.R7$(3),t.Y8G("ngTemplateOutlet",d.contentTemplate||d._contentTemplate),t.R7$(),t.Y8G("ngIf",d.footerFacet||d.footerTemplate||d._footerTemplate))},dependencies:[h.MD,h.YU,h.bT,h.T3,h.B3,v.Gg],encapsulation:2,changeDetection:0})}return i})(),Y=(()=>{class i{static \u0275fac=function(p){return new(p||i)};static \u0275mod=t.$C({type:i});static \u0275inj=t.G2t({imports:[N,v.Gg,v.Gg]})}return i})()},935:(S,O,l)=>{l.d(O,{$C:()=>e,vw:()=>R});var h=l(2881),t=l(1360),T=l(5779),v=l(3491),E=l(6263);const $=["icon"],s=["*"];function f(o,F){if(1&o&&t.nrm(0,"span",4),2&o){const _=t.XpG(2);t.Y8G("ngClass",_.icon)}}function k(o,F){if(1&o&&(t.qex(0),t.DNE(1,f,1,1,"span",3),t.bVm()),2&o){const _=t.XpG();t.R7$(),t.Y8G("ngIf",_.icon)}}function I(o,F){}function j(o,F){1&o&&t.DNE(0,I,0,0,"ng-template")}function w(o,F){if(1&o&&(t.j41(0,"span",5),t.DNE(1,j,1,0,null,6),t.k0s()),2&o){const _=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",_.iconTemplate||_._iconTemplate)}}const m=({dt:o})=>`\n.p-tag {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    background: ${o("tag.primary.background")};\n    color: ${o("tag.primary.color")};\n    font-size: ${o("tag.font.size")};\n    font-weight: ${o("tag.font.weight")};\n    padding: ${o("tag.padding")};\n    border-radius: ${o("tag.border.radius")};\n    gap: ${o("tag.gap")};\n}\n\n.p-tag-icon {\n    font-size: ${o("tag.icon.size")};\n    width: ${o("tag.icon.size")};\n    height:${o("tag.icon.size")};\n}\n\n.p-tag-rounded {\n    border-radius: ${o("tag.rounded.border.radius")};\n}\n\n.p-tag-success {\n    background: ${o("tag.success.background")};\n    color: ${o("tag.success.color")};\n}\n\n.p-tag-info {\n    background: ${o("tag.info.background")};\n    color: ${o("tag.info.color")};\n}\n\n.p-tag-warn {\n    background: ${o("tag.warn.background")};\n    color: ${o("tag.warn.color")};\n}\n\n.p-tag-danger {\n    background: ${o("tag.danger.background")};\n    color: ${o("tag.danger.color")};\n}\n\n.p-tag-secondary {\n    background: ${o("tag.secondary.background")};\n    color: ${o("tag.secondary.color")};\n}\n\n.p-tag-contrast {\n    background: ${o("tag.contrast.background")};\n    color: ${o("tag.contrast.color")};\n}\n`,G={root:({props:o})=>["p-tag p-component",{"p-tag-info":"info"===o.severity,"p-tag-success":"success"===o.severity,"p-tag-warn":"warn"===o.severity,"p-tag-danger":"danger"===o.severity,"p-tag-secondary":"secondary"===o.severity,"p-tag-contrast":"contrast"===o.severity,"p-tag-rounded":o.rounded}],icon:"p-tag-icon",label:"p-tag-label"};let y=(()=>{class o extends E.j{name="tag";theme=m;classes=G;static \u0275fac=(()=>{let _;return function(M){return(_||(_=t.xGo(o)))(M||o)}})();static \u0275prov=t.jDH({token:o,factory:o.\u0275fac})}return o})(),R=(()=>{class o extends v.${get style(){return this._style}set style(_){this._style=_,this.cd.markForCheck()}styleClass;severity;value;icon;rounded;iconTemplate;templates;_iconTemplate;_style;_componentStyle=(0,t.WQX)(y);ngAfterContentInit(){this.templates?.forEach(_=>{"icon"===_.getType()&&(this._iconTemplate=_.template)})}containerClass(){let _="p-tag p-component";return this.severity&&(_+=` p-tag-${this.severity}`),this.rounded&&(_+=" p-tag-rounded"),this.styleClass&&(_+=` ${this.styleClass}`),_}static \u0275fac=(()=>{let _;return function(M){return(_||(_=t.xGo(o)))(M||o)}})();static \u0275cmp=t.VBU({type:o,selectors:[["p-tag"]],contentQueries:function(D,M,U){if(1&D&&(t.wni(U,$,4),t.wni(U,T.Ei,4)),2&D){let B;t.mGM(B=t.lsd())&&(M.iconTemplate=B.first),t.mGM(B=t.lsd())&&(M.templates=B)}},hostVars:4,hostBindings:function(D,M){2&D&&(t.Aen(M.style),t.HbH(M.containerClass()))},inputs:{style:"style",styleClass:"styleClass",severity:"severity",value:"value",icon:"icon",rounded:[2,"rounded","rounded",t.L39]},features:[t.Jv_([y]),t.Vt3],ngContentSelectors:s,decls:5,vars:3,consts:[[4,"ngIf"],["class","p-tag-icon",4,"ngIf"],[1,"p-tag-label"],["class","p-tag-icon",3,"ngClass",4,"ngIf"],[1,"p-tag-icon",3,"ngClass"],[1,"p-tag-icon"],[4,"ngTemplateOutlet"]],template:function(D,M){1&D&&(t.NAR(),t.SdG(0),t.DNE(1,k,2,1,"ng-container",0)(2,w,2,1,"span",1),t.j41(3,"span",2),t.EFF(4),t.k0s()),2&D&&(t.R7$(),t.Y8G("ngIf",!M.iconTemplate&&!M._iconTemplate),t.R7$(),t.Y8G("ngIf",M.iconTemplate||M._iconTemplate),t.R7$(2),t.JRh(M.value))},dependencies:[h.MD,h.YU,h.bT,h.T3,T.Gg],encapsulation:2,changeDetection:0})}return o})(),e=(()=>{class o{static \u0275fac=function(D){return new(D||o)};static \u0275mod=t.$C({type:o});static \u0275inj=t.G2t({imports:[R,T.Gg,T.Gg]})}return o})()},3328:(S,O,l)=>{l.r(O),l.d(O,{MaintenanceComponent:()=>c});var h=l(2881),t=l(9417),T=l(5207),v=l(1141),E=l(491),$=l(1570),s=l(2242),f=l(1305),k=l(1003),I=l(8150),j=l(6221),w=l(6150),m=l(7722),G=l(5716),y=l(935),C=l(5779),R=l(5545),e=l(1360);const o=()=>({width:"60vw"}),F=()=>[10,25,50];function _(p,d){1&p&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Request ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Title"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Type"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Location"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Priority"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Status"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Created"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Actions"),e.k0s()())}function D(p,d){if(1&p&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&p){const n=e.XpG().$implicit,r=e.XpG(2);e.R7$(),e.JRh(r.getApartmentName(n.apartment_id))}}function M(p,d){if(1&p&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&p){const n=e.XpG().$implicit,r=e.XpG(2);e.R7$(),e.JRh(r.getRoomName(n.room_id))}}function U(p,d){1&p&&(e.j41(0,"span"),e.EFF(1,"General"),e.k0s())}function B(p,d){if(1&p){const n=e.RV6();e.j41(0,"button",43),e.bIt("click",function(){e.eBV(n);const a=e.XpG().$implicit,u=e.XpG(2);return e.Njj(u.updateStatus(a,"completed"))}),e.k0s()}}function L(p,d){if(1&p){const n=e.RV6();e.j41(0,"tr")(1,"td")(2,"span",35),e.EFF(3),e.k0s()(),e.j41(4,"td")(5,"span",36),e.EFF(6),e.k0s()(),e.j41(7,"td"),e.nrm(8,"p-tag",37),e.nI1(9,"titlecase"),e.k0s(),e.j41(10,"td"),e.DNE(11,D,2,1,"span",38)(12,M,2,1,"span",38)(13,U,2,0,"span",38),e.k0s(),e.j41(14,"td"),e.nrm(15,"p-badge",39),e.nI1(16,"titlecase"),e.k0s(),e.j41(17,"td"),e.nrm(18,"p-badge",39),e.nI1(19,"titlecase"),e.k0s(),e.j41(20,"td"),e.EFF(21),e.nI1(22,"date"),e.k0s(),e.j41(23,"td")(24,"div",40)(25,"button",41),e.bIt("click",function(){const a=e.eBV(n).$implicit,u=e.XpG(2);return e.Njj(u.editRequest(a))}),e.k0s(),e.DNE(26,B,1,0,"button",42),e.k0s()()()}if(2&p){const n=d.$implicit,r=e.XpG(2);e.R7$(3),e.JRh(n.id),e.R7$(3),e.JRh(n.title),e.R7$(2),e.Y8G("value",e.bMT(9,12,n.type)),e.R7$(3),e.Y8G("ngIf",n.apartment_id),e.R7$(),e.Y8G("ngIf",n.room_id),e.R7$(),e.Y8G("ngIf",!n.apartment_id&&!n.room_id),e.R7$(2),e.Y8G("value",e.bMT(16,14,n.priority))("severity",r.getPrioritySeverity(n.priority)),e.R7$(3),e.Y8G("value",e.bMT(19,16,n.status))("severity",r.getStatusSeverity(n.status)),e.R7$(3),e.SpI(" ",e.i5U(22,18,n.created_at,"short")," "),e.R7$(5),e.Y8G("ngIf","completed"!==n.status)}}function A(p,d){1&p&&(e.j41(0,"tr")(1,"td",44)(2,"div",45),e.nrm(3,"i",46),e.j41(4,"p"),e.EFF(5,"No maintenance requests found"),e.k0s()()()())}function V(p,d){if(1&p&&(e.j41(0,"p-card")(1,"p-table",31),e.DNE(2,_,17,0,"ng-template",32)(3,L,27,21,"ng-template",33)(4,A,6,0,"ng-template",34),e.k0s()()),2&p){const n=e.XpG();e.R7$(),e.Y8G("value",n.filteredRequests)("paginator",!0)("rows",10)("rowsPerPageOptions",e.lJ4(5,F))("showCurrentPageReport",!0)}}function N(p,d){1&p&&(e.j41(0,"div",47),e.nrm(1,"p-skeleton",48),e.k0s())}function Y(p,d){if(1&p){const n=e.RV6();e.j41(0,"div",23)(1,"label"),e.EFF(2,"Apartment"),e.k0s(),e.j41(3,"p-dropdown",49),e.mxI("ngModelChange",function(a){e.eBV(n);const u=e.XpG();return e.DH7(u.formData.apartment_id,a)||(u.formData.apartment_id=a),e.Njj(a)}),e.k0s()()}if(2&p){const n=e.XpG();e.R7$(3),e.Y8G("options",n.apartmentsForDropdown),e.R50("ngModel",n.formData.apartment_id)}}function i(p,d){if(1&p){const n=e.RV6();e.j41(0,"div",23)(1,"label"),e.EFF(2,"Room"),e.k0s(),e.j41(3,"p-dropdown",50),e.mxI("ngModelChange",function(a){e.eBV(n);const u=e.XpG();return e.DH7(u.formData.room_id,a)||(u.formData.room_id=a),e.Njj(a)}),e.k0s()()}if(2&p){const n=e.XpG();e.R7$(3),e.Y8G("options",n.rooms),e.R50("ngModel",n.formData.room_id)}}function P(p,d){if(1&p){const n=e.RV6();e.j41(0,"button",51),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.closeDialog())}),e.k0s(),e.j41(1,"button",52),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.saveRequest())}),e.k0s()}}let c=(()=>{class p{hotelService;messageService;requests=[];filteredRequests=[];apartments=[];apartmentsForDropdown=[];rooms=[];loading=!1;searchTerm="";selectedStatus=null;selectedPriority=null;selectedType=null;showDialog=!1;isEditMode=!1;selectedRequest=null;formData={type:"general",priority:"medium",status:"pending"};statusOptions=[{label:"All Statuses",value:null},{label:"Pending",value:"pending"},{label:"In Progress",value:"in_progress"},{label:"Completed",value:"completed"},{label:"Cancelled",value:"cancelled"}];priorityOptions=[{label:"All Priorities",value:null},{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"},{label:"Urgent",value:"urgent"}];typeOptions=[{label:"General",value:"general"},{label:"Apartment",value:"apartment"},{label:"Room",value:"room"}];constructor(n,r){this.hotelService=n,this.messageService=r}ngOnInit(){this.loadData(),this.generateSampleRequests()}loadData(){this.loading=!0,Promise.all([this.hotelService.getApartments().toPromise(),this.hotelService.getRooms().toPromise()]).then(([n,r])=>{this.apartments=n?.data||[],this.apartmentsForDropdown=this.apartments.map(a=>({...a,id:a.id||a._id})),this.rooms=r?.data||[],this.loading=!1}).catch(()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load data"}),this.loading=!1})}generateSampleRequests(){this.requests=[{id:"MAINT-001",apartment_id:this.apartments[0]?.id||"apt_001",title:"AC Unit Repair",description:"Air conditioning unit not cooling properly in bedroom",type:"apartment",priority:"high",status:"in_progress",created_at:new Date,updated_at:new Date,scheduled_date:new Date},{id:"MAINT-002",room_id:this.rooms[0]?.id||"room_001",title:"Plumbing Issue",description:"Leaky faucet in bathroom",type:"room",priority:"medium",status:"pending",created_at:new Date,updated_at:new Date},{id:"MAINT-003",title:"WiFi Router Replacement",description:"Router needs to be replaced for better coverage",type:"general",priority:"low",status:"completed",created_at:new Date(Date.now()-864e5),updated_at:new Date,completed_date:new Date}],this.filterRequests()}filterRequests(){let n=[...this.requests];if(this.searchTerm){const r=this.searchTerm.toLowerCase();n=n.filter(a=>a.id.toLowerCase().includes(r)||a.title.toLowerCase().includes(r)||a.description.toLowerCase().includes(r))}this.selectedStatus&&(n=n.filter(r=>r.status===this.selectedStatus)),this.selectedPriority&&(n=n.filter(r=>r.priority===this.selectedPriority)),this.selectedType&&(n=n.filter(r=>r.type===this.selectedType)),this.filteredRequests=n}onSearch(){this.filterRequests()}onStatusChange(){this.filterRequests()}onPriorityChange(){this.filterRequests()}onTypeChange(){this.filterRequests()}openDialog(){this.isEditMode=!1,this.formData={type:"general",priority:"medium",status:"pending"},this.showDialog=!0}editRequest(n){this.isEditMode=!0,this.selectedRequest=n,this.formData={...n},this.showDialog=!0}closeDialog(){this.showDialog=!1,this.selectedRequest=null,this.formData={type:"general",priority:"medium",status:"pending"}}saveRequest(){if(this.formData.title&&this.formData.description){if(this.isEditMode&&this.selectedRequest){const n=this.requests.findIndex(r=>r.id===this.selectedRequest.id);-1!==n&&(this.requests[n]={...this.requests[n],...this.formData,updated_at:new Date},this.messageService.add({severity:"success",summary:"Success",detail:"Maintenance request updated"}))}else{const n={id:`MAINT-${Date.now()}`,apartment_id:this.formData.apartment_id,room_id:this.formData.room_id,title:this.formData.title,description:this.formData.description,type:this.formData.type||"general",priority:this.formData.priority||"medium",status:this.formData.status||"pending",assigned_to:this.formData.assigned_to,scheduled_date:this.formData.scheduled_date,created_at:new Date,updated_at:new Date};this.requests.push(n),this.messageService.add({severity:"success",summary:"Success",detail:"Maintenance request created"})}this.filterRequests(),this.closeDialog()}else this.messageService.add({severity:"warn",summary:"Validation",detail:"Please fill in all required fields"})}updateStatus(n,r){n.status=r,n.updated_at=new Date,"completed"===r&&(n.completed_date=new Date),this.messageService.add({severity:"success",summary:"Success",detail:"Status updated"}),this.filterRequests()}getStatusSeverity(n){return{pending:"warning",in_progress:"info",completed:"success",cancelled:"danger"}[n]||"secondary"}getPrioritySeverity(n){return{urgent:"danger",high:"warning",medium:"info",low:"success"}[n]||"secondary"}getApartmentName(n){if(!n)return"N/A";const r=this.apartments.find(a=>(a.id||a._id)===n);return r?r.title:n}getRoomName(n){if(!n)return"N/A";const r=this.rooms.find(a=>a.id===n);return r?r.name:n}getPendingRequests(){return this.requests.filter(n=>"pending"===n.status).length}getInProgressRequests(){return this.requests.filter(n=>"in_progress"===n.status).length}getCompletedRequests(){return this.requests.filter(n=>"completed"===n.status).length}static \u0275fac=function(r){return new(r||p)(e.rXU(R.g),e.rXU(C.bg))};static \u0275cmp=e.VBU({type:p,selectors:[["app-hotel-maintenance"]],features:[e.Jv_([C.bg])],decls:86,vars:31,consts:[["loadingTemplate",""],[1,"maintenance-page"],[1,"page-header"],[1,"header-content"],[1,"subtitle"],[1,"header-actions"],["pButton","","type","button","label","New Request","icon","pi pi-plus",1,"p-button-primary",3,"click"],["pButton","","type","button","label","Refresh","icon","pi pi-refresh",1,"p-button-secondary",3,"click"],[1,"summary-cards"],[1,"summary-stat"],[1,"stat-value"],[1,"stat-label"],[1,"filters-card"],[1,"filters"],[1,"filter-group"],["pInputText","","type","text","placeholder","Search requests...",3,"ngModelChange","input","ngModel"],["optionLabel","label","optionValue","value","placeholder","All Statuses",3,"ngModelChange","onChange","options","ngModel"],["optionLabel","label","optionValue","value","placeholder","All Priorities",3,"ngModelChange","onChange","options","ngModel"],["optionLabel","label","optionValue","value","placeholder","All Types",3,"ngModelChange","onChange","options","ngModel"],[4,"ngIf","ngIfElse"],[3,"visibleChange","onHide","visible","header","modal","closable"],[1,"request-form"],[1,"form-row"],[1,"form-group"],["optionLabel","label","optionValue","value","placeholder","Select Type",3,"ngModelChange","options","ngModel"],["optionLabel","label","optionValue","value","placeholder","Select Priority",3,"ngModelChange","options","ngModel"],["pInputText","","type","text","placeholder","Enter request title",3,"ngModelChange","ngModel"],["pInputTextarea","","rows","5","placeholder","Enter request description...",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],["placeholder","Select Date",3,"ngModelChange","ngModel","showIcon","showClear"],["pTemplate","footer"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} requests","styleClass","p-datatable-sm",3,"value","paginator","rows","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"request-id"],[1,"request-title"],["severity","info",3,"value"],[4,"ngIf"],[3,"value","severity"],[1,"action-buttons"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Edit",1,"p-button-sm","p-button-text","p-button-info",3,"click"],["pButton","","type","button","icon","pi pi-check","class","p-button-sm p-button-text p-button-success","pTooltip","Mark Completed",3,"click",4,"ngIf"],["pButton","","type","button","icon","pi pi-check","pTooltip","Mark Completed",1,"p-button-sm","p-button-text","p-button-success",3,"click"],["colspan","8",1,"text-center"],[1,"empty-state"],[1,"pi","pi-wrench"],[1,"loading-container"],["height","300px"],["optionLabel","title","optionValue","id","placeholder","Select Apartment",3,"ngModelChange","options","ngModel"],["optionLabel","name","optionValue","id","placeholder","Select Room",3,"ngModelChange","options","ngModel"],["pButton","","type","button","label","Cancel","icon","pi pi-times",1,"p-button-secondary",3,"click"],["pButton","","type","button","label","Save","icon","pi pi-check",1,"p-button-primary",3,"click"]],template:function(r,a){if(1&r){const u=e.RV6();e.j41(0,"div",1),e.nrm(1,"p-toast"),e.j41(2,"div",2)(3,"div",3)(4,"div")(5,"h1"),e.EFF(6,"Maintenance Management"),e.k0s(),e.j41(7,"p",4),e.EFF(8,"Track and manage maintenance requests"),e.k0s()(),e.j41(9,"div",5)(10,"button",6),e.bIt("click",function(){return e.eBV(u),e.Njj(a.openDialog())}),e.k0s(),e.j41(11,"button",7),e.bIt("click",function(){return e.eBV(u),e.Njj(a.loadData())}),e.k0s()()()(),e.j41(12,"div",8)(13,"p-card")(14,"div",9)(15,"span",10),e.EFF(16),e.k0s(),e.j41(17,"span",11),e.EFF(18,"Total Requests"),e.k0s()()(),e.j41(19,"p-card")(20,"div",9)(21,"span",10),e.EFF(22),e.k0s(),e.j41(23,"span",11),e.EFF(24,"Pending"),e.k0s()()(),e.j41(25,"p-card")(26,"div",9)(27,"span",10),e.EFF(28),e.k0s(),e.j41(29,"span",11),e.EFF(30,"In Progress"),e.k0s()()(),e.j41(31,"p-card")(32,"div",9)(33,"span",10),e.EFF(34),e.k0s(),e.j41(35,"span",11),e.EFF(36,"Completed"),e.k0s()()()(),e.j41(37,"p-card",12)(38,"div",13)(39,"div",14)(40,"label"),e.EFF(41,"Search"),e.k0s(),e.j41(42,"input",15),e.mxI("ngModelChange",function(g){return e.eBV(u),e.DH7(a.searchTerm,g)||(a.searchTerm=g),e.Njj(g)}),e.bIt("input",function(){return e.eBV(u),e.Njj(a.onSearch())}),e.k0s()(),e.j41(43,"div",14)(44,"label"),e.EFF(45,"Status"),e.k0s(),e.j41(46,"p-dropdown",16),e.mxI("ngModelChange",function(g){return e.eBV(u),e.DH7(a.selectedStatus,g)||(a.selectedStatus=g),e.Njj(g)}),e.bIt("onChange",function(){return e.eBV(u),e.Njj(a.onStatusChange())}),e.k0s()(),e.j41(47,"div",14)(48,"label"),e.EFF(49,"Priority"),e.k0s(),e.j41(50,"p-dropdown",17),e.mxI("ngModelChange",function(g){return e.eBV(u),e.DH7(a.selectedPriority,g)||(a.selectedPriority=g),e.Njj(g)}),e.bIt("onChange",function(){return e.eBV(u),e.Njj(a.onPriorityChange())}),e.k0s()(),e.j41(51,"div",14)(52,"label"),e.EFF(53,"Type"),e.k0s(),e.j41(54,"p-dropdown",18),e.mxI("ngModelChange",function(g){return e.eBV(u),e.DH7(a.selectedType,g)||(a.selectedType=g),e.Njj(g)}),e.bIt("onChange",function(){return e.eBV(u),e.Njj(a.onTypeChange())}),e.k0s()()()(),e.DNE(55,V,5,6,"p-card",19)(56,N,2,0,"ng-template",null,0,e.C5r),e.j41(58,"p-dialog",20),e.mxI("visibleChange",function(g){return e.eBV(u),e.DH7(a.showDialog,g)||(a.showDialog=g),e.Njj(g)}),e.bIt("onHide",function(){return e.eBV(u),e.Njj(a.closeDialog())}),e.j41(59,"div",21)(60,"div",22)(61,"div",23)(62,"label"),e.EFF(63,"Type *"),e.k0s(),e.j41(64,"p-dropdown",24),e.mxI("ngModelChange",function(g){return e.eBV(u),e.DH7(a.formData.type,g)||(a.formData.type=g),e.Njj(g)}),e.k0s()(),e.j41(65,"div",23)(66,"label"),e.EFF(67,"Priority *"),e.k0s(),e.j41(68,"p-dropdown",25),e.mxI("ngModelChange",function(g){return e.eBV(u),e.DH7(a.formData.priority,g)||(a.formData.priority=g),e.Njj(g)}),e.k0s()()(),e.j41(69,"div",23)(70,"label"),e.EFF(71,"Title *"),e.k0s(),e.j41(72,"input",26),e.mxI("ngModelChange",function(g){return e.eBV(u),e.DH7(a.formData.title,g)||(a.formData.title=g),e.Njj(g)}),e.k0s()(),e.j41(73,"div",23)(74,"label"),e.EFF(75,"Description *"),e.k0s(),e.j41(76,"textarea",27),e.mxI("ngModelChange",function(g){return e.eBV(u),e.DH7(a.formData.description,g)||(a.formData.description=g),e.Njj(g)}),e.EFF(77,"        "),e.k0s()(),e.j41(78,"div",22),e.DNE(79,Y,4,2,"div",28)(80,i,4,2,"div",28),e.j41(81,"div",23)(82,"label"),e.EFF(83,"Scheduled Date"),e.k0s(),e.j41(84,"p-calendar",29),e.mxI("ngModelChange",function(g){return e.eBV(u),e.DH7(a.formData.scheduled_date,g)||(a.formData.scheduled_date=g),e.Njj(g)}),e.k0s()()()(),e.DNE(85,P,2,0,"ng-template",30),e.k0s()()}if(2&r){const u=e.sdS(57);e.R7$(16),e.JRh(a.requests.length),e.R7$(6),e.JRh(a.getPendingRequests()),e.R7$(6),e.JRh(a.getInProgressRequests()),e.R7$(6),e.JRh(a.getCompletedRequests()),e.R7$(8),e.R50("ngModel",a.searchTerm),e.R7$(4),e.Y8G("options",a.statusOptions),e.R50("ngModel",a.selectedStatus),e.R7$(4),e.Y8G("options",a.priorityOptions),e.R50("ngModel",a.selectedPriority),e.R7$(4),e.Y8G("options",a.typeOptions),e.R50("ngModel",a.selectedType),e.R7$(),e.Y8G("ngIf",!a.loading)("ngIfElse",u),e.R7$(3),e.Aen(e.lJ4(30,o)),e.R50("visible",a.showDialog),e.Y8G("header",a.isEditMode?"Edit Maintenance Request":"Create Maintenance Request")("modal",!0)("closable",!0),e.R7$(6),e.Y8G("options",a.typeOptions),e.R50("ngModel",a.formData.type),e.R7$(4),e.Y8G("options",a.priorityOptions.slice(1)),e.R50("ngModel",a.formData.priority),e.R7$(4),e.R50("ngModel",a.formData.title),e.R7$(4),e.R50("ngModel",a.formData.description),e.R7$(3),e.Y8G("ngIf","apartment"===a.formData.type),e.R7$(),e.Y8G("ngIf","room"===a.formData.type),e.R7$(4),e.R50("ngModel",a.formData.scheduled_date),e.Y8G("showIcon",!0)("showClear",!0)}},dependencies:[h.MD,h.bT,h.PV,h.vh,t.YN,t.me,t.BC,t.vS,T.iI,v.tm,v._f,C.Ei,E.Dw,E.Zp,$.Ph,$.lG,s.um,s.Sm,f.Z2,k.rO,k.Vv,I.kr,I.ms,j.bG,j.XI,w.EJ,w.Ex,m.MB,m.y8,G.k2,G.EA,y.$C,y.vw],styles:[".maintenance-page[_ngcontent-%COMP%]{padding:2rem}.maintenance-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;background:linear-gradient(135deg,var(--p-surface-0) 0%,rgba(var(--p-primary-500),.05) 100%);padding:2rem;border-radius:12px;border-bottom:2px solid rgba(var(--p-primary-500),.2)}.maintenance-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}.maintenance-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:2rem;font-weight:700;color:var(--p-surface-900)}.maintenance-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:var(--p-surface-600)}.maintenance-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.maintenance-page[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:2rem}.maintenance-page[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   p-card[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1rem}.maintenance-page[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   p-card[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--p-primary-600)}.maintenance-page[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   p-card[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--p-surface-600);margin-top:.5rem}.maintenance-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]{margin-bottom:2rem}.maintenance-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.maintenance-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.maintenance-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--p-surface-700);font-size:.9rem}.maintenance-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{padding:2rem}.maintenance-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:3rem;text-align:center;color:var(--p-surface-600)}.maintenance-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;color:var(--p-surface-400)}.maintenance-page[_ngcontent-%COMP%]   .request-id[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.9rem}.maintenance-page[_ngcontent-%COMP%]   .request-title[_ngcontent-%COMP%]{font-weight:500}.maintenance-page[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.maintenance-page[_ngcontent-%COMP%]   .request-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-bottom:1rem}.maintenance-page[_ngcontent-%COMP%]   .request-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem}.maintenance-page[_ngcontent-%COMP%]   .request-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--p-surface-700)}"]})}return p})()},5545:(S,O,l)=>{l.d(O,{g:()=>v});var h=l(4754),t=l(1360),T=l(8989);let v=(()=>{class E{http;baseUrl=`${(0,h.Gi)()}/data-mesh/domains/hotel`;constructor(s){this.http=s}createApartment(s){return this.http.post(`${this.baseUrl}/apartments`,s)}getApartments(){return this.http.get(`${this.baseUrl}/apartments`)}getApartmentById(s){return this.http.get(`${this.baseUrl}/apartments/${s}`)}updateApartment(s,f){return this.http.put(`${this.baseUrl}/apartments/${s}`,f)}deleteApartment(s){return this.http.delete(`${this.baseUrl}/apartments/${s}`)}createRoom(s){return this.http.post(`${this.baseUrl}/rooms/room`,s)}getRooms(){return this.http.get(`${this.baseUrl}/rooms/rooms`)}getRoomById(s){return this.http.get(`${this.baseUrl}/rooms/room/${s}`)}updateRoom(s,f){return this.http.put(`${this.baseUrl}/rooms/room/${s}`,f)}deleteRoom(s){return this.http.delete(`${this.baseUrl}/rooms/room/${s}`)}createBooking(s){return this.http.post(`${this.baseUrl}/bookings/booking`,s)}getBookingById(s){return this.http.get(`${this.baseUrl}/bookings/booking/${s}`)}getBookings(){return this.http.get(`${this.baseUrl}/bookings/bookings`)}updateBooking(s,f){return this.http.put(`${this.baseUrl}/bookings/booking/${s}`,f)}deleteBooking(s){return this.http.delete(`${this.baseUrl}/bookings/booking/${s}`)}cancelBooking(s){return this.http.patch(`${this.baseUrl}/bookings/booking/${s}/cancel`,{})}createReview(s){return this.http.post(`${this.baseUrl}/reviews/review`,s)}getReviewById(s){return this.http.get(`${this.baseUrl}/reviews/review/${s}`)}getReviews(){return this.http.get(`${this.baseUrl}/reviews/reviews`)}getReviewsByApartment(s){return this.http.get(`${this.baseUrl}/reviews/reviews?apartment_id=${s}`)}updateReview(s,f){return this.http.put(`${this.baseUrl}/reviews/review/${s}`,f)}deleteReview(s){return this.http.delete(`${this.baseUrl}/reviews/review/${s}`)}createRating(s){return this.http.post(`${this.baseUrl}/ratings/rating`,s)}getRatingById(s){return this.http.get(`${this.baseUrl}/ratings/rating/${s}`)}getRatings(){return this.http.get(`${this.baseUrl}/ratings/ratings`)}getRatingsByApartment(s){return this.http.get(`${this.baseUrl}/ratings/ratings?apartment_id=${s}`)}getRoomsByApartment(s){return this.http.get(`${this.baseUrl}/rooms/rooms?apartment_id=${s}`)}updateRating(s,f){return this.http.put(`${this.baseUrl}/ratings/rating/${s}`,f)}deleteRating(s){return this.http.delete(`${this.baseUrl}/ratings/rating/${s}`)}healthCheck(){return this.http.get(`${this.baseUrl}/health/`)}getVersion(){return this.http.get(`${this.baseUrl}/version`)}static \u0275fac=function(f){return new(f||E)(t.KVO(T.Qq))};static \u0275prov=t.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},5716:(S,O,l)=>{l.d(O,{EA:()=>j,k2:()=>w});var h=l(2881),t=l(1360),T=l(5779),v=l(3491),E=l(6263);const $=({dt:m})=>`\n.p-skeleton {\n    overflow: hidden;\n    background: ${m("skeleton.background")};\n    border-radius: ${m("skeleton.border.radius")};\n}\n\n.p-skeleton::after {\n    content: "";\n    animation: p-skeleton-animation 1.2s infinite;\n    height: 100%;\n    left: 0;\n    position: absolute;\n    right: 0;\n    top: 0;\n    transform: translateX(-100%);\n    z-index: 1;\n    background: linear-gradient(90deg, rgba(255, 255, 255, 0), ${m("skeleton.animation.background")}, rgba(255, 255, 255, 0));\n}\n\n[dir='rtl'] .p-skeleton::after {\n    animation-name: p-skeleton-animation-rtl;\n}\n\n.p-skeleton-circle {\n    border-radius: 50%;\n}\n\n.p-skeleton-animation-none::after {\n    animation: none;\n}\n\n@keyframes p-skeleton-animation {\n    from {\n        transform: translateX(-100%);\n    }\n    to {\n        transform: translateX(100%);\n    }\n}\n\n@keyframes p-skeleton-animation-rtl {\n    from {\n        transform: translateX(100%);\n    }\n    to {\n        transform: translateX(-100%);\n    }\n}\n`,s={root:{position:"relative"}},f={root:({props:m})=>["p-skeleton p-component",{"p-skeleton-circle":"circle"===m.shape,"p-skeleton-animation-none":"none"===m.animation}]};let k=(()=>{class m extends E.j{name="skeleton";theme=$;classes=f;inlineStyles=s;static \u0275fac=(()=>{let y;return function(R){return(y||(y=t.xGo(m)))(R||m)}})();static \u0275prov=t.jDH({token:m,factory:m.\u0275fac})}return m})(),j=(()=>{class m extends v.${styleClass;style;shape="rectangle";animation="wave";borderRadius;size;width="100%";height="1rem";_componentStyle=(0,t.WQX)(k);containerClass(){return{"p-skeleton p-component":!0,"p-skeleton-circle":"circle"===this.shape,"p-skeleton-animation-none":"none"===this.animation}}get containerStyle(){const y=this._componentStyle?.inlineStyles.root;let C;return C=this.size?{...this.style,...y,width:this.size,height:this.size,borderRadius:this.borderRadius}:{...y,width:this.width,height:this.height,borderRadius:this.borderRadius,...this.style},C}static \u0275fac=(()=>{let y;return function(R){return(y||(y=t.xGo(m)))(R||m)}})();static \u0275cmp=t.VBU({type:m,selectors:[["p-skeleton"]],inputs:{styleClass:"styleClass",style:"style",shape:"shape",animation:"animation",borderRadius:"borderRadius",size:"size",width:"width",height:"height"},features:[t.Jv_([k]),t.Vt3],decls:1,vars:7,consts:[[3,"ngClass","ngStyle"]],template:function(C,R){1&C&&t.nrm(0,"div",0),2&C&&(t.HbH(R.styleClass),t.Y8G("ngClass",R.containerClass())("ngStyle",R.containerStyle),t.BMQ("data-pc-name","skeleton")("aria-hidden",!0)("data-pc-section","root"))},dependencies:[h.MD,h.YU,h.B3,T.Gg],encapsulation:2,changeDetection:0})}return m})(),w=(()=>{class m{static \u0275fac=function(C){return new(C||m)};static \u0275mod=t.$C({type:m});static \u0275inj=t.G2t({imports:[j,T.Gg,T.Gg]})}return m})()}}]);