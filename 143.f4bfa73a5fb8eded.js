"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[143],{143:(D,F,a)=>{a.r(F),a.d(F,{PermissionsComponent:()=>Me});var x=a(1141),l=a(6221),R=a(4299),k=a(6348),w=a(8150),P=a(2242),E=a(491),$=a(6150),C=a(935),T=a(4827),G=a(5144),j=a(8542),d=a(1570),b=a(1631),_=a(6296),o=a(7983),y=a(7697),g=a(2881),h=a(9417),m=a(5779),v=a(7722),S=a(4799),e=a(1360),N=a(1593),B=a(63),A=a(7164),L=a(7673),X=a(7468),O=a(6354),U=a(9437);const z=()=>({width:"90vw",maxWidth:"900px"}),J=()=>({"min-width":"100%"});function W(n,p){if(1&n&&(e.j41(0,"p",11),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.JRh(t.permission.kid)}}function H(n,p){if(1&n&&(e.j41(0,"div",6)(1,"div",7),e.nrm(2,"i",8),e.k0s(),e.j41(3,"div")(4,"h2",9),e.EFF(5),e.k0s(),e.DNE(6,W,2,1,"p",10),e.k0s()()),2&n){const t=e.XpG();e.R7$(5),e.JRh(t.title),e.R7$(),e.Y8G("ngIf",t.permission.kid)}}function K(n,p){1&n&&(e.j41(0,"div",12),e.nrm(1,"i",13),e.k0s())}function Q(n,p){if(1&n&&(e.j41(0,"div")(1,"label",22),e.EFF(2,"Description"),e.k0s(),e.j41(3,"p",28),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.JRh(t.permission.description)}}function Z(n,p){1&n&&(e.j41(0,"th"),e.EFF(1,"Location"),e.k0s())}function q(n,p){1&n&&(e.j41(0,"th"),e.EFF(1,"Sensitivity"),e.k0s())}function ee(n,p){1&n&&(e.j41(0,"th"),e.EFF(1,"Source"),e.k0s())}function te(n,p){1&n&&(e.j41(0,"th"),e.EFF(1,"Status"),e.k0s())}function ie(n,p){if(1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Asset Name"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Type"),e.k0s(),e.DNE(5,Z,2,0,"th",25)(6,q,2,0,"th",25)(7,ee,2,0,"th",25)(8,te,2,0,"th",25),e.k0s()),2&n){const t=e.XpG(3);e.R7$(5),e.Y8G("ngIf",t.showLocationColumn),e.R7$(),e.Y8G("ngIf",t.showSensitivityColumn),e.R7$(),e.Y8G("ngIf",t.showSourceColumn),e.R7$(),e.Y8G("ngIf",t.showStatusColumn)}}function se(n,p){if(1&n&&(e.j41(0,"div",40),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.kid)}}function ne(n,p){if(1&n&&(e.j41(0,"td")(1,"code",41),e.EFF(2),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.location||"N/A")}}function oe(n,p){if(1&n&&(e.j41(0,"td"),e.nrm(1,"p-tag",39),e.k0s()),2&n){const t=e.XpG().$implicit,s=e.XpG(3);e.R7$(),e.Y8G("value",t.sensitivity)("severity",s.getSensitivitySeverity(t.sensitivity))}}function le(n,p){if(1&n&&(e.j41(0,"td")(1,"span",27),e.EFF(2),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.source||"N/A")}}function re(n,p){if(1&n&&(e.j41(0,"td"),e.nrm(1,"p-tag",39),e.k0s()),2&n){const t=e.XpG().$implicit,s=e.XpG(3);e.R7$(),e.Y8G("value",t.status)("severity",s.getStatusSeverity(t.status))}}function ae(n,p){if(1&n&&(e.j41(0,"tr")(1,"td")(2,"div",37),e.EFF(3),e.k0s(),e.DNE(4,se,2,1,"div",38),e.k0s(),e.j41(5,"td"),e.nrm(6,"p-tag",39),e.k0s(),e.DNE(7,ne,3,1,"td",25)(8,oe,2,2,"td",25)(9,le,3,1,"td",25)(10,re,2,2,"td",25),e.k0s()),2&n){const t=p.$implicit,s=e.XpG(3);e.R7$(3),e.JRh(t.name||"N/A"),e.R7$(),e.Y8G("ngIf",t.kid),e.R7$(2),e.Y8G("value",t.type)("severity",s.getAssetTypeSeverity(t.type)),e.R7$(),e.Y8G("ngIf",s.showLocationColumn),e.R7$(),e.Y8G("ngIf",s.showSensitivityColumn),e.R7$(),e.Y8G("ngIf",s.showSourceColumn),e.R7$(),e.Y8G("ngIf",s.showStatusColumn)}}function ce(n,p){1&n&&(e.j41(0,"tr")(1,"td",42),e.EFF(2," No assets associated with this permission "),e.k0s()())}function de(n,p){if(1&n&&(e.j41(0,"div")(1,"div",29)(2,"h3",30),e.EFF(3,"Associated Assets"),e.k0s(),e.nrm(4,"p-tag",31),e.k0s(),e.j41(5,"div",32)(6,"p-table",33),e.DNE(7,ie,9,4,"ng-template",34)(8,ae,11,8,"ng-template",35)(9,ce,3,0,"ng-template",36),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(4),e.Y8G("value",t.permission.assets.length+" assets"),e.R7$(2),e.Y8G("value",t.permission.assets)("tableStyle",e.lJ4(3,J))}}function pe(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"div",16)(3,"div")(4,"label",17),e.EFF(5,"Permission Name"),e.k0s(),e.j41(6,"p",18),e.EFF(7),e.k0s()(),e.j41(8,"div")(9,"label",17),e.EFF(10,"Code"),e.k0s(),e.j41(11,"div",19)(12,"code",20),e.EFF(13),e.k0s(),e.j41(14,"p-button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.copyToClipboard(i.permission.code))}),e.k0s()()()()(),e.j41(15,"div",16)(16,"div")(17,"label",22),e.EFF(18,"Action"),e.k0s(),e.nrm(19,"p-tag",23),e.k0s(),e.j41(20,"div")(21,"label",22),e.EFF(22,"Total Assets"),e.k0s(),e.nrm(23,"p-tag",24),e.k0s()(),e.DNE(24,Q,5,1,"div",25),e.nrm(25,"p-divider"),e.DNE(26,de,10,4,"div",25),e.j41(27,"div",26)(28,"div")(29,"label",17),e.EFF(30,"Created At"),e.k0s(),e.j41(31,"p",27),e.EFF(32),e.nI1(33,"date"),e.k0s()(),e.j41(34,"div")(35,"label",17),e.EFF(36,"Updated At"),e.k0s(),e.j41(37,"p",27),e.EFF(38),e.nI1(39,"date"),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(7),e.JRh(t.permission.name||"N/A"),e.R7$(6),e.JRh(t.permission.code),e.R7$(),e.Y8G("text",!0)("rounded",!0),e.R7$(5),e.Y8G("value",t.permission.action)("severity",t.getActionSeverity(t.permission.action)),e.R7$(4),e.Y8G("value",(t.permission.asset_total||0).toString()),e.R7$(),e.Y8G("ngIf",t.permission.description),e.R7$(2),e.Y8G("ngIf",t.permission.assets&&t.permission.assets.length>0),e.R7$(6),e.JRh(e.i5U(33,11,t.permission.created_at,"medium")),e.R7$(6),e.JRh(e.i5U(39,14,t.permission.updated_at,"medium"))}}function me(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",43)(1,"p-floatlabel",44)(2,"input",45),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.permission.name,i)||(r.permission.name=i),e.Njj(i)}),e.k0s(),e.j41(3,"label",46),e.EFF(4,"Name *"),e.k0s()(),e.j41(5,"p-floatlabel",44)(6,"input",47),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.permission.code,i)||(r.permission.code=i),e.Njj(i)}),e.k0s(),e.j41(7,"label",48),e.EFF(8,"Code *"),e.k0s()(),e.j41(9,"p-floatlabel",44)(10,"p-dropdown",49),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.permission.action,i)||(r.permission.action=i),e.Njj(i)}),e.k0s(),e.j41(11,"label",50),e.EFF(12,"Action"),e.k0s()(),e.j41(13,"p-floatlabel",51)(14,"textarea",52),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.permission.description,i)||(r.permission.description=i),e.Njj(i)}),e.EFF(15,"      "),e.k0s(),e.j41(16,"label",53),e.EFF(17,"Description"),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(2),e.R50("ngModel",t.permission.name),e.Y8G("disabled",t.loading),e.R7$(4),e.R50("ngModel",t.permission.code),e.Y8G("disabled",t.loading),e.R7$(4),e.Y8G("options",t.actionOptions),e.R50("ngModel",t.permission.action),e.Y8G("disabled",t.loading),e.R7$(4),e.R50("ngModel",t.permission.description),e.Y8G("disabled",t.loading)}}function ue(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",19)(1,"p-button",59),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.switchToEditMode())}),e.k0s(),e.j41(2,"p-button",60),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.delete())}),e.k0s()()}2&n&&(e.R7$(),e.Y8G("outlined",!0),e.R7$(),e.Y8G("outlined",!0))}function ge(n,p){if(1&n){const t=e.RV6();e.j41(0,"p-button",60),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.delete())}),e.k0s()}2&n&&e.Y8G("outlined",!0)}function he(n,p){if(1&n&&(e.j41(0,"div",61),e.DNE(1,ge,1,1,"p-button",62),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.isEditMode&&!t.isViewMode)}}function fe(n,p){if(1&n){const t=e.RV6();e.j41(0,"p-button",63),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.save())}),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("label",t.isEditMode?"Update":"Create")("outlined",!0)("loading",t.loading)}}function _e(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",54),e.DNE(1,ue,3,2,"div",55)(2,he,2,1,"div",56),e.j41(3,"div",19)(4,"p-button",57),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.visible=!1)}),e.k0s(),e.DNE(5,fe,1,3,"p-button",58),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.isViewMode),e.R7$(),e.Y8G("ngIf",!t.isViewMode),e.R7$(2),e.Y8G("text",!0)("disabled",t.loading),e.R7$(),e.Y8G("ngIf",!t.isViewMode)}}let ve=(()=>{class n extends k.q{injector;governanceServices;messageService;onSave=new e.bkB;permission={};title="Create Permission";visible=!1;loading=!1;isEditMode=!1;isViewMode=!1;actionOptions=[{label:"Access",value:"access"},{label:"Create",value:"create"},{label:"Read",value:"read"},{label:"Update",value:"update"},{label:"Delete",value:"delete"},{label:"Manage",value:"manage"},{label:"All (*)",value:"*"}];constructor(t,s,i){super(t),this.injector=t,this.governanceServices=s,this.messageService=i}save(){if(!this.validateForm())return;this.loading=!0;const t=this.permission.kid||this.permission._id||this.permission.id;(t?this.governanceServices.updatePermission(t,this.permission):this.governanceServices.createPermission(this.permission)).subscribe({next:i=>{i&&(this.showSuccess(t?"Updated successfully":"Created successfully"),this.visible=!1,this.permission={},this.loading=!1,this.onSave.emit())},error:i=>{console.error("Error saving permission:",i),this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${t?"update":"create"} permission`}),this.loading=!1}})}show(t){this.visible=!0,this.permission={},this.isEditMode=!1,this.isViewMode=!1,t?(this.title="Edit Permission",this.isEditMode=!0,this.loadPermission(t)):this.title="Create Permission"}view(t){this.visible=!0,this.isViewMode=!0,this.isEditMode=!0,this.title="Permission Details",this.loadPermission(t.kid||t._id||t.id)}edit(t){this.visible=!0,this.isEditMode=!0,this.isViewMode=!1,this.title="Edit Permission",this.loadPermission(t.kid||t._id||t.id)}loadPermission(t){this.loading=!0,console.log("Loading permission with ID:",t),this.governanceServices.getPermission(t).subscribe({next:s=>{if(console.log("Permission API response:",s),s){if(s.data){console.log("Using res.data:",s.data),this.permission=s.data;try{Array.isArray(this.permission.assets_with_names)&&this.permission.assets_with_names.length?this.permission.assets=this.permission.assets_with_names.map(i=>({kid:i.kid||null,name:i.name||i.kid||"N/A",type:i.type||"",location:i.location||"",sensitivity:i.sensitivity||"",source:i.source||"",status:i.status||""})):Array.isArray(this.permission.assets)&&this.permission.assets.length&&"string"==typeof this.permission.assets[0]?this.permission.assets=this.permission.assets.map(i=>({kid:i,name:i,type:"",location:"",sensitivity:"",source:"",status:""})):Array.isArray(this.permission.assets)||(this.permission.assets=[])}catch(i){console.warn("Failed to normalize permission assets:",i),this.permission.assets=this.permission.assets||[]}this.updateAssetColumnVisibility(),this.enrichAssetsWithNamesIfNeeded()}else console.log("Using res directly:",s),this.permission=s;console.log("Final permission object:",this.permission),this.loading=!1}else console.warn("Empty response from API")},error:s=>{console.error("Error loading permission:",s),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load permission details"}),this.loading=!1,this.visible=!1}})}enrichAssetsWithNamesIfNeeded(){try{const t=Array.isArray(this.permission?.assets)?this.permission.assets:[],s=new Set;if((this.permission.assets||[]).forEach(c=>{c&&("string"==typeof c?s.add(c):c.kid?s.add(c.kid):c._id&&s.add(c._id))}),(this.permission.asset_details||[]).forEach(c=>{c&&("string"==typeof c?s.add(c):c.kid?s.add(c.kid):c._id&&s.add(c._id))}),(this.permission.resources||[]).forEach(c=>{c&&"string"==typeof c&&s.add(c)}),!s.size||0!==t.length&&!t.some(c=>!c||!c.name||c.name===c.kid))return;const r=Array.from(s).map(c=>this.governanceServices.getAsset(c).pipe((0,O.T)(f=>f?.data||null),(0,U.W)(f=>(console.warn("Failed to fetch asset",c,f),(0,L.of)(null)))));(0,X.p)(r).subscribe(c=>{const f=(c||[]).filter(u=>u);if(!f.length)return;const M=[];f.forEach(u=>{M.push({kid:u.kid||u._id||u.id||u.kid||null,name:u.name||u.title||u.kid||u._id||"N/A",type:u.type||u.category||"",location:u.location||u.store||"",sensitivity:u.sensitivity||u.classification||"",source:u.source||"",status:u.status||""})});const V=new Map;(this.permission.assets||[]).forEach(u=>{const I=u?.kid||u?._id||u?.id||u?.name;I&&V.set(I,u)}),M.forEach(u=>{const I=u.kid||u.name,Y=V.get(I);Y?(this.permission.assets.push(Object.assign({},Y,u)),V.delete(I)):this.permission.assets.push(u)}),(!Array.isArray(this.permission.assets)||0===this.permission.assets.length)&&(this.permission.assets=M),this.updateAssetColumnVisibility()})}catch(t){console.warn("enrichAssetsWithNamesIfNeeded failed",t)}}delete(){const t=this.permission.kid||this.permission._id||this.permission.id;t?this.confirmOnDelete(new Event("click"),this.governanceServices.deletePermission(t),()=>{this.onSave.emit(),this.visible=!1}):this.messageService.add({severity:"error",summary:"Error",detail:"Permission ID not found"})}switchToEditMode(){this.isViewMode=!1,this.title="Edit Permission"}validateForm(){return this.permission.code?.trim()?!!this.permission.name?.trim()||(this.messageService.add({severity:"warn",summary:"Validation Error",detail:"Permission name is required"}),!1):(this.messageService.add({severity:"warn",summary:"Validation Error",detail:"Permission code is required"}),!1)}getActionSeverity(t){switch(t?.toLowerCase()){case"access":case"read":return"info";case"write":case"update":case"create":return"success";case"delete":case"*":return"danger";case"manage":return"warning";default:return"secondary"}}getAssetTypeSeverity(t){switch(t?.toLowerCase()){case"route":return"info";case"api":return"success";case"resource":return"warning";case"data":return"primary";default:return"secondary"}}showLocationColumn=!1;showSensitivityColumn=!1;showSourceColumn=!1;showStatusColumn=!1;updateAssetColumnVisibility(){try{const t=Array.isArray(this.permission?.assets)?this.permission.assets:[];this.showLocationColumn=t.some(s=>!(!s||!s.location)),this.showSensitivityColumn=t.some(s=>!(!s||!s.sensitivity)),this.showSourceColumn=t.some(s=>!(!s||!s.source)),this.showStatusColumn=t.some(s=>!(!s||!s.status))}catch{this.showLocationColumn=!1,this.showSensitivityColumn=!1,this.showSourceColumn=!1,this.showStatusColumn=!1}}getSensitivitySeverity(t){switch(t?.toLowerCase()){case"high":return"danger";case"medium":return"warning";case"low":return"success";default:return"secondary"}}getStatusSeverity(t){switch(t?.toLowerCase()){case"active":return"success";case"inactive":return"warning";case"disabled":return"danger";default:return"secondary"}}copyToClipboard(t){navigator.clipboard.writeText(t).then(()=>{this.messageService.add({severity:"success",summary:"Copied",detail:"Text copied to clipboard"})})}static \u0275fac=function(s){return new(s||n)(e.rXU(e.zZn),e.rXU(R.N),e.rXU(m.bg))};static \u0275cmp=e.VBU({type:n,selectors:[["app-permission"]],outputs:{onSave:"onSave"},features:[e.Jv_([m.bg]),e.Vt3],decls:9,vars:10,consts:[["header",""],["footer",""],[3,"visibleChange","visible","modal","draggable","resizable"],["class","flex items-center justify-center p-8",4,"ngIf"],["class","space-y-6",4,"ngIf"],["class","grid grid-flow-row grid-cols-2 gap-4 mt-3",4,"ngIf"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","bg-gradient-to-br","from-orange-500","to-red-600","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-key","text-white"],[1,"text-xl","font-bold","text-gray-900"],["class","text-sm text-gray-500",4,"ngIf"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","justify-center","p-8"],[1,"pi","pi-spin","pi-spinner","text-blue-500","text-2xl"],[1,"space-y-6"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"text-gray-900","font-medium"],[1,"flex","items-center","gap-2"],[1,"text-sm","bg-gray-800","text-gray-100","px-3","py-1","rounded"],["icon","pi pi-copy","size","small","pTooltip","Copy Code",3,"click","text","rounded"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["styleClass","text-base px-4 py-2",3,"value","severity"],["severity","info","icon","pi pi-database","styleClass","text-base px-4 py-2",3,"value"],[4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","pt-4","border-t","border-gray-200"],[1,"text-sm","text-gray-600"],[1,"text-gray-600","bg-gray-50","p-3","rounded-lg"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900"],["severity","info",3,"value"],[1,"border","border-gray-200","rounded-lg","overflow-hidden"],["styleClass","p-datatable-sm",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"font-medium","text-gray-900"],["class","text-xs text-gray-500",4,"ngIf"],[3,"value","severity"],[1,"text-xs","text-gray-500"],[1,"text-xs","bg-gray-100","px-2","py-1","rounded","text-gray-700"],["colspan","6",1,"text-center","p-4","text-gray-500"],[1,"grid","grid-flow-row","grid-cols-2","gap-4","mt-3"],["variant","on"],["pInputText","","id","name","autocomplete","off",1,"w-full",3,"ngModelChange","ngModel","disabled"],["for","name"],["pInputText","","id","code","autocomplete","off",1,"w-full",3,"ngModelChange","ngModel","disabled"],["for","code"],["id","action","optionLabel","label","optionValue","value","placeholder","Select action","styleClass","w-full",3,"ngModelChange","options","ngModel","disabled"],["for","action"],["variant","on",1,"col-span-2"],["pTextarea","","id","description","rows","3","cols","30",1,"w-full","h-full",2,"resize","none",3,"ngModelChange","ngModel","disabled"],["for","description"],[1,"flex","items-center","justify-between","gap-3"],["class","flex items-center gap-2",4,"ngIf"],["class","flex-1",4,"ngIf"],["label","Close","severity","secondary",3,"click","text","disabled"],["severity","primary",3,"label","outlined","loading","click",4,"ngIf"],["label","Edit","icon","pi pi-pencil","severity","primary",3,"click","outlined"],["label","Delete","icon","pi pi-trash","severity","danger",3,"click","outlined"],[1,"flex-1"],["label","Delete","icon","pi pi-trash","severity","danger",3,"outlined","click",4,"ngIf"],["severity","primary",3,"click","label","outlined","loading"]],template:function(s,i){if(1&s){const r=e.RV6();e.nrm(0,"p-toast"),e.j41(1,"p-dialog",2),e.mxI("visibleChange",function(f){return e.eBV(r),e.DH7(i.visible,f)||(i.visible=f),e.Njj(f)}),e.DNE(2,H,7,2,"ng-template",null,0,e.C5r)(4,K,2,0,"div",3)(5,pe,40,17,"div",4)(6,me,18,9,"div",5)(7,_e,6,5,"ng-template",null,1,e.C5r),e.k0s()}2&s&&(e.R7$(),e.Aen(e.lJ4(9,z)),e.R50("visible",i.visible),e.Y8G("modal",!0)("draggable",!1)("resizable",!1),e.R7$(3),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading&&i.isViewMode),e.R7$(),e.Y8G("ngIf",!i.loading&&!i.isViewMode))},dependencies:[g.MD,g.bT,g.vh,h.YN,h.me,h.BC,h.vS,d.lG,N.VS,P.Sm,B.TM,x.$n,C.vw,l.bG,l.XI,m.Ei,j.Ss,j.m_,A.mN,A.cG,w.kr,w.ms,v.MB,v.y8],encapsulation:2})}return n})();const be=["permissionDetail"],ye=()=>[];function we(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",2)(1,"div",48)(2,"div",49)(3,"label",50),e.EFF(4,"Search"),e.k0s(),e.j41(5,"span",51),e.nrm(6,"i",52),e.j41(7,"input",53),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.searchTerm,i)||(r.searchTerm=i),e.Njj(i)}),e.bIt("input",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSearch())}),e.k0s()()(),e.j41(8,"div",49)(9,"label",54),e.EFF(10,"Resource"),e.k0s(),e.j41(11,"p-dropdown",55),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.selectedResource,i)||(r.selectedResource=i),e.Njj(i)}),e.bIt("onChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onFilterChange())}),e.k0s()(),e.j41(12,"div",49)(13,"label",56),e.EFF(14,"Action"),e.k0s(),e.j41(15,"p-dropdown",57),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.selectedAction,i)||(r.selectedAction=i),e.Njj(i)}),e.bIt("onChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onFilterChange())}),e.k0s()(),e.j41(16,"div",49)(17,"label",58),e.EFF(18,"Scope"),e.k0s(),e.j41(19,"p-dropdown",59),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.selectedScope,i)||(r.selectedScope=i),e.Njj(i)}),e.bIt("onChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onFilterChange())}),e.k0s()()(),e.j41(20,"div",60)(21,"p-button",61),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyFilters())}),e.k0s(),e.j41(22,"p-button",62),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.clearFilters())}),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(7),e.R50("ngModel",t.searchTerm),e.R7$(4),e.Y8G("options",t.resourceOptions),e.R50("ngModel",t.selectedResource),e.Y8G("showClear",!0),e.R7$(4),e.Y8G("options",t.actionOptions),e.R50("ngModel",t.selectedAction),e.Y8G("showClear",!0),e.R7$(4),e.Y8G("options",t.scopeOptions),e.R50("ngModel",t.selectedScope),e.Y8G("showClear",!0),e.R7$(3),e.Y8G("outlined",!0)}}function xe(n,p){if(1&n&&e.nrm(0,"p-tag",63),2&n){const t=e.XpG();e.Y8G("value",((null==t.permissions||null==t.permissions.data?null:t.permissions.data.length)||0)+" items")}}function ke(n,p){1&n&&(e.j41(0,"div",64)(1,"div",65),e.nrm(2,"i",66),e.j41(3,"p",67),e.EFF(4,"Loading permissions..."),e.k0s()()())}function Ce(n,p){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Permission"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Code"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Action"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Description"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Assets"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Status"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Actions"),e.k0s()())}function je(n,p){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div",36)(3,"div",73),e.nrm(4,"i",74),e.k0s(),e.j41(5,"div")(6,"div",75),e.EFF(7),e.k0s(),e.j41(8,"div",76),e.EFF(9),e.k0s()()()(),e.j41(10,"td")(11,"code",77),e.EFF(12),e.k0s()(),e.j41(13,"td"),e.nrm(14,"p-tag",78),e.k0s(),e.j41(15,"td")(16,"span",79),e.EFF(17),e.k0s()(),e.j41(18,"td")(19,"div",39),e.nrm(20,"p-tag",80),e.j41(21,"span",81),e.EFF(22,"assets"),e.k0s()()(),e.j41(23,"td"),e.nrm(24,"p-tag",78),e.k0s(),e.j41(25,"td")(26,"div",39)(27,"p-button",82),e.bIt("click",function(){const i=e.eBV(t).$implicit;e.XpG(2);const r=e.sdS(76);return e.Njj(r.view(i))}),e.k0s(),e.j41(28,"p-button",83),e.bIt("click",function(){const i=e.eBV(t).$implicit;e.XpG(2);const r=e.sdS(76);return e.Njj(r.edit(i))}),e.k0s(),e.j41(29,"p-button",84),e.bIt("click",function(i){const r=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.onDeletePermission(i,r.kid||r.id))}),e.k0s()()()()}if(2&n){const t=p.$implicit,s=e.XpG(2);e.R7$(3),e.Y8G("ngClass",s.getPermissionColor(t.action)),e.R7$(),e.Y8G("ngClass",s.getPermissionIcon(t.action)),e.R7$(3),e.JRh(t.name||"Unnamed Permission"),e.R7$(2),e.JRh(t.kid||t.id),e.R7$(3),e.JRh(t.code),e.R7$(2),e.Y8G("value",t.action)("severity",s.getActionSeverity(t.action)),e.R7$(3),e.JRh(t.description||"No description"),e.R7$(3),e.Y8G("value",t.asset_total||0),e.R7$(4),e.Y8G("value",s.getPermissionStatus(t))("severity",s.getPermissionStatusSeverity(t)),e.R7$(3),e.Y8G("rounded",!0)("text",!0),e.R7$(),e.Y8G("rounded",!0)("text",!0),e.R7$(),e.Y8G("rounded",!0)("text",!0)}}function Pe(n,p){1&n&&(e.j41(0,"tr")(1,"td",85)(2,"div",65),e.nrm(3,"i",86),e.j41(4,"div")(5,"h3",87),e.EFF(6,"No permissions found"),e.k0s(),e.j41(7,"p",67),e.EFF(8,"Create your first permission to get started."),e.k0s()()()()())}function Fe(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",68)(1,"p-table",69),e.bIt("onLazyLoad",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.loadPermissions(i))}),e.DNE(2,Ce,15,0,"ng-template",70)(3,je,30,17,"ng-template",71)(4,Pe,9,0,"ng-template",72),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("value",(null==t.permissions?null:t.permissions.data)||e.lJ4(6,ye))("loading",t.isTableLoading)("paginator",!0)("rows",t.tableRowsPerPage)("totalRecords",(null==t.permissions?null:t.permissions.total)||0)("lazy",!0)}}function Re(n,p){if(1&n&&(e.j41(0,"div",39),e.nrm(1,"i",105),e.j41(2,"span",79),e.EFF(3),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(3),e.SpI("",t.asset_total," assets")}}function Ee(n,p){if(1&n&&(e.j41(0,"div")(1,"p",79),e.EFF(2),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.description)}}function $e(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",93)(1,"div",94)(2,"div",36)(3,"div",95),e.nrm(4,"i",74),e.k0s(),e.j41(5,"div")(6,"h3",96),e.EFF(7),e.k0s(),e.j41(8,"code",77),e.EFF(9),e.k0s()()(),e.nrm(10,"p-tag",78),e.k0s(),e.j41(11,"div",97)(12,"div",39),e.nrm(13,"i",98)(14,"p-tag",78),e.k0s(),e.DNE(15,Re,4,1,"div",99)(16,Ee,3,1,"div",100),e.k0s(),e.j41(17,"div",101)(18,"p-button",102),e.bIt("click",function(){const i=e.eBV(t).$implicit;e.XpG(3);const r=e.sdS(76);return e.Njj(r.view(i))}),e.k0s(),e.j41(19,"p-button",103),e.bIt("click",function(){const i=e.eBV(t).$implicit;e.XpG(3);const r=e.sdS(76);return e.Njj(r.edit(i))}),e.k0s(),e.j41(20,"p-button",104),e.bIt("click",function(i){const r=e.eBV(t).$implicit,c=e.XpG(3);return e.Njj(c.onDeletePermission(i,r.kid||r.id))}),e.k0s()()()}if(2&n){const t=p.$implicit,s=e.XpG(3);e.R7$(3),e.Y8G("ngClass",s.getPermissionColor(t.action)),e.R7$(),e.Y8G("ngClass",s.getPermissionIcon(t.action)),e.R7$(3),e.JRh(t.name||"Unnamed Permission"),e.R7$(2),e.JRh(t.code),e.R7$(),e.Y8G("value",s.getPermissionStatus(t))("severity",s.getPermissionStatusSeverity(t)),e.R7$(4),e.Y8G("value",t.action)("severity",s.getActionSeverity(t.action)),e.R7$(),e.Y8G("ngIf",t.asset_total),e.R7$(),e.Y8G("ngIf",t.description),e.R7$(2),e.Y8G("text",!0),e.R7$(),e.Y8G("text",!0),e.R7$(),e.Y8G("text",!0)}}function Te(n,p){if(1&n&&(e.j41(0,"div",91),e.DNE(1,$e,21,13,"div",92),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",null==t.permissions?null:t.permissions.data)}}function Ge(n,p){1&n&&(e.j41(0,"div",106)(1,"div",65),e.nrm(2,"i",86),e.j41(3,"div")(4,"h3",87),e.EFF(5,"No permissions found"),e.k0s(),e.j41(6,"p",67),e.EFF(7,"Create your first permission to get started."),e.k0s()()()())}function Se(n,p){if(1&n&&(e.j41(0,"div",88),e.DNE(1,Te,2,1,"div",89)(2,Ge,8,0,"div",90),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",(null==t.permissions||null==t.permissions.data?null:t.permissions.data.length)>0),e.R7$(),e.Y8G("ngIf",0===(null==t.permissions||null==t.permissions.data?null:t.permissions.data.length))}}function Ie(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",107)(1,"div",108),e.nrm(2,"i",109),e.k0s(),e.j41(3,"h3",110),e.EFF(4,"No permissions found"),e.k0s(),e.j41(5,"p",111),e.EFF(6,"Create your first permission to define access controls for your system resources."),e.k0s(),e.j41(7,"p-button",112),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleCreateDialog())}),e.k0s()()}}let Me=(()=>{class n extends k.q{injector;governanceServices;messageService;permissionDetail;permissions={data:[],total:0};loading=!1;viewMode="list";stats={totalPermissions:0,activePermissions:0,systemPermissions:0,customPermissions:0};resourceOptions=[{label:"All Resources",value:null},{label:"Users",value:"users"},{label:"Data Products",value:"data-products"},{label:"Governance",value:"governance"},{label:"Settings",value:"settings"}];actionOptions=[{label:"All Actions",value:null},{label:"Create",value:"create"},{label:"Read",value:"read"},{label:"Update",value:"update"},{label:"Delete",value:"delete"}];scopeOptions=[{label:"All Scopes",value:null},{label:"Global",value:"global"},{label:"Organization",value:"organization"},{label:"Team",value:"team"},{label:"Personal",value:"personal"}];searchTerm="";selectedResource=null;selectedAction=null;selectedScope=null;showFilters=!1;constructor(t,s,i){super(t),this.injector=t,this.governanceServices=s,this.messageService=i}ngOnInit(){console.log("Permissions component initialized"),this.permissions={data:[],total:0},this.getPermissions()}getPermissions=(t=0)=>{this.isTableLoading=!0,this.loading=!0,this.governanceServices.getPermissions({offset:t*this.tableRowsPerPage,size:this.tableRowsPerPage}).subscribe({next:s=>{this.permissions=s,this.updateStats(),this.isTableLoading=!1,this.loading=!1},error:s=>{console.error("Error loading permissions:",s),this.permissions={data:[],total:0},this.isTableLoading=!1,this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load permissions"})}})};updateStats(){if(this.permissions?.data&&Array.isArray(this.permissions.data)){const t=this.permissions.data;this.stats.totalPermissions=this.permissions.total||t.length,this.stats.activePermissions=t.filter(s=>"disabled"!==s.action).length,this.stats.systemPermissions=t.filter(s=>s.code?.startsWith("admin:")||s.code?.startsWith("system:")).length,this.stats.customPermissions=t.filter(s=>!s.code?.startsWith("admin:")&&!s.code?.startsWith("system:")).length}else console.warn("Permissions data is not an array:",this.permissions),this.stats={totalPermissions:0,activePermissions:0,systemPermissions:0,customPermissions:0}}loadStats(){this.updateStats()}onDeletePermission(t,s){this.confirmOnDelete(t,this.governanceServices.deletePermission(s),this.getPermissions)}toggleFilters(){this.showFilters=!this.showFilters}applyFilters(){console.log("Applying filters:",{searchTerm:this.searchTerm,selectedResource:this.selectedResource,selectedAction:this.selectedAction,selectedScope:this.selectedScope}),this.getPermissions(0)}clearFilters(){this.searchTerm="",this.selectedResource=null,this.selectedAction=null,this.selectedScope=null,this.getPermissions(0),this.messageService.add({severity:"info",summary:"Filters Cleared",detail:"All filters have been cleared"})}toggleCreateDialog(){}getPermissionScopeSeverity(t){switch(t){case"global":return"danger";case"organization":return"warning";case"team":return"info";case"personal":return"success";default:return"secondary"}}getPermissionActionSeverity(t){switch(t){case"delete":return"danger";case"update":return"warning";case"create":return"info";case"read":return"success";default:return"secondary"}}getRoleCount(t){return t?.roleCount||0}getUserCount(t){return t?.userCount||0}setViewMode(t){this.viewMode=t}toggleViewMode(){this.viewMode="list"===this.viewMode?"card":"list"}onSearch(){this.applyFilters()}onFilterChange(){}refreshPermissions(){this.getPermissions(0)}loadPermissions(t){this.getPermissions(t.first/t.rows)}viewPermission(t){console.log("View permission:",t)}editPermission(t){console.log("Edit permission:",t)}getPermissionColor(t){switch(t?.toLowerCase()){case"read":return"from-blue-500 to-blue-600";case"write":return"from-green-500 to-green-600";case"delete":return"from-red-500 to-red-600";case"manage":return"from-purple-500 to-purple-600";case"create":return"from-yellow-500 to-yellow-600";case"*":return"from-gray-800 to-gray-900";default:return"from-gray-500 to-gray-600"}}getPermissionIcon(t){switch(t?.toLowerCase()){case"read":return"pi pi-eye";case"write":return"pi pi-pencil";case"delete":return"pi pi-trash";case"manage":return"pi pi-cog";case"create":return"pi pi-plus";case"*":return"pi pi-crown";default:return"pi pi-shield"}}getActionSeverity(t){switch(t?.toLowerCase()){case"read":return"info";case"write":case"create":return"success";case"delete":case"*":return"danger";case"manage":return"warning";default:return"secondary"}}getPermissionStatus(t){return"*"===t.action?"System":t.code?.startsWith("admin:")?"Admin":"Active"}getPermissionStatusSeverity(t){switch(this.getPermissionStatus(t)){case"System":return"danger";case"Admin":return"warning";case"Active":return"success";default:return"secondary"}}testPermissionsAPI(){console.log("Testing permissions API..."),this.governanceServices.getPermissions({size:5,offset:0}).subscribe({next:t=>{console.log("Raw API response:",t),console.log("Response type:",typeof t),console.log("Response.data type:",typeof t?.data),console.log("Is data array?:",Array.isArray(t?.data)),console.log("Data content:",t?.data),this.messageService.add({severity:"info",summary:"API Test",detail:"Check console for API response details"})},error:t=>{console.error("API test error:",t),this.messageService.add({severity:"error",summary:"API Test Failed",detail:t.message||"Unknown error"})}})}static \u0275fac=function(s){return new(s||n)(e.rXU(e.zZn),e.rXU(R.N),e.rXU(m.bg))};static \u0275cmp=e.VBU({type:n,selectors:[["app-permissions"]],viewQuery:function(s,i){if(1&s&&e.GBs(be,5),2&s){let r;e.mGM(r=e.lsd())&&(i.permissionDetail=r.first)}},features:[e.Jv_([m.bg]),e.Vt3],decls:77,vars:29,consts:[["permissionDetail",""],[1,"bg-gray-50","min-h-screen","p-6"],[1,"bg-white","rounded-lg","shadow-sm","p-6","mb-6"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-gradient-to-br","from-orange-500","to-red-600","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-key","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"flex","flex-wrap","items-center","gap-2","sm:gap-3"],["icon","pi pi-refresh","severity","info","pTooltip","Refresh Data",1,"hidden","sm:inline-flex",3,"click","outlined","rounded"],["icon","pi pi-trash","severity","warning","pTooltip","Clear Cache",1,"hidden","sm:inline-flex",3,"outlined","rounded"],["icon","pi pi-download","severity","secondary","pTooltip","Export Permissions",1,"hidden","sm:inline-flex",3,"outlined","rounded"],["icon","pi pi-filter","severity","secondary","pTooltip","Toggle Filters",1,"hidden","sm:inline-flex",3,"click","outlined","rounded"],["icon","pi pi-list","severity","secondary","pTooltip","List View",1,"hidden","sm:inline-flex",3,"click","outlined","rounded"],["icon","pi pi-th-large","severity","secondary","pTooltip","Card View",1,"hidden","sm:inline-flex",3,"click","outlined","rounded"],["label","Add Permission","icon","pi pi-plus","severity","primary","size","small",1,"sm:hidden",3,"click"],["icon","pi pi-plus","severity","primary","pTooltip","Add Permission",1,"hidden","sm:inline-flex",3,"click","rounded"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","p-6"],[1,"text-sm","font-medium","text-gray-600"],[1,"text-2xl","font-bold","text-gray-900"],[1,"w-12","h-12","bg-orange-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-key","text-orange-600","text-xl"],[1,"text-2xl","font-bold","text-green-600"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-check-circle","text-green-600","text-xl"],[1,"text-2xl","font-bold","text-blue-600"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-cog","text-blue-600","text-xl"],[1,"text-2xl","font-bold","text-purple-600"],[1,"w-12","h-12","bg-purple-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-wrench","text-purple-600","text-xl"],["class","bg-white rounded-lg shadow-sm p-6 mb-6",4,"ngIf"],[1,"bg-white","rounded-xl","border","border-gray-200","overflow-hidden","mb-8"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"flex","items-center","gap-3"],[1,"text-lg","font-semibold","text-gray-900"],["severity","info",3,"value",4,"ngIf"],[1,"flex","items-center","gap-2"],["severity","secondary",3,"click","icon","rounded","text","pTooltip"],["icon","pi pi-refresh","severity","secondary","pTooltip","Refresh",3,"click","rounded","text"],["class","p-8 text-center",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],["class","p-6",4,"ngIf"],[1,"space-y-8"],["class","bg-white rounded-xl border border-gray-200 p-12 text-center",4,"ngIf"],[3,"onSave"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],[1,"flex","flex-col","gap-2"],["for","search",1,"text-sm","font-medium","text-gray-700"],[1,"p-input-icon-left","w-full"],[1,"pi","pi-search"],["type","text","pInputText","","id","search","placeholder","Search permissions...",1,"w-full",3,"ngModelChange","input","ngModel"],["for","resource",1,"text-sm","font-medium","text-gray-700"],["id","resource","optionLabel","label","optionValue","value","placeholder","All Resources",1,"w-full",3,"ngModelChange","onChange","options","ngModel","showClear"],["for","action",1,"text-sm","font-medium","text-gray-700"],["id","action","optionLabel","label","optionValue","value","placeholder","All Actions",1,"w-full",3,"ngModelChange","onChange","options","ngModel","showClear"],["for","scope",1,"text-sm","font-medium","text-gray-700"],["id","scope","optionLabel","label","optionValue","value","placeholder","All Scopes",1,"w-full",3,"ngModelChange","onChange","options","ngModel","showClear"],[1,"flex","items-center","gap-3","mt-4"],["label","Apply","icon","pi pi-check","severity","primary",3,"click"],["label","Clear","icon","pi pi-times","severity","secondary",3,"click","outlined"],["severity","info",3,"value"],[1,"p-8","text-center"],[1,"flex","flex-col","items-center","gap-4"],[1,"pi","pi-spin","pi-spinner","text-blue-500","text-2xl"],[1,"text-gray-500"],[1,"overflow-x-auto"],["responsiveLayout","scroll",3,"onLazyLoad","value","loading","paginator","rows","totalRecords","lazy"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"w-10","h-10","bg-gradient-to-br","rounded-lg","flex","items-center","justify-center",3,"ngClass"],[1,"text-white",3,"ngClass"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"text-sm","bg-gray-100","px-2","py-1","rounded","text-gray-700"],[3,"value","severity"],[1,"text-sm","text-gray-600"],["severity","info","icon","pi pi-database",3,"value"],[1,"text-xs","text-gray-500"],["icon","pi pi-eye","severity","info","size","small","pTooltip","View Permission",3,"click","rounded","text"],["icon","pi pi-pencil","severity","secondary","size","small","pTooltip","Edit Permission",3,"click","rounded","text"],["icon","pi pi-trash","severity","danger","size","small","pTooltip","Delete Permission",3,"click","rounded","text"],["colspan","7",1,"text-center","p-8"],[1,"pi","pi-key","text-gray-400","text-4xl"],[1,"text-lg","font-medium","text-gray-900"],[1,"p-6"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],["class","text-center p-8",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",4,"ngFor","ngForOf"],[1,"bg-white","border","border-gray-200","rounded-lg","p-6","hover:shadow-md","transition-shadow"],[1,"flex","items-start","justify-between","mb-4"],[1,"w-12","h-12","bg-gradient-to-br","rounded-lg","flex","items-center","justify-center",3,"ngClass"],[1,"font-semibold","text-gray-900"],[1,"space-y-3","mb-4"],[1,"pi","pi-cog","text-gray-400"],["class","flex items-center gap-2",4,"ngIf"],[4,"ngIf"],[1,"flex","items-center","gap-2","pt-4","border-t","border-gray-200"],["icon","pi pi-eye","severity","info","size","small","pTooltip","View Permission",3,"click","text"],["icon","pi pi-pencil","severity","secondary","size","small","pTooltip","Edit Permission",3,"click","text"],["icon","pi pi-trash","severity","danger","size","small","pTooltip","Delete Permission",3,"click","text"],[1,"pi","pi-database","text-gray-400"],[1,"text-center","p-8"],[1,"bg-white","rounded-xl","border","border-gray-200","p-12","text-center"],[1,"w-16","h-16","bg-orange-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"pi","pi-key","text-orange-500","text-2xl"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],["label","Create First Permission","icon","pi pi-plus","severity","primary",3,"click"]],template:function(s,i){if(1&s){const r=e.RV6();e.nrm(0,"p-toast")(1,"p-confirmDialog"),e.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e.nrm(7,"i",6),e.k0s(),e.j41(8,"div")(9,"h1",7),e.EFF(10,"Permission Management"),e.k0s(),e.j41(11,"p",8),e.EFF(12,"Define granular access rights and control system operations"),e.k0s()()(),e.j41(13,"div",9)(14,"p-button",10),e.bIt("click",function(){return e.eBV(r),e.Njj(i.getPermissions())}),e.k0s(),e.nrm(15,"p-button",11)(16,"p-button",12),e.j41(17,"p-button",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.toggleFilters())}),e.k0s(),e.j41(18,"p-button",14),e.bIt("click",function(){return e.eBV(r),e.Njj(i.setViewMode("list"))}),e.k0s(),e.j41(19,"p-button",15),e.bIt("click",function(){return e.eBV(r),e.Njj(i.setViewMode("card"))}),e.k0s(),e.j41(20,"p-button",16),e.bIt("click",function(){e.eBV(r);const f=e.sdS(76);return e.Njj(f.show())}),e.k0s(),e.j41(21,"p-button",17),e.bIt("click",function(){e.eBV(r);const f=e.sdS(76);return e.Njj(f.show())}),e.k0s()()()(),e.j41(22,"div",18)(23,"div",19)(24,"div",3)(25,"div")(26,"p",20),e.EFF(27,"Total Permissions"),e.k0s(),e.j41(28,"p",21),e.EFF(29),e.k0s()(),e.j41(30,"div",22),e.nrm(31,"i",23),e.k0s()()(),e.j41(32,"div",19)(33,"div",3)(34,"div")(35,"p",20),e.EFF(36,"Active Permissions"),e.k0s(),e.j41(37,"p",24),e.EFF(38),e.k0s()(),e.j41(39,"div",25),e.nrm(40,"i",26),e.k0s()()(),e.j41(41,"div",19)(42,"div",3)(43,"div")(44,"p",20),e.EFF(45,"System Permissions"),e.k0s(),e.j41(46,"p",27),e.EFF(47),e.k0s()(),e.j41(48,"div",28),e.nrm(49,"i",29),e.k0s()()(),e.j41(50,"div",19)(51,"div",3)(52,"div")(53,"p",20),e.EFF(54,"Custom Permissions"),e.k0s(),e.j41(55,"p",30),e.EFF(56),e.k0s()(),e.j41(57,"div",31),e.nrm(58,"i",32),e.k0s()()()(),e.DNE(59,we,23,11,"div",33),e.j41(60,"div",34)(61,"div",35)(62,"div",3)(63,"div",36)(64,"h2",37),e.EFF(65,"Permissions List"),e.k0s(),e.DNE(66,xe,1,1,"p-tag",38),e.k0s(),e.j41(67,"div",39)(68,"p-button",40),e.bIt("click",function(){return e.eBV(r),e.Njj(i.toggleViewMode())}),e.k0s(),e.j41(69,"p-button",41),e.bIt("click",function(){return e.eBV(r),e.Njj(i.refreshPermissions())}),e.k0s()()()(),e.DNE(70,ke,5,0,"div",42)(71,Fe,5,7,"div",43)(72,Se,3,2,"div",44),e.k0s(),e.j41(73,"div",45),e.DNE(74,Ie,8,0,"div",46),e.k0s()(),e.j41(75,"app-permission",47,0),e.bIt("onSave",function(){return e.eBV(r),e.Njj(i.refreshPermissions())}),e.k0s()}2&s&&(e.R7$(14),e.Y8G("outlined",!0)("rounded",!0),e.R7$(),e.Y8G("outlined",!0)("rounded",!0),e.R7$(),e.Y8G("outlined",!0)("rounded",!0),e.R7$(),e.Y8G("outlined",!i.showFilters)("rounded",!0),e.R7$(),e.Y8G("outlined","list"!==i.viewMode)("rounded",!0),e.R7$(),e.Y8G("outlined","card"!==i.viewMode)("rounded",!0),e.R7$(2),e.Y8G("rounded",!0),e.R7$(8),e.JRh(i.stats.totalPermissions),e.R7$(9),e.JRh(i.stats.activePermissions),e.R7$(9),e.JRh(i.stats.systemPermissions),e.R7$(9),e.JRh(i.stats.customPermissions),e.R7$(3),e.Y8G("ngIf",i.showFilters),e.R7$(7),e.Y8G("ngIf",null==i.permissions?null:i.permissions.data),e.R7$(2),e.Y8G("icon","list"===i.viewMode?"pi pi-th-large":"pi pi-list")("rounded",!0)("text",!0)("pTooltip","list"===i.viewMode?"Card View":"List View"),e.R7$(),e.Y8G("rounded",!0)("text",!0),e.R7$(),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading&&"list"===i.viewMode),e.R7$(),e.Y8G("ngIf",!i.loading&&"card"===i.viewMode),e.R7$(2),e.Y8G("ngIf",!1))},dependencies:[g.MD,g.YU,g.Sq,g.bT,h.YN,h.me,h.BC,h.vS,x.$n,l.bG,l.XI,m.Ei,w.kr,w.ms,P.um,P.Sm,E.Dw,$.EJ,C.$C,C.vw,T.P8,G.Mk,j.Ss,j.m_,d.Ph,b.H_,_.iV,o.dl,y.ft,v.MB,v.y8,S.FP,S.TM,ve],encapsulation:2})}return n})()},1593:(D,F,a)=>{a.d(F,{VS:()=>G});var x=a(2881),l=a(1360),R=a(5779),k=a(3491),w=a(6263);const P=["*"],E=({dt:d})=>`\n.p-floatlabel {\n    display: block;\n    position: relative;\n}\n\n.p-floatlabel label {\n    position: absolute;\n    pointer-events: none;\n    top: 50%;\n    transform: translateY(-50%);\n    transition-property: all;\n    transition-timing-function: ease;\n    line-height: 1;\n    font-weight: ${d("floatlabel.font.weight")};\n    inset-inline-start: ${d("floatlabel.position.x")};\n    color: ${d("floatlabel.color")};\n    transition-duration: ${d("floatlabel.transition.duration")};\n}\n\n.p-floatlabel:has(.p-textarea) label {\n    top: ${d("floatlabel.position.y")};\n    transform: translateY(0);\n}\n\n.p-floatlabel:has(.p-inputicon:first-child) label {\n    inset-inline-start: calc((${d("form.field.padding.x")} * 2) + ${d("icon.size")});\n}\n\n.p-floatlabel:has(.ng-invalid.ng-dirty) label {\n    color: ${d("floatlabel.invalid.color")};\n}\n\n.p-floatlabel:has(input:focus) label,\n.p-floatlabel:has(input.p-filled) label,\n.p-floatlabel:has(input:-webkit-autofill) label,\n.p-floatlabel:has(textarea:focus) label,\n.p-floatlabel:has(textarea.p-filled) label,\n.p-floatlabel:has(.p-inputwrapper-focus) label,\n.p-floatlabel:has(.p-inputwrapper-filled) label {\n    top: ${d("floatlabel.over.active.top")};\n    transform: translateY(0);\n    font-size: ${d("floatlabel.active.font.size")};\n    font-weight: ${d("floatlabel.label.active.font.weight")};\n}\n\n.p-floatlabel:has(input.p-filled) label,\n.p-floatlabel:has(textarea.p-filled) label,\n.p-floatlabel:has(.p-inputwrapper-filled) label {\n    color: ${d("floatlabel.active.color")};\n}\n\n.p-floatlabel:has(input:focus) label,\n.p-floatlabel:has(input:-webkit-autofill) label,\n.p-floatlabel:has(textarea:focus) label,\n.p-floatlabel:has(.p-inputwrapper-focus) label {\n    color: ${d("floatlabel.focus.color")};\n}\n\n.p-floatlabel-in .p-inputtext,\n.p-floatlabel-in .p-textarea,\n.p-floatlabel-in .p-select-label,\n.p-floatlabel-in .p-multiselect-label-container,\n.p-floatlabel-in .p-autocomplete-input-multiple,\n.p-floatlabel-in .p-cascadeselect-label,\n.p-floatlabel-in .p-treeselect-label {\n    padding-top: ${d("floatlabel.in.input.padding.top")};\n}\n\n.p-floatlabel-in:has(input:focus) label,\n.p-floatlabel-in:has(input.p-filled) label,\n.p-floatlabel-in:has(input:-webkit-autofill) label,\n.p-floatlabel-in:has(textarea:focus) label,\n.p-floatlabel-in:has(textarea.p-filled) label,\n.p-floatlabel-in:has(.p-inputwrapper-focus) label,\n.p-floatlabel-in:has(.p-inputwrapper-filled) label {\n    top: ${d("floatlabel.in.active.top")};\n}\n\n.p-floatlabel-on:has(input:focus) label,\n.p-floatlabel-on:has(input.p-filled) label,\n.p-floatlabel-on:has(input:-webkit-autofill) label,\n.p-floatlabel-on:has(textarea:focus) label,\n.p-floatlabel-on:has(textarea.p-filled) label,\n.p-floatlabel-on:has(.p-inputwrapper-focus) label,\n.p-floatlabel-on:has(.p-inputwrapper-filled) label {\n    top: 0;\n    transform: translateY(-50%);\n    border-radius: ${d("floatlabel.on.border.radius")};\n    background: ${d("floatlabel.on.active.background")};\n    padding: ${d("floatlabel.on.active.padding")};\n}\n`,$={root:({props:b})=>["p-floatlabel",{"p-floatlabel-over":"over"===b.variant,"p-floatlabel-on":"on"===b.variant,"p-floatlabel-in":"in"===b.variant}]};let C=(()=>{class d extends w.j{name="floatlabel";theme=E;classes=$;static \u0275fac=(()=>{let _;return function(y){return(_||(_=l.xGo(d)))(y||d)}})();static \u0275prov=l.jDH({token:d,factory:d.\u0275fac})}return d})(),G=(()=>{class d extends k.${_componentStyle=(0,l.WQX)(C);variant="over";static \u0275fac=(()=>{let _;return function(y){return(_||(_=l.xGo(d)))(y||d)}})();static \u0275cmp=l.VBU({type:d,selectors:[["p-floatlabel"],["p-floatLabel"],["p-float-label"]],hostVars:8,hostBindings:function(o,y){2&o&&l.AVh("p-floatlabel",!0)("p-floatlabel-over","over"===y.variant)("p-floatlabel-on","on"===y.variant)("p-floatlabel-in","in"===y.variant)},inputs:{variant:"variant"},features:[l.Jv_([C]),l.Vt3],ngContentSelectors:P,decls:1,vars:0,template:function(o,y){1&o&&(l.NAR(),l.SdG(0))},dependencies:[x.MD,R.Gg],encapsulation:2,changeDetection:0})}return d})()},1631:(D,F,a)=>{a.d(F,{HW:()=>b,H_:()=>_});var x=a(2881),l=a(1360),R=a(9417),k=a(5779),w=a(1880),P=a(3491),E=a(6263);const $=["input"],C=({dt:o})=>`\n.p-toggleswitch {\n    display: inline-block;\n    width: ${o("toggleswitch.width")};\n    height: ${o("toggleswitch.height")};\n\n}\n\n.p-toggleswitch-input {\n    cursor: pointer;\n    appearance: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    margin: 0;\n    opacity: 0;\n    z-index: 1;\n    outline: 0 none;\n    border-radius: ${o("toggleswitch.border.radius")};\n}\n\n.p-toggleswitch-slider {\n    display: inline-block;\n    cursor: pointer;\n    width: 100%;\n    height: 100%;\n    border-width: ${o("toggleswitch.border.width")};\n    border-style: solid;\n    border-color: ${o("toggleswitch.border.color")};\n    background: ${o("toggleswitch.background")};\n    transition: background ${o("toggleswitch.transition.duration")}, color ${o("toggleswitch.transition.duration")}, border-color ${o("toggleswitch.transition.duration")}, outline-color ${o("toggleswitch.transition.duration")}, box-shadow ${o("toggleswitch.transition.duration")};\n    border-radius: ${o("toggleswitch.border.radius")};\n    outline-color: transparent;\n    box-shadow: ${o("toggleswitch.shadow")};\n}\n\n.p-toggleswitch-slider:before {\n    position: absolute;\n    content: "";\n    top: 50%;\n    background: ${o("toggleswitch.handle.background")};\n    width: ${o("toggleswitch.handle.size")};\n    height: ${o("toggleswitch.handle.size")};\n    left: ${o("toggleswitch.gap")};\n    margin-top: calc(-1 * calc(${o("toggleswitch.handle.size")} / 2));\n    border-radius: ${o("toggleswitch.handle.border.radius")};\n    transition: background ${o("toggleswitch.transition.duration")}, left ${o("toggleswitch.slide.duration")};\n}\n\n.p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-slider {\n    background: ${o("toggleswitch.checked.background")};\n    border-color: ${o("toggleswitch.checked.border.color")};\n}\n\n.p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-slider:before {\n    background: ${o("toggleswitch.handle.checked.background")};\n    left: calc(${o("toggleswitch.width")} - calc(${o("toggleswitch.handle.size")} + ${o("toggleswitch.gap")}));\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-slider {\n    background: ${o("toggleswitch.hover.background")};\n    border-color: ${o("toggleswitch.hover.border.color")};\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-slider:before {\n    background: ${o("toggleswitch.handle.hover.background")};\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-slider {\n    background: ${o("toggleswitch.checked.hover.background")};\n    border-color: ${o("toggleswitch.checked.hover.border.color")};\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-slider:before {\n    background: ${o("toggleswitch.handle.checked.hover.background")};\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:focus-visible) .p-toggleswitch-slider {\n    box-shadow: ${o("toggleswitch.focus.ring.shadow")};\n    outline: ${o("toggleswitch.focus.ring.width")} ${o("toggleswitch.focus.ring.style")} ${o("toggleswitch.focus.ring.color")};\n    outline-offset: ${o("toggleswitch.focus.ring.offset")};\n}\n\n.p-toggleswitch.p-invalid > .p-toggleswitch-slider {\n    border-color: ${o("toggleswitch.invalid.border.color")};\n}\n\n.p-toggleswitch.p-disabled {\n    opacity: 1;\n}\n\n.p-toggleswitch.p-disabled .p-toggleswitch-slider {\n    background: ${o("toggleswitch.disabled.background")};\n}\n\n.p-toggleswitch.p-disabled .p-toggleswitch-slider:before {\n    background: ${o("toggleswitch.handle.disabled.background")};\n}\n`,T={root:{position:"relative"}},G={root:({instance:o})=>({"p-toggleswitch p-component":!0,"p-toggleswitch-checked":o.checked(),"p-disabled":o.disabled,"p-invalid":o.invalid}),input:"p-toggleswitch-input",slider:"p-toggleswitch-slider"};let j=(()=>{class o extends E.j{name="toggleswitch";theme=C;classes=G;inlineStyles=T;static \u0275fac=(()=>{let g;return function(m){return(g||(g=l.xGo(o)))(m||o)}})();static \u0275prov=l.jDH({token:o,factory:o.\u0275fac})}return o})();const d={provide:R.kq,useExisting:(0,l.Rfq)(()=>b),multi:!0};let b=(()=>{class o extends P.${style;styleClass;tabindex;inputId;name;disabled;readonly;trueValue=!0;falseValue=!1;ariaLabel;ariaLabelledBy;autofocus;onChange=new l.bkB;input;modelValue=!1;focused=!1;onModelChange=()=>{};onModelTouched=()=>{};_componentStyle=(0,l.WQX)(j);onClick(g){!this.disabled&&!this.readonly&&(this.modelValue=this.checked()?this.falseValue:this.trueValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:g,checked:this.modelValue}),this.input.nativeElement.focus())}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}writeValue(g){this.modelValue=g,this.cd.markForCheck()}registerOnChange(g){this.onModelChange=g}registerOnTouched(g){this.onModelTouched=g}setDisabledState(g){this.disabled=g,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}static \u0275fac=(()=>{let g;return function(m){return(g||(g=l.xGo(o)))(m||o)}})();static \u0275cmp=l.VBU({type:o,selectors:[["p-inputSwitch"],["p-inputswitch"]],viewQuery:function(h,m){if(1&h&&l.GBs($,5),2&h){let v;l.mGM(v=l.lsd())&&(m.input=v.first)}},inputs:{style:"style",styleClass:"styleClass",tabindex:[2,"tabindex","tabindex",l.Udg],inputId:"inputId",name:"name",disabled:[2,"disabled","disabled",l.L39],readonly:[2,"readonly","readonly",l.L39],trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",autofocus:[2,"autofocus","autofocus",l.L39]},outputs:{onChange:"onChange"},features:[l.Jv_([d,j]),l.Vt3],decls:5,vars:22,consts:[["input",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"focus","blur","ngClass","checked","disabled","pAutoFocus"],[3,"ngClass"]],template:function(h,m){if(1&h){const v=l.RV6();l.j41(0,"div",1),l.bIt("click",function(e){return l.eBV(v),l.Njj(m.onClick(e))}),l.j41(1,"div",2)(2,"input",3,0),l.bIt("focus",function(){return l.eBV(v),l.Njj(m.onFocus())})("blur",function(){return l.eBV(v),l.Njj(m.onBlur())}),l.k0s()(),l.nrm(4,"span",4),l.k0s()}2&h&&(l.HbH(m.styleClass),l.Y8G("ngClass",m.cx("root"))("ngStyle",m.sx("root"))("ngStyle",m.style),l.BMQ("data-pc-name","inputswitch")("data-pc-section","root"),l.R7$(),l.BMQ("data-pc-section","hiddenInputWrapper")("data-p-hidden-accessible",!0),l.R7$(),l.Y8G("ngClass",m.cx("input"))("checked",m.checked())("disabled",m.disabled)("pAutoFocus",m.autofocus),l.BMQ("id",m.inputId)("aria-checked",m.checked())("aria-labelledby",m.ariaLabelledBy)("aria-label",m.ariaLabel)("name",m.name)("tabindex",m.tabindex)("data-pc-section","hiddenInput"),l.R7$(2),l.Y8G("ngClass",m.cx("slider")),l.BMQ("data-pc-section","slider"))},dependencies:[x.MD,x.YU,x.B3,w.u,w.q,k.Gg],encapsulation:2,changeDetection:0})}return o})(),_=(()=>{class o{static \u0275fac=function(h){return new(h||o)};static \u0275mod=l.$C({type:o});static \u0275inj=l.G2t({imports:[b,k.Gg,k.Gg]})}return o})()}}]);