"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8337],{8337:(ae,_,a)=>{a.r(_),a.d(_,{PoliciesComponent:()=>le});var m=a(2881),c=a(9417),e=a(1360),u=a(1141),y=a(2242),F=a(63),p=a(8150),v=a(5430),w=a(6348),h=a(4299);const M=()=>({label:"Access Control",value:"access_control"}),S=()=>({label:"Data Protection",value:"data_protection"}),R=()=>({label:"Compliance",value:"compliance"}),T=(l,r,t)=>[l,r,t],E=()=>({label:"Allow",value:"allow"}),I=()=>({label:"Deny",value:"deny"}),G=(l,r)=>[l,r];let V=(()=>{class l extends w.q{injector;governanceServices;policy=null;savePolicy=new e.bkB;cancelPolicy=new e.bkB;title="Create Policy";editingPolicy={_id:null,kid:"",name:"",description:"",type:"access_control",effect:"allow",subjects:[],roles:[],permissions:[],resources:[],domain_id:null,data_product_id:null,conditions:{},priority:1,enabled:!0,tags:[],created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),created_by:null,updated_by:null,role_details:[],permission_details:[],asset_details:[],user_details:[],team_details:[],affected_assets_total:0,policy_rules_total:0,total_subjects:0,total_roles:0,total_permissions:0,total_resources:0,domain_info:null,data_product_info:null};constructor(t,o){super(t),this.injector=t,this.governanceServices=o}ngOnInit(){this.policy?(this.editingPolicy={...this.policy},this.title="Edit Policy"):this.title="Create Policy"}save(){this.editingPolicy.name.trim()?this.editingPolicy.type.trim()?(this.policy&&this.policy.kid?this.governanceServices.updatePolicy(this.policy.kid,this.editingPolicy):this.governanceServices.createPolicy(this.editingPolicy)).subscribe({next:o=>{o.success?(this.showSuccess(this.policy?"Policy updated successfully":"Policy created successfully"),this.savePolicy.emit()):this.showError(o.message||"Failed to save policy")},error:o=>{console.error("Error saving policy:",o),this.showError("Failed to save policy")}}):this.showError("Policy type is required"):this.showError("Policy name is required")}cancel(){this.cancelPolicy.emit()}static \u0275fac=function(o){return new(o||l)(e.rXU(e.zZn),e.rXU(h.N))};static \u0275cmp=e.VBU({type:l,selectors:[["app-policy"]],inputs:{policy:"policy"},outputs:{savePolicy:"savePolicy",cancelPolicy:"cancelPolicy"},features:[e.Vt3],decls:31,vars:21,consts:[[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"flex","flex-col","gap-2"],["for","policy-name",1,"text-sm","font-medium","text-gray-700"],["id","policy-name","type","text","pInputText","","placeholder","Enter policy name","required","",1,"w-full",3,"ngModelChange","ngModel"],["for","policy-type",1,"text-sm","font-medium","text-gray-700"],["id","policy-type","optionLabel","label","optionValue","value","placeholder","Select policy type",1,"w-full",3,"ngModelChange","ngModel","options"],["for","policy-description",1,"text-sm","font-medium","text-gray-700"],["id","policy-description","pTextarea","","placeholder","Enter policy description","rows","4",1,"w-full",3,"ngModelChange","ngModel"],["for","policy-effect",1,"text-sm","font-medium","text-gray-700"],["id","policy-effect","optionLabel","label","optionValue","value","placeholder","Select effect",1,"w-full",3,"ngModelChange","ngModel","options"],["for","policy-priority",1,"text-sm","font-medium","text-gray-700"],["id","policy-priority","type","number","pInputText","","placeholder","Enter priority (1-100)","min","1","max","100",1,"w-full",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-2"],["binary","true","inputId","policy-enabled",3,"ngModelChange","ngModel"],["for","policy-enabled",1,"text-sm","font-medium","text-gray-700"],[1,"flex","justify-end","gap-3","pt-4","border-t"],["label","Cancel","icon","pi pi-times","severity","secondary",3,"onClick","outlined"],["label","Save Policy","icon","pi pi-check","severity","primary",3,"onClick"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),e.EFF(4,"Policy Name *"),e.k0s(),e.j41(5,"input",4),e.mxI("ngModelChange",function(s){return e.DH7(i.editingPolicy.name,s)||(i.editingPolicy.name=s),s}),e.k0s()(),e.j41(6,"div",2)(7,"label",5),e.EFF(8,"Policy Type *"),e.k0s(),e.j41(9,"p-dropdown",6),e.mxI("ngModelChange",function(s){return e.DH7(i.editingPolicy.type,s)||(i.editingPolicy.type=s),s}),e.k0s()()(),e.j41(10,"div",2)(11,"label",7),e.EFF(12,"Description"),e.k0s(),e.j41(13,"textarea",8),e.mxI("ngModelChange",function(s){return e.DH7(i.editingPolicy.description,s)||(i.editingPolicy.description=s),s}),e.EFF(14,"    "),e.k0s()(),e.j41(15,"div",1)(16,"div",2)(17,"label",9),e.EFF(18,"Effect"),e.k0s(),e.j41(19,"p-dropdown",10),e.mxI("ngModelChange",function(s){return e.DH7(i.editingPolicy.effect,s)||(i.editingPolicy.effect=s),s}),e.k0s()(),e.j41(20,"div",2)(21,"label",11),e.EFF(22,"Priority"),e.k0s(),e.j41(23,"input",12),e.mxI("ngModelChange",function(s){return e.DH7(i.editingPolicy.priority,s)||(i.editingPolicy.priority=s),s}),e.k0s()()(),e.j41(24,"div",13)(25,"p-checkbox",14),e.mxI("ngModelChange",function(s){return e.DH7(i.editingPolicy.enabled,s)||(i.editingPolicy.enabled=s),s}),e.k0s(),e.j41(26,"label",15),e.EFF(27,"Enable Policy"),e.k0s()(),e.j41(28,"div",16)(29,"p-button",17),e.bIt("onClick",function(){return i.cancel()}),e.k0s(),e.j41(30,"p-button",18),e.bIt("onClick",function(){return i.save()}),e.k0s()()()),2&o&&(e.R7$(5),e.R50("ngModel",i.editingPolicy.name),e.R7$(4),e.R50("ngModel",i.editingPolicy.type),e.Y8G("options",e.sMw(12,T,e.lJ4(9,M),e.lJ4(10,S),e.lJ4(11,R))),e.R7$(4),e.R50("ngModel",i.editingPolicy.description),e.R7$(6),e.R50("ngModel",i.editingPolicy.effect),e.Y8G("options",e.l_i(18,G,e.lJ4(16,E),e.lJ4(17,I))),e.R7$(4),e.R50("ngModel",i.editingPolicy.priority),e.R7$(2),e.R50("ngModel",i.editingPolicy.enabled),e.R7$(4),e.Y8G("outlined",!0))},dependencies:[u.$n,y.Sm,c.X1,c.me,c.Q0,c.BC,c.YS,c.VZ,c.zX,F.TM,c.YN,c.vS,p.kr,p.ms,v.q4,v.Sc],encapsulation:2})}return l})();var D=a(968),d=a(5779),g=a(117),f=a(935),b=a(1570),P=a(7722),$=a(491),C=a(6150),N=a(6627),x=a(5716),j=a(4799),X=a(3682),B=a(5144),Y=a(1830),k=a(1631),z=a(4827),O=a(2637),J=a(1579),L=a(1436),H=a(5423),A=a(8660);const U=()=>({width:"90vw",maxWidth:"800px"});function W(l,r){1&l&&(e.j41(0,"div",6),e.nrm(1,"app-loading",7),e.k0s())}function Z(l,r){1&l&&(e.j41(0,"div",8)(1,"div",48),e.nrm(2,"p-skeleton",49)(3,"p-skeleton",49)(4,"p-skeleton",49),e.k0s()())}function Q(l,r){1&l&&(e.j41(0,"tr")(1,"th",55),e.EFF(2," Name "),e.nrm(3,"p-sortIcon",56),e.k0s(),e.j41(4,"th"),e.EFF(5,"Description"),e.k0s(),e.j41(6,"th",57),e.EFF(7," Type "),e.nrm(8,"p-sortIcon",58),e.k0s(),e.j41(9,"th"),e.EFF(10,"Status"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Roles"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Created"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Actions"),e.k0s()())}function K(l,r){if(1&l){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div",59)(3,"span",60),e.EFF(4),e.k0s(),e.j41(5,"span",61),e.EFF(6),e.k0s()()(),e.j41(7,"td")(8,"span",62),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.nrm(11,"p-tag",63),e.k0s(),e.j41(12,"td"),e.nrm(13,"p-tag",63),e.k0s(),e.j41(14,"td")(15,"div",64),e.nrm(16,"p-badge",65),e.j41(17,"span",61),e.EFF(18,"roles"),e.k0s()()(),e.j41(19,"td")(20,"span",66),e.EFF(21),e.k0s()(),e.j41(22,"td")(23,"div",64)(24,"p-button",67),e.bIt("onClick",function(){const i=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.viewPolicyDetails(i))}),e.k0s(),e.j41(25,"p-button",68),e.bIt("onClick",function(){const i=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.openPolicyModal(i))}),e.k0s(),e.j41(26,"p-inputSwitch",69),e.mxI("ngModelChange",function(i){const n=e.eBV(t).$implicit;return e.DH7(n.enabled,i)||(n.enabled=i),e.Njj(i)}),e.bIt("onChange",function(){const i=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.togglePolicyStatus(i))}),e.k0s(),e.j41(27,"p-button",70),e.bIt("onClick",function(){const i=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.deletePolicy(i))}),e.k0s()()()()}if(2&l){const t=r.$implicit,o=e.XpG(3);e.R7$(4),e.JRh(t.name),e.R7$(2),e.JRh(t.kid),e.R7$(3),e.JRh(t.description),e.R7$(2),e.Y8G("value",t.type)("severity",o.getPolicyTypeSeverity(t.type)),e.R7$(2),e.Y8G("value",t.enabled?"Active":"Inactive")("severity",o.getPolicyStatusSeverity(t.enabled)),e.R7$(3),e.Y8G("value",t.roles.length),e.R7$(5),e.JRh(o.formatDate(t.created_at)),e.R7$(3),e.Y8G("outlined",!0),e.R7$(),e.Y8G("outlined",!0),e.R7$(),e.R50("ngModel",t.enabled),e.R7$(),e.Y8G("outlined",!0)}}function q(l,r){if(1&l){const t=e.RV6();e.j41(0,"tr")(1,"td",71)(2,"div",72),e.nrm(3,"i",73),e.j41(4,"div")(5,"h3",74),e.EFF(6,"No Policies Found"),e.k0s(),e.j41(7,"p",75),e.EFF(8,"Create your first policy to get started"),e.k0s()(),e.j41(9,"p-button",18),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.openPolicyModal())}),e.k0s()()()()}}function ee(l,r){if(1&l){const t=e.RV6();e.j41(0,"div",50)(1,"p-table",51),e.bIt("onLazyLoad",function(i){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onLazyLoad(i))}),e.DNE(2,Q,17,0,"ng-template",52)(3,K,28,13,"ng-template",53)(4,q,10,0,"ng-template",54),e.k0s()()}if(2&l){const t=e.XpG(2);e.R7$(),e.Y8G("value",t.policies)("paginator",!0)("rows",t.pageSize)("totalRecords",t.totalRecords)("lazy",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",t.pageSizeOptions)}}function te(l,r){if(1&l){const t=e.RV6();e.j41(0,"div",84)(1,"div",85)(2,"div",86)(3,"div",87)(4,"h3",88),e.EFF(5),e.k0s(),e.j41(6,"p",89),e.EFF(7),e.k0s(),e.j41(8,"p",62),e.EFF(9),e.k0s()(),e.j41(10,"div",90),e.nrm(11,"p-tag",91),e.k0s()(),e.j41(12,"div",92)(13,"div",10)(14,"div",64),e.nrm(15,"p-badge",65),e.j41(16,"span",61),e.EFF(17,"roles"),e.k0s()(),e.j41(18,"div",64),e.nrm(19,"p-badge",93),e.j41(20,"span",61),e.EFF(21,"permissions"),e.k0s()()(),e.nrm(22,"p-tag",63),e.k0s(),e.j41(23,"div",94)(24,"div",9)(25,"span",61),e.EFF(26),e.k0s(),e.j41(27,"div",64)(28,"p-button",67),e.bIt("onClick",function(){const i=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.viewPolicyDetails(i))}),e.k0s(),e.j41(29,"p-button",68),e.bIt("onClick",function(){const i=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.openPolicyModal(i))}),e.k0s(),e.j41(30,"p-inputSwitch",69),e.mxI("ngModelChange",function(i){const n=e.eBV(t).$implicit;return e.DH7(n.enabled,i)||(n.enabled=i),e.Njj(i)}),e.bIt("onChange",function(){const i=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.togglePolicyStatus(i))}),e.k0s()()()()()()}if(2&l){const t=r.$implicit,o=e.XpG(3);e.R7$(5),e.JRh(t.name),e.R7$(2),e.JRh(t.kid),e.R7$(2),e.JRh(t.description),e.R7$(2),e.Y8G("value",t.type)("severity",o.getPolicyTypeSeverity(t.type)),e.R7$(4),e.Y8G("value",t.roles.length),e.R7$(4),e.Y8G("value",t.permissions.length),e.R7$(3),e.Y8G("value",t.enabled?"Active":"Inactive")("severity",o.getPolicyStatusSeverity(t.enabled)),e.R7$(4),e.SpI("Created ",o.formatDate(t.created_at),""),e.R7$(2),e.Y8G("outlined",!0),e.R7$(),e.Y8G("outlined",!0),e.R7$(),e.R50("ngModel",t.enabled)}}function ie(l,r){if(1&l){const t=e.RV6();e.j41(0,"div",76),e.DNE(1,te,31,13,"div",77),e.j41(2,"div",78)(3,"div",79),e.nrm(4,"i",80),e.j41(5,"h3",81),e.EFF(6,"Add New Policy"),e.k0s(),e.j41(7,"p",82),e.EFF(8,"Create a new governance policy"),e.k0s(),e.j41(9,"p-button",83),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.openPolicyModal())}),e.k0s()()()()}if(2&l){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.policies)("ngForTrackBy",t.trackByPolicyId)}}function oe(l,r){if(1&l){const t=e.RV6();e.j41(0,"div",95),e.nrm(1,"i",96),e.j41(2,"h3",97),e.EFF(3,"No Policies Found"),e.k0s(),e.j41(4,"p",98),e.EFF(5,"Create your first policy to start governing your data"),e.k0s(),e.j41(6,"p-button",83),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.openPolicyModal())}),e.k0s()()}}function ne(l,r){if(1&l){const t=e.RV6();e.j41(0,"div")(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11),e.nrm(5,"i",12),e.k0s(),e.j41(6,"div")(7,"h1",13),e.EFF(8,"Policy Management"),e.k0s(),e.j41(9,"p",14),e.EFF(10,"Define and manage data governance policies"),e.k0s()()(),e.j41(11,"div",15)(12,"p-button",16),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setViewMode("table"))}),e.k0s(),e.j41(13,"p-button",17),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setViewMode("card"))}),e.k0s(),e.j41(14,"p-button",18),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openPolicyModal())}),e.k0s()()()(),e.j41(15,"div",19)(16,"div",8)(17,"div",9)(18,"div")(19,"p",20),e.EFF(20,"Total Policies"),e.k0s(),e.j41(21,"p",13),e.EFF(22),e.k0s()(),e.j41(23,"div",21),e.nrm(24,"i",22),e.k0s()()(),e.j41(25,"div",8)(26,"div",9)(27,"div")(28,"p",20),e.EFF(29,"Active Policies"),e.k0s(),e.j41(30,"p",23),e.EFF(31),e.k0s()(),e.j41(32,"div",24),e.nrm(33,"i",25),e.k0s()()(),e.j41(34,"div",8)(35,"div",9)(36,"div")(37,"p",20),e.EFF(38,"Enforced Policies"),e.k0s(),e.j41(39,"p",26),e.EFF(40),e.k0s()(),e.j41(41,"div",27),e.nrm(42,"i",28),e.k0s()()(),e.j41(43,"div",8)(44,"div",9)(45,"div")(46,"p",20),e.EFF(47,"Violations"),e.k0s(),e.j41(48,"p",29),e.EFF(49),e.k0s()(),e.j41(50,"div",30),e.nrm(51,"i",31),e.k0s()()()(),e.j41(52,"div",8)(53,"div",32)(54,"div",33)(55,"label",34),e.EFF(56,"Search"),e.k0s(),e.j41(57,"span",35),e.nrm(58,"i",36),e.j41(59,"input",37),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.searchTerm,i)||(n.searchTerm=i),e.Njj(i)}),e.bIt("input",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSearch())}),e.k0s()()(),e.j41(60,"div",33)(61,"label",38),e.EFF(62,"Type"),e.k0s(),e.j41(63,"p-dropdown",39),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.filters.type,i)||(n.filters.type=i),e.Njj(i)}),e.bIt("onChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onFilterChange())}),e.k0s()(),e.j41(64,"div",33)(65,"label",40),e.EFF(66,"Status"),e.k0s(),e.j41(67,"p-dropdown",41),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.filters.enabled,i)||(n.filters.enabled=i),e.Njj(i)}),e.bIt("onChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onFilterChange())}),e.k0s()(),e.j41(68,"div",33)(69,"label",42),e.EFF(70,"\xa0"),e.k0s(),e.j41(71,"p-button",43),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.clearFilters())}),e.k0s()()()(),e.DNE(72,Z,5,0,"div",44)(73,ee,5,7,"div",45)(74,ie,10,2,"div",46)(75,oe,7,0,"div",47),e.k0s()}if(2&l){const t=e.XpG();e.R7$(12),e.Y8G("outlined","table"!==t.viewMode),e.R7$(),e.Y8G("outlined","card"!==t.viewMode),e.R7$(9),e.JRh(t.stats.totalPolicies),e.R7$(9),e.JRh(t.stats.activePolicies),e.R7$(9),e.JRh(t.stats.enforcedPolicies),e.R7$(9),e.JRh(t.stats.violations),e.R7$(10),e.R50("ngModel",t.searchTerm),e.R7$(4),e.Y8G("options",t.typeOptions),e.R50("ngModel",t.filters.type),e.R7$(4),e.Y8G("options",t.statusOptions),e.R50("ngModel",t.filters.enabled),e.R7$(4),e.Y8G("outlined",!0),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",!t.loading&&"table"===t.viewMode),e.R7$(),e.Y8G("ngIf",!t.loading&&"card"===t.viewMode),e.R7$(),e.Y8G("ngIf",!t.loading&&0===t.policies.length)}}let le=(()=>{class l{governanceServices;router;toastService;messageService;confirmationService;loadingService;policies=[];loading=!1;showPolicyModal=!1;selectedPolicy=null;viewMode="table";searchTerm="";filters={status:"",type:"",priority:"",enabled:""};totalRecords=0;currentPage=0;pageSize=10;pageSizeOptions=[5,10,25,50];stats={totalPolicies:0,activePolicies:0,violations:0,enforcedPolicies:0};typeOptions=[{label:"All Types",value:""},{label:"Access Control",value:"access_control"},{label:"Data Protection",value:"data_protection"},{label:"Compliance",value:"compliance"}];statusOptions=[{label:"All Status",value:""},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}];priorityOptions=[{label:"All Priorities",value:""},{label:"High",value:"high"},{label:"Medium",value:"medium"},{label:"Low",value:"low"}];constructor(t,o,i,n,s,se){this.governanceServices=t,this.router=o,this.toastService=i,this.messageService=n,this.confirmationService=s,this.loadingService=se}ngOnInit(){this.currentPage=0,this.pageSize=10,this.loadPolicies(),this.loadStats()}loadPolicies(){this.loading=!0,this.loadingService.showPageLoading("Loading policies...","data-flow");const t=Number(this.currentPage)||0,o=Number(this.pageSize)||10,i=t*o;console.log("Loading policies with params:",{currentPage:t,pageSize:o,offset:i,originalCurrentPage:this.currentPage,originalPageSize:this.pageSize}),this.governanceServices.getPolicies({limit:o,offset:i,search:this.searchTerm||void 0,type:this.filters.type||void 0,enabled:this.filters.enabled||void 0}).subscribe({next:s=>{s.success&&s.data?(this.policies=s.data.data,this.totalRecords=s.data.pagination.total,this.updateStats()):(this.policies=[],this.totalRecords=0),this.loading=!1,this.loadingService.hide()},error:s=>{console.error("Error loading policies:",s),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load policies"}),this.loading=!1,this.loadingService.hide()}})}loadStats(){this.updateStats()}updateStats(){this.stats.totalPolicies=this.totalRecords,this.stats.activePolicies=this.policies.filter(t=>t.enabled).length,this.stats.enforcedPolicies=this.policies.filter(t=>t.enabled&&"access_control"===t.type).length,this.stats.violations=0}onLazyLoad(t){this.currentPage=Math.floor((t.first||0)/(t.rows||10)),this.pageSize=Number(t.rows)||10,this.loadPolicies()}onPageChange(t){this.currentPage=Number(t.page)||0,this.pageSize=Number(t.rows)||10,this.loadPolicies()}onSearch(){this.currentPage=0,this.loadPolicies()}onFilterChange(){this.currentPage=0,this.loadPolicies()}clearFilters(){this.searchTerm="",this.filters={status:"",type:"",priority:"",enabled:""},this.currentPage=0,this.loadPolicies()}setViewMode(t){this.viewMode=t}openPolicyModal(t=null){this.selectedPolicy=t,this.showPolicyModal=!0}closePolicyModal(){this.showPolicyModal=!1,this.selectedPolicy=null}onPolicySaved(){this.closePolicyModal(),this.loadPolicies()}togglePolicyStatus(t){const o=t.enabled?"disable":"enable";(t.enabled?this.governanceServices.disablePolicy(t.kid):this.governanceServices.enablePolicy(t.kid)).subscribe({next:n=>{n.success&&(t.enabled=!t.enabled,this.messageService.add({severity:"success",summary:"Success",detail:`Policy ${o}d successfully`}),this.updateStats())},error:n=>{console.error(`Error ${o}ing policy:`,n),this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${o} policy`})}})}deletePolicy(t){this.confirmationService.confirm({message:`Are you sure you want to delete the policy "${t.name}"?`,header:"Confirm Delete",icon:"pi pi-exclamation-triangle",accept:()=>{this.governanceServices.deletePolicy(t.kid).subscribe({next:o=>{o.success&&(this.messageService.add({severity:"success",summary:"Success",detail:"Policy deleted successfully"}),this.loadPolicies())},error:o=>{console.error("Error deleting policy:",o),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to delete policy"})}})}})}viewPolicyDetails(t){this.router.navigate(["/governance/policies",t.kid])}getPolicyTypeSeverity(t){switch(t){case"access_control":return"info";case"data_protection":return"warning";case"compliance":return"danger";default:return"secondary"}}getPolicyStatusSeverity(t){return t?"success":"secondary"}formatDate(t){return new Date(t).toLocaleDateString()}trackByPolicyId(t,o){return o.kid}static \u0275fac=function(o){return new(o||l)(e.rXU(h.N),e.rXU(L.Ix),e.rXU(H.f),e.rXU(d.bg),e.rXU(d.td),e.rXU(A.U))};static \u0275cmp=e.VBU({type:l,selectors:[["app-policies"]],features:[e.Jv_([d.bg,d.td])],decls:8,vars:9,consts:[[1,"bg-gray-50","min-h-screen","p-6"],[1,"max-w-7xl","mx-auto","space-y-6"],["class","w-full",4,"ngIf"],[4,"ngIf"],["header","Policy Details",3,"visibleChange","onHide","visible","modal","closable"],[3,"savePolicy","cancelPolicy","policy"],[1,"w-full"],["type","data-flow","message","Loading policies...","size","large"],[1,"bg-white","rounded-lg","shadow-sm","p-6"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-gradient-to-br","from-purple-500","to-blue-600","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-shield","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"flex","items-center","gap-3"],["label","Table View","icon","pi pi-table","size","small",3,"onClick","outlined"],["label","Card View","icon","pi pi-th-large","size","small",3,"onClick","outlined"],["label","Add Policy","icon","pi pi-plus","severity","primary",3,"onClick"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-6"],[1,"text-sm","font-medium","text-gray-600"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-file-o","text-blue-600","text-xl"],[1,"text-3xl","font-bold","text-green-600"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-check-circle","text-green-600","text-xl"],[1,"text-3xl","font-bold","text-purple-600"],[1,"w-12","h-12","bg-purple-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-shield","text-purple-600","text-xl"],[1,"text-3xl","font-bold","text-red-600"],[1,"w-12","h-12","bg-red-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-exclamation-triangle","text-red-600","text-xl"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"flex","flex-col","gap-2"],["for","search",1,"text-sm","font-medium","text-gray-700"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["id","search","type","text","pInputText","","placeholder","Search policies...",1,"w-full",3,"ngModelChange","input","ngModel"],["for","type",1,"text-sm","font-medium","text-gray-700"],["id","type","optionLabel","label","optionValue","value","placeholder","Select type",1,"w-full",3,"ngModelChange","onChange","options","ngModel"],["for","status",1,"text-sm","font-medium","text-gray-700"],["id","status","optionLabel","label","optionValue","value","placeholder","Select status",1,"w-full",3,"ngModelChange","onChange","options","ngModel"],[1,"text-sm","font-medium","text-gray-700"],["label","Clear Filters","icon","pi pi-filter-slash","severity","secondary",3,"onClick","outlined"],["class","bg-white rounded-lg shadow-sm p-6",4,"ngIf"],["class","bg-white rounded-lg shadow-sm",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],["class","bg-white rounded-lg shadow-sm p-12 text-center",4,"ngIf"],[1,"space-y-4"],["height","4rem"],[1,"bg-white","rounded-lg","shadow-sm"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} policies","styleClass","p-datatable-sm",3,"onLazyLoad","value","paginator","rows","totalRecords","lazy","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","name"],["field","name"],["pSortableColumn","type"],["field","type"],[1,"flex","flex-col"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-gray-600","line-clamp-2"],[3,"value","severity"],[1,"flex","items-center","gap-2"],["severity","info",3,"value"],[1,"text-sm","text-gray-600"],["icon","pi pi-eye","severity","info","size","small","pTooltip","View Details",3,"onClick","outlined"],["icon","pi pi-pencil","severity","secondary","size","small","pTooltip","Edit",3,"onClick","outlined"],["pTooltip","Toggle Status",3,"ngModelChange","onChange","ngModel"],["icon","pi pi-trash","severity","danger","size","small","pTooltip","Delete",3,"onClick","outlined"],["colspan","7",1,"text-center","p-8"],[1,"flex","flex-col","items-center","gap-4"],[1,"pi","pi-shield","text-gray-400","text-4xl"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","rounded-lg","shadow-sm","border-2","border-dashed","border-gray-300","hover:border-gray-400","transition-colors"],[1,"p-6","h-full","flex","flex-col","items-center","justify-center","text-center"],[1,"pi","pi-plus","text-gray-400","text-3xl","mb-4"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500","mb-4"],["label","Create Policy","icon","pi pi-plus","severity","primary",3,"onClick"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","hover:shadow-md","transition-shadow"],[1,"p-6"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex-1"],[1,"text-lg","font-semibold","text-gray-900","mb-1"],[1,"text-sm","text-gray-500","mb-2"],[1,"flex","items-center","gap-2","ml-4"],[1,"text-xs",3,"value","severity"],[1,"flex","items-center","justify-between","mb-4"],["severity","secondary",3,"value"],[1,"border-t","pt-4"],[1,"bg-white","rounded-lg","shadow-sm","p-12","text-center"],[1,"pi","pi-shield","text-gray-400","text-6xl","mb-4"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"]],template:function(o,i){1&o&&(e.nrm(0,"p-toast")(1,"p-confirmDialog"),e.j41(2,"div",0)(3,"div",1),e.DNE(4,W,2,0,"div",2)(5,ne,76,16,"div",3),e.k0s()(),e.j41(6,"p-dialog",4),e.mxI("visibleChange",function(s){return e.DH7(i.showPolicyModal,s)||(i.showPolicyModal=s),s}),e.bIt("onHide",function(){return i.closePolicyModal()}),e.j41(7,"app-policy",5),e.bIt("savePolicy",function(){return i.onPolicySaved()})("cancelPolicy",function(){return i.closePolicyModal()}),e.k0s()()),2&o&&(e.R7$(4),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(),e.Aen(e.lJ4(8,U)),e.R50("visible",i.showPolicyModal),e.Y8G("modal",!0)("closable",!0),e.R7$(),e.Y8G("policy",i.selectedPolicy))},dependencies:[m.MD,m.Sq,m.bT,c.YN,c.me,c.BC,c.vS,V,D.q,u.tm,u.$n,d.Ei,g.bG,g.XI,g.Tg,g.yc,f.$C,f.vw,y.um,y.Sm,p.kr,p.ms,b.Ph,b.lG,P.MB,P.y8,$.Dw,C.EJ,C.Ex,N.IP,x.k2,x.EA,j.FP,j.TM,X.JB,B.Mk,Y.mE,k.H_,k.HW,z.P8,O.h6,J.dD],styles:[".policy-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.policy-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000001a}.status-badge[_ngcontent-%COMP%]{position:relative;z-index:1}.filter-section[_ngcontent-%COMP%]{backdrop-filter:blur(10px);background:#ffffffe6}.dark[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]{background:#111827e6}@media (max-width: 768px){.policy-table[_ngcontent-%COMP%]{font-size:.875rem}.policy-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}"]})}return l})()}}]);