"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[6262],{6262:(D,c,l)=>{l.r(c),l.d(c,{PartnersComponent:()=>w});var p=l(2881),d=l(9417),_=l(1141),u=l(6221),m=l(1570),h=l(2242),f=l(1305),P=l(8150),v=l(6150),b=l(7722),g=l(5779),C=l(8533),e=l(1360);const M=()=>({width:"680px"});function y(a,o){1&a&&(e.j41(0,"div",42)(1,"div",43),e.nrm(2,"i",44),e.k0s(),e.j41(3,"p",7),e.EFF(4,"Loading partners..."),e.k0s()())}function j(a,o){1&a&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Name"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Type"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Contact Name"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Phone"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Email"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Status"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Updated At"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Actions"),e.k0s()())}function E(a,o){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div",49),e.EFF(3),e.k0s(),e.j41(4,"div",50),e.EFF(5),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.nrm(15,"p-badge",51),e.k0s(),e.j41(16,"td"),e.EFF(17),e.nI1(18,"date"),e.k0s(),e.j41(19,"td")(20,"div",52)(21,"p-button",53),e.bIt("onClick",function(){const n=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.viewPartner(n))}),e.k0s(),e.j41(22,"p-button",54),e.bIt("onClick",function(){const n=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.editPartner(n))}),e.k0s()()()()}if(2&a){const t=o.$implicit,r=e.XpG(2);e.R7$(3),e.JRh(t.name),e.R7$(2),e.JRh(t.address||"-"),e.R7$(2),e.JRh(t.partnerType||"-"),e.R7$(2),e.JRh(t.contactName||"-"),e.R7$(2),e.JRh(t.phone||"-"),e.R7$(2),e.JRh(t.email||"-"),e.R7$(2),e.Y8G("value",r.getStatusLabel(t.isActive))("severity",r.getStatusSeverity(t.isActive)),e.R7$(2),e.JRh(e.i5U(18,11,t.updatedAt,"short")),e.R7$(4),e.Y8G("outlined",!0),e.R7$(),e.Y8G("outlined",!0)}}function T(a,o){1&a&&(e.j41(0,"tr")(1,"td",55),e.EFF(2,"No partners found"),e.k0s()())}function F(a,o){if(1&a&&(e.j41(0,"p-table",45),e.DNE(1,j,17,0,"ng-template",46)(2,E,23,14,"ng-template",47)(3,T,3,0,"ng-template",48),e.k0s()),2&a){const t=e.XpG();e.Y8G("value",t.filteredPartners)("paginator",!0)("rows",10)("showCurrentPageReport",!0)}}function k(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",56)(1,"div")(2,"label",26),e.EFF(3,"Name *"),e.k0s(),e.j41(4,"input",57),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.editingPartner.name,n)||(i.editingPartner.name=n),e.Njj(n)}),e.k0s()(),e.j41(5,"div")(6,"label",26),e.EFF(7,"Partner Type *"),e.k0s(),e.j41(8,"input",58),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.editingPartner.partnerType,n)||(i.editingPartner.partnerType=n),e.Njj(n)}),e.k0s()(),e.j41(9,"div")(10,"label",26),e.EFF(11,"Contact Name *"),e.k0s(),e.j41(12,"input",59),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.editingPartner.contactName,n)||(i.editingPartner.contactName=n),e.Njj(n)}),e.k0s()(),e.j41(13,"div")(14,"label",26),e.EFF(15,"Phone *"),e.k0s(),e.j41(16,"input",60),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.editingPartner.phone,n)||(i.editingPartner.phone=n),e.Njj(n)}),e.k0s()(),e.j41(17,"div")(18,"label",26),e.EFF(19,"Email *"),e.k0s(),e.j41(20,"input",61),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.editingPartner.email,n)||(i.editingPartner.email=n),e.Njj(n)}),e.k0s()(),e.j41(21,"div")(22,"label",26),e.EFF(23,"Status"),e.k0s(),e.j41(24,"p-dropdown",62),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.editingPartner.isActive,n)||(i.editingPartner.isActive=n),e.Njj(n)}),e.k0s()(),e.j41(25,"div",63)(26,"label",26),e.EFF(27,"Address *"),e.k0s(),e.j41(28,"textarea",64),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.editingPartner.address,n)||(i.editingPartner.address=n),e.Njj(n)}),e.k0s()(),e.j41(29,"div")(30,"label",26),e.EFF(31,"Created At"),e.k0s(),e.nrm(32,"input",65),e.nI1(33,"date"),e.k0s(),e.j41(34,"div")(35,"label",26),e.EFF(36,"Updated At"),e.k0s(),e.nrm(37,"input",65),e.nI1(38,"date"),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(4),e.R50("ngModel",t.editingPartner.name),e.Y8G("disabled","view"===t.dialogMode),e.R7$(4),e.R50("ngModel",t.editingPartner.partnerType),e.Y8G("disabled","view"===t.dialogMode),e.R7$(4),e.R50("ngModel",t.editingPartner.contactName),e.Y8G("disabled","view"===t.dialogMode),e.R7$(4),e.R50("ngModel",t.editingPartner.phone),e.Y8G("disabled","view"===t.dialogMode),e.R7$(4),e.R50("ngModel",t.editingPartner.email),e.Y8G("disabled","view"===t.dialogMode),e.R7$(4),e.R50("ngModel",t.editingPartner.isActive),e.Y8G("options",t.dialogStatusOptions)("disabled","view"===t.dialogMode),e.R7$(4),e.R50("ngModel",t.editingPartner.address),e.Y8G("disabled","view"===t.dialogMode),e.R7$(4),e.Y8G("ngModel",e.i5U(33,17,t.editingPartner.createdAt,"medium")),e.R7$(5),e.Y8G("ngModel",e.i5U(38,20,t.editingPartner.updatedAt,"medium"))}}function x(a,o){if(1&a){const t=e.RV6();e.j41(0,"p-button",68),e.bIt("onClick",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.savePartner())}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("loading",t.saving)}}function R(a,o){if(1&a){const t=e.RV6();e.j41(0,"p-button",66),e.bIt("onClick",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cancelEdit())}),e.k0s(),e.DNE(1,x,1,1,"p-button",67)}if(2&a){const t=e.XpG();e.Y8G("outlined",!0)("disabled",t.saving),e.R7$(),e.Y8G("ngIf","view"!==t.dialogMode)}}let w=(()=>{class a{messageService;partnerService;partners=[];filteredPartners=[];loading=!1;saving=!1;searchTerm="";selectedStatus="";selectedType="";showPartnerDialog=!1;dialogMode="create";editingPartner=null;statusOptions=[{label:"All Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}];typeOptions=[{label:"All Types",value:""}];dialogStatusOptions=[{label:"Active",value:!0},{label:"Inactive",value:!1}];constructor(t,r){this.messageService=t,this.partnerService=r}ngOnInit(){this.loadPartners()}loadPartners(){this.loading=!0,this.partnerService.listPartners(0,50).subscribe({next:t=>{const r=Array.isArray(t?.data)?t.data:[];this.partners=r.map(n=>this.mapPartner(n)),this.refreshTypeOptions(),this.applyFilters(),this.loading=!1},error:t=>{this.loading=!1,this.partners=[],this.filteredPartners=[],this.messageService.add({severity:"error",summary:"Error",detail:t?.error?.message||"Failed to load partners"})}})}applyFilters(){const t=this.searchTerm.trim().toLowerCase();this.filteredPartners=this.partners.filter(r=>(!t||r.name.toLowerCase().includes(t)||r.partnerType.toLowerCase().includes(t)||r.contactName.toLowerCase().includes(t)||r.phone.toLowerCase().includes(t)||r.email.toLowerCase().includes(t)||r.address.toLowerCase().includes(t))&&(!this.selectedStatus||(r.isActive?"active":"inactive")===this.selectedStatus)&&(!this.selectedType||r.partnerType===this.selectedType))}clearFilters(){this.searchTerm="",this.selectedStatus="",this.selectedType="",this.applyFilters()}createPartner(){this.dialogMode="create",this.editingPartner={id:"",name:"",partnerType:"",contactName:"",phone:"",email:"",address:"",isActive:!0,createdAt:null,updatedAt:null},this.showPartnerDialog=!0}viewPartner(t){this.openPartnerByMode(t,"view")}editPartner(t){this.openPartnerByMode(t,"edit")}savePartner(){if(!this.editingPartner||"view"===this.dialogMode)return void this.cancelEdit();const t={name:this.editingPartner.name.trim(),partner_type:this.editingPartner.partnerType.trim(),contact_name:this.editingPartner.contactName.trim(),phone:this.editingPartner.phone.trim(),email:this.editingPartner.email.trim(),address:this.editingPartner.address.trim(),is_active:this.editingPartner.isActive};t.name&&t.partner_type&&t.contact_name&&t.phone&&t.email&&t.address?(this.saving=!0,("edit"===this.dialogMode&&this.editingPartner.id?this.partnerService.updatePartner(this.editingPartner.id,t):this.partnerService.createPartner(t)).subscribe({next:()=>{this.saving=!1,this.showPartnerDialog=!1,this.editingPartner=null,this.messageService.add({severity:"success",summary:"Success",detail:"edit"===this.dialogMode?"Partner updated":"Partner created"}),this.loadPartners()},error:n=>{this.saving=!1,this.messageService.add({severity:"error",summary:"Error",detail:n?.error?.message||"Failed to save partner"})}})):this.messageService.add({severity:"warn",summary:"Validation",detail:"Name, type, contact, phone, email and address are required."})}cancelEdit(){this.showPartnerDialog=!1,this.editingPartner=null}getStatusSeverity(t){return t?"success":"danger"}getStatusLabel(t){return t?"active":"inactive"}getActivePartnersCount(){return this.partners.filter(t=>t.isActive).length}openPartnerByMode(t,r){this.dialogMode=r,this.saving=!0,this.partnerService.getPartner(t.id).subscribe({next:n=>{this.editingPartner=this.mapPartner(n?.data||t),this.showPartnerDialog=!0,this.saving=!1},error:()=>{this.editingPartner={...t},this.showPartnerDialog=!0,this.saving=!1}})}refreshTypeOptions(){const t=[...new Set(this.partners.map(r=>r.partnerType).filter(r=>!!r))];this.typeOptions=[{label:"All Types",value:""},...t.map(r=>({label:r,value:r}))]}mapPartner(t){return{id:String(t?._id||t?.id||""),name:String(t?.name||""),partnerType:String(t?.partner_type||""),contactName:String(t?.contact_name||""),phone:String(t?.phone||""),email:String(t?.email||""),address:String(t?.address||""),isActive:!1!==t?.is_active,createdAt:t?.created_at?new Date(t.created_at):null,updatedAt:t?.updated_at?new Date(t.updated_at):null}}static \u0275fac=function(r){return new(r||a)(e.rXU(g.bg),e.rXU(C.KM))};static \u0275cmp=e.VBU({type:a,selectors:[["app-partners"]],features:[e.Jv_([g.bg])],decls:73,vars:22,consts:[[1,"bg-gray-50","min-h-screen","p-6"],[1,"bg-white","rounded-lg","shadow-sm","p-6","mb-6"],[1,"flex","flex-col","lg:flex-row","lg:items-center","lg:justify-between","gap-4"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-gradient-to-br","from-cyan-500","to-blue-600","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-briefcase","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"flex","items-center","gap-2"],["icon","pi pi-refresh","severity","info","pTooltip","Refresh",1,"hidden","sm:inline-flex",3,"onClick","outlined","rounded"],["label","Add Partner","icon","pi pi-plus","severity","primary",3,"onClick"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-6"],[1,"bg-white","rounded-lg","shadow-sm","p-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-600"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-briefcase","text-blue-600","text-xl"],[1,"text-3xl","font-bold","text-green-600"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-check-circle","text-green-600","text-xl"],[1,"text-3xl","font-bold","text-indigo-600"],[1,"w-12","h-12","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],[1,"pi","pi-sitemap","text-indigo-600","text-xl"],[1,"bg-white","rounded-lg","shadow-sm","mb-6"],[1,"p-6"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"p-input-icon-left","w-full"],[1,"pi","pi-search"],["pInputText","","placeholder","Search by name, contact, phone...",1,"w-full",3,"ngModelChange","input","ngModel"],["optionLabel","label","optionValue","value",1,"w-full",3,"ngModelChange","onChange","ngModel","options"],[1,"flex","items-end"],["label","Clear Filters","icon","pi pi-times","severity","secondary",3,"onClick","outlined"],[1,"bg-white","rounded-xl","border","border-gray-200","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200","flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],["class","bg-white rounded-xl border border-gray-200 p-10 text-center",4,"ngIf"],["styleClass","p-datatable-sm","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} partners",3,"value","paginator","rows","showCurrentPageReport",4,"ngIf"],[3,"visibleChange","visible","header","modal","closable"],["class","grid grid-cols-1 md:grid-cols-2 gap-4",4,"ngIf"],["pTemplate","footer"],[1,"bg-white","rounded-xl","border","border-gray-200","p-10","text-center"],[1,"w-12","h-12","bg-blue-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-3"],[1,"pi","pi-spin","pi-spinner","text-blue-500","text-xl"],["styleClass","p-datatable-sm","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} partners",3,"value","paginator","rows","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"font-semibold","text-gray-900"],[1,"text-xs","text-gray-500","mt-0.5"],[3,"value","severity"],[1,"flex","gap-1"],["icon","pi pi-eye","size","small",3,"onClick","outlined"],["icon","pi pi-pencil","size","small",3,"onClick","outlined"],["colspan","8",1,"text-center","py-12","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["pInputText","","placeholder","Partner name",1,"w-full",3,"ngModelChange","ngModel","disabled"],["pInputText","","placeholder","e.g. supplier, distributor",1,"w-full",3,"ngModelChange","ngModel","disabled"],["pInputText","","placeholder","Contact person",1,"w-full",3,"ngModelChange","ngModel","disabled"],["pInputText","","placeholder","Phone number",1,"w-full",3,"ngModelChange","ngModel","disabled"],["pInputText","","placeholder","Email",1,"w-full",3,"ngModelChange","ngModel","disabled"],["optionLabel","label","optionValue","value",1,"w-full",3,"ngModelChange","ngModel","options","disabled"],[1,"md:col-span-2"],["pInputTextarea","","rows","3","placeholder","Address",1,"w-full",3,"ngModelChange","ngModel","disabled"],["pInputText","","disabled","",1,"w-full",3,"ngModel"],["label","Close",3,"onClick","outlined","disabled"],["label","Save","icon","pi pi-check",3,"loading","onClick",4,"ngIf"],["label","Save","icon","pi pi-check",3,"onClick","loading"]],template:function(r,n){1&r&&(e.nrm(0,"p-toast"),e.j41(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e.nrm(6,"i",5),e.k0s(),e.j41(7,"div")(8,"h1",6),e.EFF(9,"Partner Management"),e.k0s(),e.j41(10,"p",7),e.EFF(11,"Manage retail partners from Retail Domain API"),e.k0s()()(),e.j41(12,"div",8)(13,"p-button",9),e.bIt("onClick",function(){return n.loadPartners()}),e.k0s(),e.j41(14,"p-button",10),e.bIt("onClick",function(){return n.createPartner()}),e.k0s()()()(),e.j41(15,"div",11)(16,"div",12)(17,"div",13)(18,"div")(19,"p",14),e.EFF(20,"Total Partners"),e.k0s(),e.j41(21,"p",6),e.EFF(22),e.k0s()(),e.j41(23,"div",15),e.nrm(24,"i",16),e.k0s()()(),e.j41(25,"div",12)(26,"div",13)(27,"div")(28,"p",14),e.EFF(29,"Active Partners"),e.k0s(),e.j41(30,"p",17),e.EFF(31),e.k0s()(),e.j41(32,"div",18),e.nrm(33,"i",19),e.k0s()()(),e.j41(34,"div",12)(35,"div",13)(36,"div")(37,"p",14),e.EFF(38,"Partner Types"),e.k0s(),e.j41(39,"p",20),e.EFF(40),e.k0s()(),e.j41(41,"div",21),e.nrm(42,"i",22),e.k0s()()()(),e.j41(43,"div",23)(44,"div",24)(45,"div",25)(46,"div")(47,"label",26),e.EFF(48,"Search"),e.k0s(),e.j41(49,"span",27),e.nrm(50,"i",28),e.j41(51,"input",29),e.mxI("ngModelChange",function(s){return e.DH7(n.searchTerm,s)||(n.searchTerm=s),s}),e.bIt("input",function(){return n.applyFilters()}),e.k0s()()(),e.j41(52,"div")(53,"label",26),e.EFF(54,"Status"),e.k0s(),e.j41(55,"p-dropdown",30),e.mxI("ngModelChange",function(s){return e.DH7(n.selectedStatus,s)||(n.selectedStatus=s),s}),e.bIt("onChange",function(){return n.applyFilters()}),e.k0s()(),e.j41(56,"div")(57,"label",26),e.EFF(58,"Partner Type"),e.k0s(),e.j41(59,"p-dropdown",30),e.mxI("ngModelChange",function(s){return e.DH7(n.selectedType,s)||(n.selectedType=s),s}),e.bIt("onChange",function(){return n.applyFilters()}),e.k0s()(),e.j41(60,"div",31)(61,"p-button",32),e.bIt("onClick",function(){return n.clearFilters()}),e.k0s()()()()(),e.j41(62,"div",33)(63,"div",34)(64,"h2",35),e.EFF(65),e.k0s(),e.j41(66,"p",36),e.EFF(67,"Source: Retail Domain API"),e.k0s()(),e.DNE(68,y,5,0,"div",37)(69,F,4,4,"p-table",38),e.k0s(),e.j41(70,"p-dialog",39),e.mxI("visibleChange",function(s){return e.DH7(n.showPartnerDialog,s)||(n.showPartnerDialog=s),s}),e.DNE(71,k,39,23,"div",40)(72,R,2,3,"ng-template",41),e.k0s()()),2&r&&(e.R7$(13),e.Y8G("outlined",!0)("rounded",!0),e.R7$(9),e.JRh(n.partners.length),e.R7$(9),e.JRh(n.getActivePartnersCount()),e.R7$(9),e.JRh(n.typeOptions.length-1),e.R7$(11),e.R50("ngModel",n.searchTerm),e.R7$(4),e.R50("ngModel",n.selectedStatus),e.Y8G("options",n.statusOptions),e.R7$(4),e.R50("ngModel",n.selectedType),e.Y8G("options",n.typeOptions),e.R7$(2),e.Y8G("outlined",!0),e.R7$(4),e.SpI("Partner List (",n.filteredPartners.length,")"),e.R7$(3),e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",!n.loading),e.R7$(),e.Aen(e.lJ4(21,M)),e.R50("visible",n.showPartnerDialog),e.Y8G("header","create"===n.dialogMode?"Add Partner":"edit"===n.dialogMode?"Edit Partner":"Partner Detail")("modal",!0)("closable",!n.saving),e.R7$(),e.Y8G("ngIf",n.editingPartner))},dependencies:[p.MD,p.bT,p.vh,d.YN,d.me,d.BC,d.vS,_.tm,_.$n,g.Ei,u.bG,u.XI,m.Ph,m.lG,h.um,h.Sm,f.Z2,P.kr,P.ms,v.EJ,v.Ex,b.MB,b.y8],encapsulation:2})}return a})()}}]);