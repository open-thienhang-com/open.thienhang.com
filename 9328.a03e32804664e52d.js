"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[9328],{9328:(W,h,a)=>{a.r(h),a.d(h,{CheckinComponent:()=>V});var p=a(2881),d=a(9417),F=a(5207),m=a(1141),k=a(491),C=a(1570),u=a(2242),j=a(1305),f=a(1003),M=a(8150),O=a(6221),P=a(6150),E=a(7722),v=a(4799),I=a(8542),D=a(5716),b=a(935),_=a(5779),T=a(5545),g=a(6432),e=a(1360);const B=()=>({width:"50vw"}),R=()=>[10,25,50],S=()=>["id","apartment_id","account_id"];function y(i,r){1&i&&e.eu8(0)}function N(i,r){if(1&i&&(e.j41(0,"p-card"),e.DNE(1,y,1,0,"ng-container",18),e.k0s()),2&i){e.XpG();const n=e.sdS(28);e.R7$(),e.Y8G("ngTemplateOutlet",n)}}function A(i,r){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Booking ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Apartment"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Guest ID"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Check-in Date"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Check-out Date"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Guests"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Status"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Check-in Status"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Actions"),e.k0s()())}function w(i,r){if(1&i){const n=e.RV6();e.j41(0,"tr")(1,"td")(2,"span",23),e.EFF(3),e.k0s()(),e.j41(4,"td")(5,"span",24),e.EFF(6),e.k0s()(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.nrm(10,"i",25),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td"),e.nrm(14,"i",25),e.EFF(15),e.nI1(16,"date"),e.k0s(),e.j41(17,"td"),e.nrm(18,"i",26),e.EFF(19),e.k0s(),e.j41(20,"td"),e.nrm(21,"p-badge",27),e.nI1(22,"titlecase"),e.k0s(),e.j41(23,"td"),e.nrm(24,"p-tag",27),e.k0s(),e.j41(25,"td")(26,"button",28),e.bIt("click",function(){const t=e.eBV(n).$implicit,c=e.XpG(2);return e.Njj(c.openCheckinDialog(t))}),e.k0s()()()}if(2&i){const n=r.$implicit,o=e.XpG(2);e.R7$(3),e.JRh(n.id),e.R7$(3),e.JRh(o.getApartmentName(n.apartment_id)),e.R7$(2),e.JRh(n.account_id),e.R7$(3),e.SpI(" ",e.i5U(12,11,n.check_in,"short")," "),e.R7$(4),e.SpI(" ",e.i5U(16,14,n.check_out,"short")," "),e.R7$(4),e.SpI(" ",n.guest_count," "),e.R7$(2),e.Y8G("value",e.bMT(22,17,n.booking_status))("severity",o.getStatusSeverity(n.booking_status)),e.R7$(3),e.Y8G("value",o.getCheckinStatus(n))("severity",o.getCheckinStatusSeverity(n)),e.R7$(2),e.Y8G("disabled",n.booking_status===o.BookingStatus.COMPLETED)}}function U(i,r){1&i&&(e.j41(0,"tr")(1,"td",29)(2,"div",30),e.nrm(3,"i",31),e.j41(4,"p"),e.EFF(5,"No bookings found for check-in"),e.k0s()()()())}function x(i,r){if(1&i&&(e.j41(0,"p-table",19),e.DNE(1,A,19,0,"ng-template",20)(2,w,27,19,"ng-template",21)(3,U,6,0,"ng-template",22),e.k0s()),2&i){const n=e.XpG();e.Y8G("value",n.filteredBookings)("paginator",!0)("rows",10)("rowsPerPageOptions",e.lJ4(6,R))("showCurrentPageReport",!0)("globalFilterFields",e.lJ4(7,S))}}function L(i,r){1&i&&(e.j41(0,"div",32),e.nrm(1,"p-skeleton",33),e.k0s())}function G(i,r){if(1&i){const n=e.RV6();e.j41(0,"div",34)(1,"div",35)(2,"h3"),e.EFF(3,"Booking Details"),e.k0s(),e.j41(4,"div",36)(5,"div",37)(6,"span",38),e.EFF(7,"Booking ID:"),e.k0s(),e.j41(8,"span",39),e.EFF(9),e.k0s()(),e.j41(10,"div",37)(11,"span",38),e.EFF(12,"Apartment:"),e.k0s(),e.j41(13,"span",39),e.EFF(14),e.k0s()(),e.j41(15,"div",37)(16,"span",38),e.EFF(17,"Guest ID:"),e.k0s(),e.j41(18,"span",39),e.EFF(19),e.k0s()(),e.j41(20,"div",37)(21,"span",38),e.EFF(22,"Check-in:"),e.k0s(),e.j41(23,"span",39),e.EFF(24),e.nI1(25,"date"),e.k0s()(),e.j41(26,"div",37)(27,"span",38),e.EFF(28,"Check-out:"),e.k0s(),e.j41(29,"span",39),e.EFF(30),e.nI1(31,"date"),e.k0s()(),e.j41(32,"div",37)(33,"span",38),e.EFF(34,"Guests:"),e.k0s(),e.j41(35,"span",39),e.EFF(36),e.k0s()(),e.j41(37,"div",37)(38,"span",38),e.EFF(39,"Duration:"),e.k0s(),e.j41(40,"span",39),e.EFF(41),e.k0s()(),e.j41(42,"div",37)(43,"span",38),e.EFF(44,"Total Price:"),e.k0s(),e.j41(45,"span",40),e.EFF(46),e.nI1(47,"currency"),e.k0s()()()(),e.j41(48,"div",41)(49,"label"),e.EFF(50,"Check-in Notes (Optional)"),e.k0s(),e.j41(51,"textarea",42),e.mxI("ngModelChange",function(t){e.eBV(n);const c=e.XpG();return e.DH7(c.checkinNotes,t)||(c.checkinNotes=t),e.Njj(t)}),e.EFF(52,"        "),e.k0s()()()}if(2&i){const n=e.XpG();e.R7$(9),e.JRh(n.selectedBooking.id),e.R7$(5),e.JRh(n.getApartmentName(n.selectedBooking.apartment_id)),e.R7$(5),e.JRh(n.selectedBooking.account_id),e.R7$(5),e.JRh(e.i5U(25,9,n.selectedBooking.check_in,"short")),e.R7$(6),e.JRh(e.i5U(31,12,n.selectedBooking.check_out,"short")),e.R7$(6),e.JRh(n.selectedBooking.guest_count),e.R7$(5),e.SpI("",n.selectedBooking.count_of_days," day(s)"),e.R7$(5),e.JRh(e.bMT(47,15,n.selectedBooking.total_price)),e.R7$(5),e.R50("ngModel",n.checkinNotes)}}function K(i,r){if(1&i){const n=e.RV6();e.j41(0,"button",43),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.closeCheckinDialog())}),e.k0s(),e.j41(1,"button",44),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.processCheckin())}),e.k0s()}}let V=(()=>{class i{hotelService;messageService;confirmationService;bookings=[];filteredBookings=[];apartments=[];loading=!1;searchTerm="";selectedStatus=null;selectedDate=null;showCheckinDialog=!1;selectedBooking=null;checkinNotes="";statusOptions=[{label:"All Statuses",value:null},{label:"Pending",value:g.cg.PENDING},{label:"Confirmed",value:g.cg.CONFIRMED},{label:"Completed",value:g.cg.COMPLETED}];constructor(n,o,t){this.hotelService=n,this.messageService=o,this.confirmationService=t}ngOnInit(){this.loadBookings(),this.loadApartments()}loadBookings(){this.loading=!0,this.hotelService.getBookings().subscribe({next:n=>{this.bookings=n.data||[],this.filterBookings(),this.loading=!1},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load bookings"}),this.loading=!1}})}loadApartments(){this.hotelService.getApartments().subscribe({next:n=>{this.apartments=n.data||[]},error:()=>{}})}filterBookings(){let n=[...this.bookings];if(this.searchTerm){const o=this.searchTerm.toLowerCase();n=n.filter(t=>t.id.toLowerCase().includes(o)||t.apartment_id.toLowerCase().includes(o)||t.account_id.toLowerCase().includes(o))}if(this.selectedStatus&&(n=n.filter(o=>o.booking_status===this.selectedStatus)),this.selectedDate){const o=this.selectedDate.toISOString().split("T")[0];n=n.filter(t=>new Date(t.check_in).toISOString().split("T")[0]===o)}n=n.filter(o=>o.booking_status===g.cg.PENDING||o.booking_status===g.cg.CONFIRMED),this.filteredBookings=n}onSearch(){this.filterBookings()}onStatusChange(){this.filterBookings()}onDateChange(){this.filterBookings()}openCheckinDialog(n){this.selectedBooking=n,this.checkinNotes="",this.showCheckinDialog=!0}closeCheckinDialog(){this.showCheckinDialog=!1,this.selectedBooking=null,this.checkinNotes=""}processCheckin(){if(!this.selectedBooking)return;const n={...this.selectedBooking,booking_status:g.cg.CONFIRMED};this.loading=!0,this.hotelService.updateBooking(this.selectedBooking.id,n).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Check-in processed successfully"}),this.closeCheckinDialog(),this.loadBookings()},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to process check-in"}),this.loading=!1}})}getStatusSeverity(n){return{confirmed:"success",pending:"warning",canceled:"danger",completed:"info",no_show:"secondary"}[n]||"secondary"}getApartmentName(n){const o=this.apartments.find(t=>(t.id||t._id)===n);return o?o.title:n}isCheckinToday(n){const o=new Date;return new Date(n.check_in).toDateString()===o.toDateString()}isCheckinOverdue(n){const o=new Date;return new Date(n.check_in)<o&&n.booking_status===g.cg.CONFIRMED}getCheckinStatus(n){return this.isCheckinOverdue(n)?"Overdue":this.isCheckinToday(n)?"Today":"Upcoming"}getCheckinStatusSeverity(n){return this.isCheckinOverdue(n)?"danger":this.isCheckinToday(n)?"warning":"info"}static \u0275fac=function(o){return new(o||i)(e.rXU(T.g),e.rXU(_.bg),e.rXU(_.td))};static \u0275cmp=e.VBU({type:i,selectors:[["app-hotel-checkin"]],features:[e.Jv_([_.bg,_.td])],decls:34,vars:15,consts:[["bookingsTable",""],["loadingTemplate",""],[1,"checkin-page"],[1,"page-header"],[1,"header-content"],[1,"subtitle"],[1,"header-actions"],["pButton","","type","button","label","Refresh","icon","pi pi-refresh",1,"p-button-secondary",3,"click"],[1,"filters-card"],[1,"filters"],[1,"filter-group"],["pInputText","","type","text","placeholder","Search by Booking ID, Apartment, or Guest ID",3,"ngModelChange","input","ngModel"],["optionLabel","label","optionValue","value","placeholder","All Statuses",3,"ngModelChange","onChange","options","ngModel"],["placeholder","Select Date",3,"ngModelChange","onSelect","ngModel","showIcon","showClear"],[4,"ngIf","ngIfElse"],["header","Process Check-in",3,"visibleChange","onHide","visible","modal","closable"],["class","checkin-dialog-content",4,"ngIf"],["pTemplate","footer"],[4,"ngTemplateOutlet"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-sm",3,"value","paginator","rows","rowsPerPageOptions","showCurrentPageReport","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"booking-id"],[1,"apartment-name"],[1,"pi","pi-calendar","mr-1"],[1,"pi","pi-users","mr-1"],[3,"value","severity"],["pButton","","type","button","icon","pi pi-sign-in","label","Check-in",1,"p-button-sm","p-button-success",3,"click","disabled"],["colspan","9",1,"text-center"],[1,"empty-state"],[1,"pi","pi-inbox"],[1,"loading-container"],["height","300px"],[1,"checkin-dialog-content"],[1,"booking-info"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"value","price"],[1,"checkin-notes"],["pInputTextarea","","rows","4","placeholder","Add any notes about this check-in...",3,"ngModelChange","ngModel"],["pButton","","type","button","label","Cancel","icon","pi pi-times",1,"p-button-secondary",3,"click"],["pButton","","type","button","label","Process Check-in","icon","pi pi-check",1,"p-button-success",3,"click"]],template:function(o,t){if(1&o){const c=e.RV6();e.j41(0,"div",2),e.nrm(1,"p-toast")(2,"p-confirmDialog"),e.j41(3,"div",3)(4,"div",4)(5,"div")(6,"h1"),e.EFF(7,"Check-in Management"),e.k0s(),e.j41(8,"p",5),e.EFF(9,"Process guest check-ins and manage arrivals"),e.k0s()(),e.j41(10,"div",6)(11,"button",7),e.bIt("click",function(){return e.eBV(c),e.Njj(t.loadBookings())}),e.k0s()()()(),e.j41(12,"p-card",8)(13,"div",9)(14,"div",10)(15,"label"),e.EFF(16,"Search"),e.k0s(),e.j41(17,"input",11),e.mxI("ngModelChange",function(s){return e.eBV(c),e.DH7(t.searchTerm,s)||(t.searchTerm=s),e.Njj(s)}),e.bIt("input",function(){return e.eBV(c),e.Njj(t.onSearch())}),e.k0s()(),e.j41(18,"div",10)(19,"label"),e.EFF(20,"Status"),e.k0s(),e.j41(21,"p-dropdown",12),e.mxI("ngModelChange",function(s){return e.eBV(c),e.DH7(t.selectedStatus,s)||(t.selectedStatus=s),e.Njj(s)}),e.bIt("onChange",function(){return e.eBV(c),e.Njj(t.onStatusChange())}),e.k0s()(),e.j41(22,"div",10)(23,"label"),e.EFF(24,"Check-in Date"),e.k0s(),e.j41(25,"p-calendar",13),e.mxI("ngModelChange",function(s){return e.eBV(c),e.DH7(t.selectedDate,s)||(t.selectedDate=s),e.Njj(s)}),e.bIt("onSelect",function(){return e.eBV(c),e.Njj(t.onDateChange())}),e.k0s()()()(),e.DNE(26,N,2,1,"p-card",14)(27,x,4,8,"ng-template",null,0,e.C5r)(29,L,2,0,"ng-template",null,1,e.C5r),e.j41(31,"p-dialog",15),e.mxI("visibleChange",function(s){return e.eBV(c),e.DH7(t.showCheckinDialog,s)||(t.showCheckinDialog=s),e.Njj(s)}),e.bIt("onHide",function(){return e.eBV(c),e.Njj(t.closeCheckinDialog())}),e.DNE(32,G,53,17,"div",16)(33,K,2,0,"ng-template",17),e.k0s()()}if(2&o){const c=e.sdS(30);e.R7$(17),e.R50("ngModel",t.searchTerm),e.R7$(4),e.Y8G("options",t.statusOptions),e.R50("ngModel",t.selectedStatus),e.R7$(4),e.R50("ngModel",t.selectedDate),e.Y8G("showIcon",!0)("showClear",!0),e.R7$(),e.Y8G("ngIf",!t.loading)("ngIfElse",c),e.R7$(5),e.Aen(e.lJ4(14,B)),e.R50("visible",t.showCheckinDialog),e.Y8G("modal",!0)("closable",!0),e.R7$(),e.Y8G("ngIf",t.selectedBooking)}},dependencies:[p.MD,p.bT,p.T3,p.PV,p.oe,p.vh,d.YN,d.me,d.BC,d.vS,F.iI,m.tm,m._f,_.Ei,k.Dw,k.Zp,C.Ph,C.lG,u.um,u.Sm,j.Z2,f.rO,f.Vv,M.kr,M.ms,O.bG,O.XI,P.EJ,P.Ex,E.MB,E.y8,v.FP,v.TM,I.Ss,D.k2,D.EA,b.$C,b.vw],styles:[".checkin-page[_ngcontent-%COMP%]{padding:2rem}.checkin-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;background:linear-gradient(135deg,var(--p-surface-0) 0%,rgba(var(--p-primary-500),.05) 100%);padding:2rem;border-radius:12px;border-bottom:2px solid rgba(var(--p-primary-500),.2)}.checkin-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}.checkin-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:2rem;font-weight:700;color:var(--p-surface-900)}.checkin-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:var(--p-surface-600)}.checkin-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]{margin-bottom:2rem}.checkin-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.checkin-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.checkin-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--p-surface-700);font-size:.9rem}.checkin-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{padding:2rem}.checkin-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:3rem;text-align:center;color:var(--p-surface-600)}.checkin-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;color:var(--p-surface-400)}.checkin-page[_ngcontent-%COMP%]   .booking-id[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.9rem}.checkin-page[_ngcontent-%COMP%]   .apartment-name[_ngcontent-%COMP%]{font-weight:500}.checkin-page[_ngcontent-%COMP%]   .checkin-dialog-content[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]{margin-bottom:2rem}.checkin-page[_ngcontent-%COMP%]   .checkin-dialog-content[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--p-surface-900)}.checkin-page[_ngcontent-%COMP%]   .checkin-dialog-content[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.checkin-page[_ngcontent-%COMP%]   .checkin-dialog-content[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.75rem;background:var(--p-surface-50);border-radius:6px}.checkin-page[_ngcontent-%COMP%]   .checkin-dialog-content[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:var(--p-surface-600)}.checkin-page[_ngcontent-%COMP%]   .checkin-dialog-content[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--p-surface-900);font-weight:600}.checkin-page[_ngcontent-%COMP%]   .checkin-dialog-content[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.price[_ngcontent-%COMP%]{color:var(--p-primary-600)}.checkin-page[_ngcontent-%COMP%]   .checkin-dialog-content[_ngcontent-%COMP%]   .checkin-notes[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.checkin-page[_ngcontent-%COMP%]   .checkin-dialog-content[_ngcontent-%COMP%]   .checkin-notes[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--p-surface-700)}"]})}return i})()}}]);