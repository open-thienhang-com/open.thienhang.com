"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8512],{2215:(v,d,s)=>{s.d(d,{G:()=>E});var u=s(7643),p=s(8810),c=s(6354),a=s(9437),l=s(1360),o=s(4412),g=s(1985);let m=(()=>{class i{configs={local:{environment:"local",host:"http://localhost:8081",name:"Local Development"},production:{environment:"production",host:"https://test-api.routing-deviation.ghn.tech",name:"Production API"}};currentConfigSubject=new o.t(this.configs.local);currentConfig$=this.currentConfigSubject.asObservable();constructor(){this.loadSavedConfig()}getCurrentConfig(){return this.currentConfigSubject.value}getHost(){return this.getCurrentConfig().host}getEnvironment(){return this.getCurrentConfig().environment}switchEnvironment(e){const t=this.configs[e];t&&(this.currentConfigSubject.next(t),this.saveConfig(t),console.log(`[API Config] Switched to ${t.name} (${t.host})`))}getAvailableConfigs(){return Object.values(this.configs)}isLocal(){return"local"===this.getEnvironment()}isProduction(){return"production"===this.getEnvironment()}testConnection(){const e=this.getHost(),t=`${e}/_`;return new g.c(r=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).then(n=>{r.next(n.ok?{success:!0,host:e}:{success:!1,host:e,status:n.status}),r.complete()}).catch(n=>{r.next({success:!1,host:e,error:n.message}),r.complete()})})}loadSavedConfig(){try{if(typeof window<"u"&&window.localStorage){const e=localStorage.getItem("api-config");if(e){const t=JSON.parse(e);t.environment&&this.configs[t.environment]&&this.currentConfigSubject.next(this.configs[t.environment])}}}catch(e){console.warn("[API Config] Failed to load saved config:",e)}}saveConfig(e){try{typeof window<"u"&&window.localStorage&&localStorage.setItem("api-config",JSON.stringify({environment:e.environment}))}catch(t){console.warn("[API Config] Failed to save config:",t)}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),E=(()=>{class i{http;apiConfig;defaultTimeout=3e4;authToken="ZCXb4Thq56HgXlQC4IKS4EcghaYt6xxmIoHdazBJgVBRAwYqbLhx9rE3QTuzIqpo";constructor(e,t){this.http=e,this.apiConfig=t}getAuthHeaders(){const e={"Content-Type":"application/json"},t=this.authToken;return t&&(e.Authorization=`Bearer ${t}`),new u.Lr(e)}getHost(){return this.apiConfig.getHost()}getUrl(e){return this.getHost()+(e.startsWith("/")?e:"/"+e)}handleError(e){let t;return t=typeof ErrorEvent<"u"&&e.error instanceof ErrorEvent?{status:0,message:"Network error",error:"NETWORK_ERROR"}:{status:e.status,message:e.error?.message||e.message||"Server error",error:e.error?.error||"SERVER_ERROR",data:e.error},console.error("[API Error]",t),(0,p.$)(()=>t)}transformResponse(e){return{ok:!0,status:200,data:e,message:"Success"}}get(e,t){const r=this.getUrl(e);let n=new u.Nl;return t&&Object.keys(t).forEach(h=>{null!=t[h]&&(n=n.set(h,t[h].toString()))}),console.log(`[API] GET ${r}`,t),this.http.get(r,{params:n,headers:this.getAuthHeaders()}).pipe((0,c.T)(h=>this.transformResponse(h)),(0,a.W)(h=>this.handleError(h)))}post(e,t){const r=this.getUrl(e);return console.log(`[API] POST ${r}`,t),this.http.post(r,t,{headers:this.getAuthHeaders()}).pipe((0,c.T)(n=>this.transformResponse(n)),(0,a.W)(n=>this.handleError(n)))}put(e,t){const r=this.getUrl(e);return console.log(`[API] PUT ${r}`,t),this.http.put(r,t,{headers:this.getAuthHeaders()}).pipe((0,c.T)(n=>this.transformResponse(n)),(0,a.W)(n=>this.handleError(n)))}delete(e,t){const r=this.getUrl(e);return console.log(`[API] DELETE ${r}`,t),this.http.delete(r,{headers:this.getAuthHeaders(),body:t}).pipe((0,c.T)(n=>this.transformResponse(n)),(0,a.W)(n=>this.handleError(n)))}patch(e,t){const r=this.getUrl(e);return console.log(`[API] PATCH ${r}`,t),this.http.patch(r,t,{headers:this.getAuthHeaders()}).pipe((0,c.T)(n=>this.transformResponse(n)),(0,a.W)(n=>this.handleError(n)))}upload(e,t){const r=this.getUrl(e);console.log(`[API] UPLOAD ${r}`);const n={},h=this.authToken;return h&&(n.Authorization=`Bearer ${h}`),this.http.post(r,t,{headers:new u.Lr(n)}).pipe((0,c.T)(f=>this.transformResponse(f)),(0,a.W)(f=>this.handleError(f)))}static \u0275fac=function(t){return new(t||i)(l.KVO(u.Qq),l.KVO(m))};static \u0275prov=l.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},8512:(v,d,s)=>{s.d(d,{q:()=>c});var u=s(1360),p=s(2215);let c=(()=>{class a{api;constructor(o){this.api=o}getDatasets(o={}){return this.api.post("/routing-deviation/internal/dataset/list",o)}getDataset(o){return this.api.post("/routing-deviation/internal/dataset/get",{dataset_id:o})}getDatasetTypes(){return this.api.post("/routing-deviation/internal/dataset/get-type")}getDatasetQuery(){return this.api.post("/routing-deviation/internal/dataset/get-query")}getDatasetMetadata(){return this.api.post("/routing-deviation/internal/dataset/get-metadata")}createDataset(o){return this.api.post("/routing-deviation/internal/dataset",o)}updateDataset(o,g){return this.api.post(`/routing-deviation/internal/dataset/${o}`,g)}getWarehouses(o){return this.api.post("/routing-deviation/internal/dataset/get-warehouses",o)}getDemands(o){return this.api.post("/routing-deviation/internal/dataset/get-demands",o)}getDemandsWithTimeRange(o){return this.api.post("/routing-deviation/internal/dataset/get-demands",o)}getDemandsShiftRatio(o){return this.api.post("/routing-deviation/internal/dataset/get-demands-shift-ratio",o)}getDemandsByDays(o){return this.api.post("/routing-deviation/internal/dataset/get-demands-by-days",o)}static \u0275fac=function(g){return new(g||a)(u.KVO(p.G))};static \u0275prov=u.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);