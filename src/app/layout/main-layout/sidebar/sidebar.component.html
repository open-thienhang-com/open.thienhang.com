<div class="flex flex-col h-full">
  <div class="flex header items-center justify-between px-6 shrink-0">
    <span class="text-xl font-semibold text-primary">OPENMESH</span>
  </div>
  <div class="overflow-y-auto">
    <ul class="list-none p-4 m-0">
      <li *ngFor="let item of menu">
        <!-- Group or single item -->
        <div
          class="p-4 flex items-center justify-between text-surface-600 dark:text-surface-200 cursor-pointer p-ripple"
          pRipple
          (click)="item.children ? too(item) : null">

          <ng-container *ngIf="item.url; else labelOnly">
            <a
              [routerLink]="item.url"
              class="flex items-center gap-2 dark:text-surface-200 no-underline w-full">
              <i class="{{ item.icon }}"></i>
              <span class="font-medium">{{ item.label }}</span>
            </a>
          </ng-container>
          <ng-template #labelOnly>
            <div class="flex items-center gap-2">
              <i class="{{ item.icon }}"></i>
              <span class="font-medium">{{ item.label }}</span>
            </div>
          </ng-template>

          <i *ngIf="item.children"
            class="pi pi-chevron-down transition-transform duration-300"
            [class.rotate-[-90deg]]="!item.expanded"
            [class.rotate-0]="item.expanded"></i>
        </div>

        <!-- Children list -->
        <ul
          *ngIf="item.children && item.expanded"
          [@expandCollapse]
          class="list-none p-0 pl-4 m-0 overflow-hidden">
          <li *ngFor="let child of item.children">
            <a
              [routerLink]="child.url"
              class="flex items-center cursor-pointer p-4 rounded-border text-surface-700 dark:text-surface-100 hover:bg-surface-100 dark:hover:bg-surface-700 duration-150 transition-colors p-ripple"
              pRipple>
              <i class="{{ child.icon }} mr-2"></i>
              <span class="font-medium">{{ child.label }}</span>
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="mt-auto">
    <hr class="mb-4 mx-4 border-t border-0 border-surface"/>
    <app-current-user></app-current-user>
  </div>
</div>
