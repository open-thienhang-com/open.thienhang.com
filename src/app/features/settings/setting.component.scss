:host {
    display: block;
    width: 100%;
    min-height: calc(100vh - 4rem);
}

// Improved layout
.settings-container {
    max-width: 1400px;
    margin: 0 auto;
}

// Tab customizations with modern design
:host ::ng-deep {
    .p-tabview {
        .p-tabview-nav {
            background: white;
            border-radius: 12px;
            padding: 0.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            margin-bottom: 2rem;
            gap: 0.5rem;

            .p-tabview-nav-link {
                padding: 0.875rem 1.5rem;
                font-weight: 600;
                color: var(--text-color-secondary);
                border: none;
                background: transparent;
                border-radius: 8px;
                transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
                display: flex;
                align-items: center;
                gap: 0.625rem;

                i {
                    font-size: 1.125rem;
                }

                &:hover {
                    background: var(--surface-100);
                    color: var(--primary-color);
                }

                &:focus {
                    outline: none;
                    box-shadow: 0 0 0 2px var(--primary-100);
                }

                &.p-highlight {
                    background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
                    color: white;
                    box-shadow: 0 4px 12px rgba(var(--primary-rgb), 0.25);

                    &:hover {
                        transform: translateY(-1px);
                        box-shadow: 0 6px 16px rgba(var(--primary-rgb), 0.3);
                    }
                }
            }
        }

        .p-tabview-panels {
            padding: 0;
        }
    }

    // Enhanced Card design
    .p-card {
        border: 1px solid var(--surface-border);
        border-radius: 12px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;

        &:hover {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }

        .p-card-header {
            background: linear-gradient(to right, var(--surface-50), white);
            border-bottom: 1px solid var(--surface-border);
            padding: 1.25rem 1.5rem;

            h3 {
                font-weight: 600;
                font-size: 1.125rem;
                margin: 0;
            }

            i {
                color: var(--primary-500);
                font-size: 1.25rem;
            }
        }

        .p-card-content {
            padding: 1.5rem;
        }

        .p-card-footer {
            background: var(--surface-50);
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--surface-border);
        }
    }

    // Form enhancements
    .p-inputtext,
    .p-dropdown,
    .p-dropdown-panel {
        border-radius: 8px;
        border: 1px solid var(--surface-300);
        transition: all 0.2s ease;

        &:enabled:hover {
            border-color: var(--primary-color);
        }

        &:enabled:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--primary-50);
            outline: none;
        }

        &.ng-invalid.ng-touched {
            border-color: var(--red-500);
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }
    }

    // Modern button styles
    .p-button {
        border-radius: 8px;
        padding: 0.625rem 1.25rem;
        font-weight: 600;
        font-size: 0.875rem;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        border: none;

        &:enabled:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        &:enabled:active {
            transform: translateY(0);
        }

        &.p-button-outlined {
            background: transparent;
            border: 1.5px solid currentColor;

            &:hover {
                background: var(--surface-50);
            }
        }

        &.p-button-text {
            background: transparent;

            &:hover {
                background: var(--surface-100);
            }
        }

        &.p-button-sm {
            padding: 0.5rem 1rem;
            font-size: 0.8125rem;
        }
    }

    // Avatar with modern styling
    .p-avatar {
        border: 3px solid var(--surface-200);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

        &:hover {
            border-color: var(--primary-color);
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        }
    }

    // Modern toggle switch
    .p-inputswitch {
        &.p-inputswitch-checked .p-inputswitch-slider {
            background: var(--primary-color);
        }

        .p-inputswitch-slider {
            background: var(--surface-400);
            border-radius: 34px;

            &:before {
                background: white;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            }
        }

        &:hover:not(.p-disabled) .p-inputswitch-slider {
            background: var(--surface-500);
        }

        &.p-inputswitch-checked:hover .p-inputswitch-slider {
            background: var(--primary-600);
        }
    }

    // Accordion improvements
    .p-accordion {
        .p-accordion-header {
            .p-accordion-header-link {
                border-radius: 8px;
                padding: 1rem 1.25rem;
                background: white;
                border: 1px solid var(--surface-border);
                margin-bottom: 0.5rem;
                transition: all 0.2s ease;

                &:hover {
                    background: var(--surface-50);
                    border-color: var(--primary-200);
                }
            }

            &:not(.p-disabled).p-highlight .p-accordion-header-link {
                background: var(--primary-50);
                border-color: var(--primary-color);
                color: var(--primary-color);
            }
        }

        .p-accordion-content {
            border: 1px solid var(--surface-border);
            border-top: none;
            border-radius: 0 0 8px 8px;
            padding: 1.5rem;
            margin-bottom: 0.5rem;
        }
    }

    // Table improvements
    .p-datatable {
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid var(--surface-border);

        .p-datatable-thead>tr>th {
            background: var(--surface-50);
            color: var(--text-color-secondary);
            font-weight: 600;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.025em;
            padding: 1rem;
        }

        .p-datatable-tbody>tr {
            transition: all 0.2s ease;

            &:hover {
                background: var(--surface-50);
            }

            >td {
                padding: 0.875rem 1rem;
            }
        }
    }

    // Color picker
    .p-colorpicker-preview {
        border-radius: 6px;
        width: 2.5rem;
        height: 2.5rem;
        border: 2px solid var(--surface-300);
        transition: all 0.2s ease;

        &:hover {
            border-color: var(--primary-color);
            transform: scale(1.05);
        }
    }

    // Chips
    .p-chip {
        border-radius: 6px;
        padding: 0.5rem 0.875rem;
        font-size: 0.875rem;
        font-weight: 500;
        transition: all 0.2s ease;
        cursor: pointer;

        &:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
    }

    // Tags
    .p-tag {
        border-radius: 6px;
        font-weight: 600;
        padding: 0.375rem 0.75rem;
        font-size: 0.8125rem;
    }

    // File upload
    .p-fileupload {
        border-radius: 8px;

        .p-fileupload-choose {
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.2s ease;

            &:hover {
                transform: translateY(-1px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            }
        }
    }
}

// Spacing utilities
.space-y-4>*+* {
    margin-top: 1rem;
}

.space-y-6>*+* {
    margin-top: 1.5rem;
}

// Responsive improvements
@media (max-width: 1024px) {
    :host ::ng-deep {
        .p-tabview .p-tabview-nav {
            overflow-x: auto;
            padding-bottom: 0.5rem;

            &::-webkit-scrollbar {
                height: 4px;
            }

            &::-webkit-scrollbar-thumb {
                background: var(--primary-200);
                border-radius: 4px;
            }
        }
    }
}

@media (max-width: 768px) {
    :host ::ng-deep {
        .p-tabview {
            .p-tabview-nav {
                gap: 0.25rem;

                .p-tabview-nav-link {
                    padding: 0.75rem 1rem;
                    font-size: 0.875rem;

                    i {
                        font-size: 1rem;
                    }
                }
            }
        }

        .p-card {
            .p-card-header {
                padding: 1rem;
            }

            .p-card-content {
                padding: 1rem;
            }
        }

        .grid {
            grid-template-columns: 1fr !important;
        }
    }
}

// Dark mode
[data-theme="dark"],
.dark {
    :host ::ng-deep {
        .p-tabview .p-tabview-nav {
            background: var(--surface-800);
        }

        .p-card {
            background: var(--surface-800);
            border-color: var(--surface-700);

            .p-card-header {
                background: linear-gradient(to right, var(--surface-700), var(--surface-800));
                border-bottom-color: var(--surface-600);
            }
        }
    }
}

/* Sidebar + content specific rules for two-column layout */

aside p-card {
    position: sticky;
    top: 1rem;
    border-radius: 12px;
}

aside p-card .p-card-content {
    padding: 1rem;
}

/* Sidebar nav buttons */
aside nav button {
    background: transparent;
    border: 1px solid transparent;
    color: var(--text-color-secondary);
}

aside nav button.bg-primary-50,
aside nav button[class*="border"] {
    background: linear-gradient(90deg, rgba(var(--primary-rgb), 0.06), rgba(var(--primary-rgb), 0.04));
    border-color: rgba(var(--primary-rgb), 0.12);
    color: var(--primary-color);
}

@media (max-width: 1024px) {

    /* On smaller screens stack the sidebar above content */
    .lg\:col-span-1,
    .lg\:col-span-3 {
        grid-column: 1 / -1 !important;
    }

    aside p-card {
        position: relative;
        top: auto;
        margin-bottom: 1rem;
    }
}

/* Prevent overlapping/sticky collision */
main {
    position: relative;
    z-index: 1;
    min-width: 0;
    /* prevent overflow from flex items */
}

/* Ensure cards have margin to avoid visual overlap */
.p-card {
    margin-bottom: 0.75rem;
}

/* Card overflow handling: make cards behave as flexible columns so
   header/footer stay visible and content scrolls when too long. */
:host ::ng-deep {
    .p-card {
        display: flex;
        flex-direction: column;
        /* make sure card doesn't exceed viewport and can shrink */
        max-height: calc(100vh - 8rem);

        .p-card-content {
            /* content area grows and scrolls when needed */
            flex: 1 1 auto;
            min-height: 0;
            /* allow proper overflow in flexbox */
            overflow: auto;
            -webkit-overflow-scrolling: touch;
            word-break: break-word;
            hyphens: auto;
        }

        /* keep header & footer visible and pinned */
        .p-card-header,
        .p-card-footer {
            flex: 0 0 auto;
        }
    }

    /* Utility for cases where only the content should scroll inside a card */
    .card-scrollable {
        max-height: calc(100vh - 12rem);
        overflow: auto;
        min-height: 6rem;
    }
}

/* Appearance preview and swatch styles */
.appearance-preview {
    min-height: 220px;
}

.appearance-preview .preview-header {
    display: flex;
    align-items: center;
}

.appearance-preview .preview-card {
    margin-top: 8px;
}

.swatch {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: 1px solid rgba(15, 23, 42, 0.06);
    cursor: pointer;
}

.swatch:hover {
    transform: translateY(-2px) scale(1.03);
    box-shadow: 0 6px 18px rgba(15, 23, 42, 0.08);
}

.appearance-preview .preview-card>*+* {
    margin-top: 0.75rem;
}

.preview-actions button.p-button {
    min-width: 90px;
}

/* Make sure preview buttons don't overflow on small screens */
@media (max-width: 1024px) {
    .appearance-preview {
        min-height: 180px;
    }

    .swatch {
        width: 28px;
        height: 28px;
    }
}

/* Sessions compact table */
.sessions-table {

    /* keep paginator visible; make the body scroll when rows exceed space */
    .p-datatable-tbody-wrapper {
        max-height: 34vh;
        overflow: auto;
        -webkit-overflow-scrolling: touch;
    }

    .p-datatable-tbody>tr>td {
        padding: 0.5rem 0.75rem;
        font-size: 0.875rem;
    }

    .p-paginator {
        padding: 0.5rem 1rem;
    }

}

/* Provide a subtle focus ring for keyboard nav on style tiles */
.p-card [role="button"]:focus {
    outline: 2px solid rgba(59, 130, 246, 0.25);
    outline-offset: 2px;
}